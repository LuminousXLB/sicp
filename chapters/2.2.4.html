<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="2.2.4  Example: A Picture Language" />
    <title>
      2.2.4  Example: A Picture Language
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html">  Foreword</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html">  Prefaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html">  Acknowledgments</a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1  Building Abstractions with Functions</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-4" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1  The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./1.1.1.html"> 1.1.1  Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.2.html"> 1.1.2  Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.3.html"> 1.1.3  Evaluating Operator Combinations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.4.html"> 1.1.4  Compound Functions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.5.html"> 1.1.5  The Substitution Model for Function Application</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.6.html"> 1.1.6  Conditional Expressions and Predicates</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.7.html"> 1.1.7  Example: Square Roots by Newton s Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.8.html"> 1.1.8  Functions as Black-Box Abstractions</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2  Functions and the Processes They Generate</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-14" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.2.1.html"> 1.2.1  Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.2.html"> 1.2.2  Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.3.html"> 1.2.3  Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.4.html"> 1.2.4  Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.5.html"> 1.2.5  Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.6.html"> 1.2.6  Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3  Formulating Abstractions with Higher-Order Functions</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-21" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.3.1.html"> 1.3.1  Functions as Arguments</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.2.html"> 1.3.2  Constructing Functions using Lambda Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.3.html"> 1.3.3  Functions as General Methods</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.4.html"> 1.3.4  Functions as Returned Values</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2  Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-26" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1  Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./2.1.1.html"> 2.1.1  Example: Arithmetic Operations for Rational Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.2.html"> 2.1.2  Abstraction Barriers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.3.html"> 2.1.3  What Is Meant by Data?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.4.html"> 2.1.4  Extended Exercise: Interval Arithmetic</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2  Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-32" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.2.1.html"> 2.2.1  Representing Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.2.html"> 2.2.2  Hierarchical Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.3.html"> 2.2.3  Sequences as Conventional Interfaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.4.html"> 2.2.4  Example: A Picture Language</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3  Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-37" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.3.1.html"> 2.3.1  Strings</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.2.html"> 2.3.2  Example: Symbolic Differentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.3.html"> 2.3.3  Example: Representing Sets</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.4.html"> 2.3.4  Example: Huffman Encoding Trees</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4  Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-42" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.4.1.html"> 2.4.1  Representations for Complex Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.2.html"> 2.4.2  Tagged data</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.3.html"> 2.4.3  Data-Directed Programming and Additivity</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5  Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.5.1.html"> 2.5.1  Generic Arithmetic Operations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.2.html"> 2.5.2  Combining Data of Different Types</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.3.html"> 2.5.3  Example: Symbolic Algebra</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3  Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1  Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./3.1.1.html"> 3.1.1  Local State Variables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.2.html"> 3.1.2  The Benefits of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.3.html"> 3.1.3  The Costs of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2  The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.2.1.html"> 3.2.1  The Rules for Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.2.html"> 3.2.2  Applying Simple Functions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.3.html"> 3.2.3  Frames as the Repository of Local State</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.4.html"> 3.2.4  Internal Declarations</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3  Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-60" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.3.1.html"> 3.3.1  Mutable List Structure</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.2.html"> 3.3.2  Representing Queues</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.3.html"> 3.3.3  Representing Tables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.4.html"> 3.3.4  A Simulator for Digital Circuits</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.5.html"> 3.3.5  Propagation of Constraints</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4  Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.4.1.html"> 3.4.1  The Nature of Time in Concurrent Systems</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.2.html"> 3.4.2  Mechanisms for Controlling Concurrency</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5  Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-69" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-70">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                <a href="./3.5.1.html"> 3.5.1  Streams Are Delayed Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.2.html"> 3.5.2  Infinite Streams</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.3.html"> 3.5.3  Exploiting the Stream Paradigm</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.4.html"> 3.5.4  Streams and Delayed Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.5.html"> 3.5.5  Modularity of Functional Programs and Modularity of Objects</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4  Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-75" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1  The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./4.1.1.html"> 4.1.1  The Core of the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.2.html"> 4.1.2  Representing Statements and Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.3.html"> 4.1.3  Evaluator Data Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.4.html"> 4.1.4  Running the Evaluator as a Program</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.5.html"> 4.1.5  Data as Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.6.html"> 4.1.6  Internal Declarations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.7.html"> 4.1.7  Separating Syntactic Analysis from Execution</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2  Lazy Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-84" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.2.1.html"> 4.2.1  Normal Order and Applicative Order</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.2.html"> 4.2.2  An Interpreter with Lazy Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.3.html"> 4.2.3  Streams as Lazy Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3  Nondeterministic Computing</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.3.1.html"> 4.3.1  Search and amb</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.2.html"> 4.3.2  Examples of Nondeterministic Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.3.html"> 4.3.3  Implementing the amb Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4  Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.4.1.html"> 4.4.1  Deductive Information Retrieval</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.2.html"> 4.4.2  How the Query System Works</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.3.html"> 4.4.3  Is Logic Programming Mathematical Logic?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.4.html"> 4.4.4  Implementing the Query System</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5  Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-97" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1  Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./5.1.1.html"> 5.1.1  A Language for Describing Register Machines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.2.html"> 5.1.2  Abstraction in Machine Design</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.3.html"> 5.1.3  Subroutines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.4.html"> 5.1.4  Using a Stack to Implement Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.5.html"> 5.1.5  Instruction Summary</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2  A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-104" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.2.1.html"> 5.2.1  The Machine Model</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.2.html"> 5.2.2  The Assembler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.3.html"> 5.2.3  Generating Execution Functions for Instructions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.4.html"> 5.2.4  Monitoring Machine Performance</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3  Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.3.1.html"> 5.3.1  Memory as Vectors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.2.html"> 5.3.2  Maintaining the Illusion of Infinite Memory</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4  The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-112" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-113">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                <a href="./5.4.1.html"> 5.4.1  The Core of the Explicit-Control Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.2.html"> 5.4.2  Sequence Evaluation and Tail Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.3.html"> 5.4.3  Conditionals, Assignments, and Declarations and Blocks</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.4.html"> 5.4.4  Running the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5  Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-117" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.5.1.html"> 5.5.1  Structure of the Compiler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.2.html"> 5.5.2  Compiling Statements and Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.3.html"> 5.5.3  Compiling Applications</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.4.html"> 5.5.4  Combining Instruction Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.5.html"> 5.5.5  An Example of Compiled Code</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.6.html"> 5.5.6  Lexical Addressing</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.7.html"> 5.5.7  Interfacing Compiled Code to the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./references.html">  References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./making-of.html">  Making of the JavaScript Adaptation</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    2.2.4  Example: A Picture Language
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'><SECTION>
    

  
  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    This section presents a simple language for drawing pictures that
    illustrates the power of data abstraction and closure, and also exploits
    higher-order
    
      
      functions
    
    in an essential way.  The language is designed to make it easy to
    experiment with patterns such as the ones in
    figure&nbsp;<REF NAME="fig:sqlimit-designs"><a class="superscript" id="2.2.4-fig-link-2.9" href="./2.2.4.html#fig_2.9">2.9</a></REF>, which are composed of
    repeated elements that are shifted and scaled.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a> In this language, the data objects being
    combined are represented as
    
      
      functions
    
    rather than as list structure. Just as
    
      
      <kbd>pair</kbd>,
    
    which satisfies the
    
    closure property, allowed us to easily build arbitrarily complicated list
    structure, the operations in this language, which also satisfy the closure
    property, allow us to easily build arbitrarily complicated patterns.
    <FIGURE>
      <img class="scale_factor_" src="../img_original/Fig2.9.std.svg">
      
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.9">Figure 2.9 </a></b>Designs generated with the picture language.
      </div>
    </FIGURE>
  

    

  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    The picture language
  </h2></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    When we began our study of programming in
    section&nbsp;<REF NAME="sec:elements-of-programming"><a class="superscript" id="2.2.4-sec-link-1.1" href="./1.1.html">1.1</a></REF>, we emphasized the
    importance of describing a language by focusing on the language's
    primitives, its means of combination, and its means of abstraction.
    We'll follow that framework here.
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    Part of the elegance of this picture language is that there is only one
    kind of element, called a
    
    <EM>painter</EM>.  A painter draws an image that is shifted and scaled to
    fit within a designated
    
    parallelogram-shaped frame.  For example, there's a primitive painter
    we'll call <kbd>wave</kbd>
    that makes a crude line drawing,
    as shown in figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF>.
    
    <FIGURE>
      <img class="scale_factor_" id="fig_2.10" src="../img_original/Fig2.10.std.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.10">Figure 2.10 </a></b>Images produced by the <kbd>wave</kbd>
      painter, with respect to four different frames.  The frames, shown
      with dotted lines, are not part of the images.
      </div>
    </FIGURE>
  

    

    The actual shape of the drawing depends on the frame—all four
    images in figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF> are produced by the same
    <kbd>wave</kbd> painter, but with respect to four
    different frames. Painters can be more elaborate than this: The primitive
    painter called <kbd>rogers</kbd> paints a picture of
    MIT's founder, William Barton Rogers, as shown in
    figure&nbsp;<REF NAME="fig:rogers"><a class="superscript" id="2.2.4-fig-link-2.11" href="./2.2.4.html#fig_2.11">2.11</a></REF>.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
    The four images in figure&nbsp;<REF NAME="fig:rogers"><a class="superscript" id="2.2.4-fig-link-2.11" href="./2.2.4.html#fig_2.11">2.11</a></REF>
    are drawn with respect to the same four frames
    as the <kbd>wave</kbd> images in
    figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF>.
    
    <FIGURE>
      <img class="scale_factor_" id="fig_2.11" src="../img_original/Fig2.11.std.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.11">Figure 2.11 </a></b>
	Images of William Barton Rogers, founder and first
        president of MIT, painted with respect to the same four frames as in
	figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF> (original image reprinted with
	the permission of the MIT Museum).
      </div>
    </FIGURE>
  
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    
    To combine images, we use various operations that construct new painters
    from given painters. For example, the
    
    <kbd>beside</kbd> operation takes two painters and
    produces a new, compound painter that draws the first painter's image
    in the left half of the frame and the second painter's image in the
    right half of the frame. Similarly,
    
    <kbd>below</kbd> takes two painters and produces a
    compound painter that draws the first painter's image below the
    second painter's image. Some operations transform a single painter
    to produce a new painter.  For example,
    
    
      
      <kbd>flip_vert</kbd>
    
    takes a painter and produces a painter that draws its image upside-down, and
    
    
      
      <kbd>flip_horiz</kbd>
    
    produces a painter that draws the original painter's image
    left-to-right reversed.
  </p></div>

  
    <FIGURE>
      <img class="scale_factor_" id="fig_2.12" src="../img_original/Fig2.12.std.svg"><div class='snippet' id='javascript_35_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsGMB7AOwGcAXUACwFMBDAJzJVAF5QAjakgSwBNqAFDQZkANKABmAG24AHAPoA3aoyF1GASg0BubCFCFSFYY0ytQ5WngDWakSnEmmO3CUoEA7ncYoX+t57eZJg6QA')">const wave2 = beside(wave, flip_vert(wave)); 
const wave4 = below(wave2, wave2);
</pre></div></div>
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.12">Figure 2.12 </a></b>Creating a complex figure,
    starting from the <kbd>wave</kbd> painter of
    figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF>.
    </div>
    </FIGURE>
  

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    Figure&nbsp;<REF NAME="fig:build-up-wave"><a class="superscript" id="2.2.4-fig-link-2.12" href="./2.2.4.html#fig_2.12">2.12</a></REF> shows the drawing of a
    painter called <kbd>wave4</kbd>
    that is built up in two stages starting from
    <kbd>wave</kbd>:
    <div class='snippet' id='javascript_35_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsGMB7AOwGcAXUACwFMBDAJzJVAF5QAjakgSwBNqAFDQZkANKABmAG24AHAPoA3aoyF1GASg0BubCFCFSFYY0ytQ5WngDWakSnEmmO3CUoEA7ncYoX+t57eZJg6QA')">const wave2 = beside(wave, flip_vert(wave));
const wave4 = below(wave2, wave2);
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    
    In building up a complex image in this manner we are exploiting the fact
    that painters are closed under the language's means of combination.
    The <kbd>beside</kbd> or
    <kbd>below</kbd> of two painters is itself a painter;
    therefore, we can use it as an element in making more complex painters.
    As with building up list structure using
    
      
      <kbd>pair</kbd>,
    
    the closure of our data under the means of combination is crucial to the
    ability to create complex structures while using only a few operations.
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    Once we can combine painters, we would like to be able to abstract typical
    patterns of combining painters. We will implement the painter operations as 
    
      
      JavaScript functions.
    
    This means that we don't need a special abstraction mechanism in the
    picture language: Since the means of combination are ordinary 
    
    JavaScript functions,
    we automatically have the capability to do anything with painter operations
    that we can do with
    
      
      functions.
    
    For example, we can abstract the pattern in
    <kbd>wave4</kbd> as
    <div class='snippet' id='javascript_35_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQ8AbCgByYFMATAfSYEMKAnAM4AKXhSJlW-AJSgA3tlBLQJGoLKgxEqSlABeUACNWgiu1ai+2-gBo6jJpwBuUspfGSZ0gNyLl-VjICflp1HhIAa3drFDstTxQfbABfXFUidVAAC1YefjJMfXtmNi4xIWEcvLIkwSyqAHdK3PzMHyA')">function flipped_pairs(painter) {
    const painter2 = beside(painter, flip_vert(painter));
    return below(painter2, painter2);
}
</pre></div></div>
    and define <kbd>wave4</kbd> as an instance of this
    pattern:
    <div class='snippet' id='javascript_35_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQ8AbCgByYFMATAfSYEMKAnAM4AKXhSJlW-AJSgA3tlBLQJGoLKgxEqSlABeUACNWgiu1ai+2-gBo6jJpwBuUspfGSZ0gNyLl-VjICflp1HhIAa3drFDstTxQfbABfXFUidVAAC1YefjJMfXtmNi4xIWEcvLIkwSyqAHdK3PzMHyA')">const wave4 = flipped_pairs(wave);
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    
      
      
        
    <FIGURE>
      <img class="scale_factor_" id="fig_2.13" src="../img_javascript/ch2-Z-G-37.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.13">Figure 2.13 </a></b>Recursive plans for
	  <kbd>right_split(n)</kbd> and
	  <kbd>corner_split(n)</kbd>.</div>
    </FIGURE>
  
      
    
    We can also define recursive operations. Here's one that makes
    painters split and branch towards the right as shown in
    
      
      
	figures&nbsp;<REF NAME="fig:split-plans"><a class="superscript" id="2.2.4-fig-link-2.13" href="./2.2.4.html#fig_2.13">2.13</a></REF>
      
    
    and
    
      
      
	figures&nbsp;<REF NAME="fig:split-plans-2"><a class="superscript" id="2.2.4-fig-link-2.14" href="./2.2.4.html#fig_2.14">2.14</a></REF>.
      
    
    <div class='snippet' id='javascript_35_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQAnCgcwAsyB9AZwAcAbCsgBRcAhhSJkApnQA0oIgEpQAb2yg1oCnlADaAXn2gADIpXqz9CWQJ1aIsZLoBuVeoC+oCTw4TlL86BIaDjJQDgBbYR4eKVBdeiZWTl5+IVFxKVlaAFpQAEZ5Z381OktrWgAjCQ4KABMJVPsM0LJhEgBrAXDI6JlQiKipeQK-UFdsMewOZioAdwEGFnZuPkFmCWE6MllMIccgA')">function right_split(painter, n) {
    if (n === 0) {
        return painter;
    } else {
        const smaller = right_split(painter, n - 1);
        return beside(painter, below(smaller, smaller));
    }
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    We can produce balanced patterns by branching upwards as well as towards
    the right (see exercise&nbsp;<REF NAME="ex:up-split"><a class="superscript" id="2.2.4-ex-link-2.44" href="./2.2.4.html#ex_2.44">2.44</a></REF> and
    figure&nbsp;<REF NAME="fig:split-plans"><a class="superscript" id="2.2.4-fig-link-2.13" href="./2.2.4.html#fig_2.13">2.13</a></REF>).
    <div class='snippet' id='javascript_35_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQAnCgcwAsyB9AZwAcAbCsgBRcAhhSJkApnQA0oIgEpQAb2yg1oCnlADaAXn2gADIpXqz9CWQJ1aIsZLoBuVeoC+oCTw4TlL86BIaDjJQDgBbYR4eKVBdeiZWTl5+IVFxKVlaAFpQAEZ5Z381OktrWgAjCQ4KABMJVPsM0LJhEgBrAXDI6JlQiKipeQK-UFdsMfxicmpaAi4kvkE7dN6FXzNNbT0DY3WikqsbUGWHQrcPLx9TIsCiYL7umLi5hZSTpuy84aKLQ9pg1odSrVOqdfo9WRdAZ0eSyd4ws5qMYTQikSg0AJUGxSV5LNIOTImEabHSxHZE-alI7wxGjC7ePbmW73OaxUAvbiLBorTKgHL5WnqZkhBgsEJxUWJTlvfEfPlfQVqYWgMhUebRPDi0DA2r1OayObffzK8pUMiqsJsSVagHtATW2TWo1MoIhQLYuhs91EHHSvGNVbygUjdQHMrNQECHWg1XqiSa2TewbSEM-IrR+rw2Sm81US1O52jca4DjMKgAdwESbouIEzAkwjoZFkmCGjiAA')">function corner_split(painter, n) {
    if (n === 0) {
       return painter;
    } else {
       const up = up_split(painter, n - 1);
       const right = right_split(painter, n - 1);
       const top_left = beside(up, up);
       const bottom_right = below(right, right);
       const corner = corner_split(painter, n - 1);
       return beside(below(painter, top_left),
                     below(bottom_right, corner));
    }
}
</pre></div></div>
    
  </p></div>

  
  
  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    
      
      
	
    <FIGURE>
      <img class="scale_factor_" id="fig_2.14" src="../img_javascript/Fig2.14b.std.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.14">Figure 2.14 </a></b>The recursive operation
          <kbd>right_split</kbd> applied to the
	  painters <kbd>wave</kbd> and
          <kbd>rogers</kbd>.
          Combining four
          <kbd>corner_split</kbd> figures
	  produces symmetric
	  <kbd>square_limit</kbd>
          as shown in figure&nbsp;<REF NAME="fig:sqlimit-designs"><a class="superscript" id="2.2.4-fig-link-2.9" href="./2.2.4.html#fig_2.9">2.9</a></REF>.
          </div>
    </FIGURE>
  
      
    
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    By placing four copies of a
    
    <kbd>corner_split</kbd>
    
    appropriately, we obtain a pattern called
    
      
      <kbd>square_limit</kbd>,
      
    
    whose application to <kbd>wave</kbd> and
    <kbd>rogers</kbd> is shown in
    figure&nbsp;<REF NAME="fig:sqlimit-designs"><a class="superscript" id="2.2.4-fig-link-2.9" href="./2.2.4.html#fig_2.9">2.9</a></REF>:
    <div class='snippet' id='javascript_35_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQAnCgcwAsyB9AZwAcAbCsgBRcAhhSJkApnQA0oIgEpQAb2yg1oCnlADaAXn2gADIpXqz9CWQJ1aIsZLoBuVeoC+oCTw4TlL86BIaDjJQDgBbYR4eKVBdeiZWTl5+IVFxKVlaAFpQAEZ5Z381OktrWgAjCQ4KABMJVPsM0LJhEgBrAXDI6JlQiKipeQK-UFdsMfxicmpaAi4kvkE7dN6FXzNNbT0DY3WikqsbUGWHQrcPLx9TIsCiYL7umLi5hZSTpuy84aKLQ9pg1odSrVOqdfo9WRdAZ0eSyd4ws5qMYTQikSg0AJUGxSV5LNIOTImEabHSxHZE-alI7wxGjC7ePbmW73OaxUAvbiLBorTKgHL5WnqZkhBgsEJxUWJTlvfEfPlfQVqYWgMhUebRPDi0DA2r1OayObffzK8pUMiqsJsSVagHtATW2TWo1MoIhQLYuhs91EHHSvGNVbygUjdQHMrNQECHWg1XqiSa2TewbSEM-IrR+rw2Sm81US1O52jca4VHTDEcACOBGEJTYfDCMoDhMZmLuISrNYcXqxProuO5BLkheVcy4OOYkS0cQzAjwfHmzCxFAAXgIO3QHLDQOvN7TlTwqAB3ceTtkzv5sOYgiRsGpHohr6sb5OptNv8xzijzABuUkEO8GQswyOW0OlHE8eDwWQD2PPsJ0g4YJg4RdD06dcb3rFJmAkTtZAAViGRwgA')">function square_limit(painter, n) {
    const quarter = corner_split(painter, n);
    const half = beside(flip_horiz(quarter), quarter);
    return below(flip_vert(half), half);
}
</pre></div></div>
    
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.44" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.44">Exercise 2.44 </a></b> 
  
    Define the
    
      
      function
    
    
    
      
      <kbd>up_split</kbd>
    
    used by
    
      
      <kbd>corner_split</kbd>.
      
    
    It is similar to
    
      
      <kbd>right_split</kbd>,
      
    
    except that it switches the roles of <kbd>below</kbd>
    and <kbd>beside</kbd>.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_1_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_1_div"><SOLUTION>
    
      <div class='snippet' id='javascript_35_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQCAHAfQGd6AbCsgCnoEMKiZAKYAnADSgiASlABvbKEWgKeUF1oBeLaAAMM+UsOgRQsgRG0+A4SIDcCpQF9QQtsyFyHR0CRrMyoMwAtrxsbKKgGnRMrBzcVoKiErQAtKAAjFL23oomZhaBZLwkANZcAEZCzBQAJkJcwaHh4oEhYaJSEgk2WV6gjtgD2MwAFlQA7lwMLOycXCNCvCJkEphSWUA')">function up_split(painter, n) {
    if (n === 0) {
        return painter;
    } else {
        const smaller = up_split(painter, n - 1);
        return stack(beside(smaller, smaller), painter);
    }
}
</pre></div></div>
      
    </SOLUTION></div></div>
</EXERCISE></div>


  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Higher-order operations
  </h2></div>

  

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    In addition to abstracting patterns of combining painters, we can work at a
    higher level, abstracting patterns of combining painter operations. That
    is, we can view the painter operations as elements to manipulate and can
    write means of combination for these
    
      
    elements—functions
    that take painter operations as arguments and create new painter operations.
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    For example,
    
      
      <kbd>flipped_pairs</kbd>
      
    
    and
    
      
      <kbd>square_limit</kbd>
      
    
    each arrange four copies of a painter's image in a square pattern;
    they differ only in how they orient the copies. One way to abstract this
    pattern of painter combination is with the following
    
      
      function,
    
    which takes four one-argument painter operations and produces a painter
    operation that transforms a given painter with those four operations and
    arranges the results in a square.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
    
      
      The functions <kbd>tl</kbd>,
      
    
    <kbd>tr</kbd>, <kbd>bl</kbd>, and
    <kbd>br</kbd> are the transformations to apply to the
    top left copy, the top right copy, the bottom left copy, and the bottom
    right copy, respectively.
    <div class='snippet' id='javascript_35_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQKATAUyMrIE8AKADwEpQBvbKGGgATozIFRtLgG5sAX1yFSlGqADOARwIBDcQH0qeA3ipSOZADYAaUGVF2ARrdBPRfQSLESptAA66FCyMoqAAvAB8mmS6JADWHE6MGgyMllYcgcFkoTx2DllBIR75Qt4VlVUVyalMSZnZJfluokU5eTw88krYGgAWVADuHNp6hsam5m2S0gYE-nWMBvTDRHZpLBTsduXV+6A6+rmiBrNEBqIUAOb9ZHZHoidnfgZWjHhkPHvCHP2Mx2+3m6QA')">function square_of_four(tl, tr, bl, br) {
    return painter => {
        const top = beside(tl(painter), tr(painter));	
        const bottom = beside(bl(painter), br(painter));
        return below(bottom, top);
    };
}
</pre></div></div>
    
    Then
    
      
      <kbd>flipped_pairs</kbd>
      
    
    can be defined in terms of
    
      
      <kbd>square_of_four</kbd>
      
       as follows:<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a>
    <div class='snippet' id='javascript_35_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnARwIEMAnAUwH0q9O8qCrABRkANgBpQZVpIBGE0LNYBKUAG9soLaA5lBtAA7MKRMu1agAvAD56ZZiQDWQ2ezoUAJuxGihRk2YqktJ+xqbmysrimtqxcfEJWq7uXi6+-uFBisIZgZHKANzYAL64hKSUNKCe7KYUZACeQgAeqhqxuvqgzUWl+MTk1LR4ohQGBuwenP6sdKEBEeoxWiQ0dGSgqwC2sibsmFb0TGxcPHwCwnqsRJwEBilcHlQA7kSSI2OcAG7mZJLLiUBQPiHwMnAAFlRWBQAF6SGp1RqFAGda6bKg7PaYeaZZF9OiQ55CUETKYzObg9hsMiRApAA')">function flipped_pairs(painter) {
    const combine4 = square_of_four(identity, flip_vert, 
                                    identity, flip_vert);
    return combine4(painter);
}
</pre></div></div>
    
    and
    
      
      <kbd>square_limit</kbd>
      
    
    can be expressed as<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a>
    <div class='snippet' id='javascript_35_11_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnARwIEMAnAUwH0q9O8qCrABRkANgBpQZVpIBGE0LNYBKUAG9soLaA5lBtAA7MKRMu1agAvAD56ZZiQDWQ2ezoUAJuxGihRk2YqktJ+xqbmysrimtqxcfEJWq7uXi6+-uFBisIZgZHKANzYAL64hKSUNKCe7KYUZACeQgAeqhqxuvqgzUWl+MTk1LSsFADmABZknHQGovWhAeaSRG0xWhR4oEK0lrugAAyriZ2shmGBRbHFoOyidOzqa3EkNHRk9AC2zKKi5lY6Y0m01m81yS1AtAAtKAAIyFJ4ddh6U6KNw1BaZSRvBzOOhfH7gvHfX4qeFXEplAaVWgEAzAuZkDGBZZHbQbLY7PaHR7HJFdMGsS7aa63e48hIvIhvT7Ev6WUC0+mg87gqGwskJE60bFOFxo1JEgkyGVGqKgAUarSlPrlQZVF6ncxKxkClni9abbZWLmsuJa80qwVPEV3B7teKS6W0-6KmYMpmq0DQuFC56vd4jCbveWZoFx5WLY1qlMIrSR95kKh0354bOolLeWmSWmW2LlxRUMiVj6cXN1nXOPuSPut7Tth1EOWgCdO-MuwPLJPq1OI5Ha+y65LoyvV9i1yQzoKlxLxLepV0drtUHsj1vWykVIb0JhsLhzD4FzEQ33T9O-j6yCY7CYP8jAsBw3C8PwghCHgcx0uMVAjAAXpINR1I0kjHieOE4WunC0g2nAeFQADuRCSHBFB0gAbuYZCtv6LwAUBmBCIezoJkWkS9LgdCIaRQhga+nDvvM4zsGwZCSJgPFAA')">function square_limit(painter, n) {
    const combine4 = square_of_four(flip_horiz, identity, 
                                    rotate180, flip_vert);
    return combine4(corner_split(painter, n));
}
</pre></div></div>
    
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.45" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.45">Exercise 2.45 </a></b> 
  
    
      
      
	The functions
	<kbd>right_split</kbd>
      
    
    and
    
      
      <kbd>up_split</kbd>
    
    can be expressed as instances of a general splitting operation. 
    
      
      Declare a function
    
    
    <kbd>split</kbd> with the property that evaluating
    
    <div class='snippet' id='javascript_35_12_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChslAGYCuAdgMYAuAlgPYmgDOADgDZUWgU2gBGApqADuAJ3YU+9HgE9GFIgBMJFXGToMOogOYALCgH1mbDgF5GrdgAp+DKooA0vPixqCAlAG5sqkutBEmBuYmZkZWTi4O1rZ8HkA')">const right_split = split(beside, below);
const up_split = split(below, beside);
</pre></div></div>
    produces
    
      
      functions
    
    
      
      <kbd>right_split</kbd>
    
    and
    
      
      <kbd>up_split</kbd>
    
    with the same behaviors as the ones already defined.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_2_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_2_div"><SOLUTION>
    
      <div class='snippet' id='javascript_35_13_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnABwBsKyAKAIwoHNuBTAE4B9KgwA09ALYBDJk0EiGASlABvbKE2hCpSjVAC+JIYxbsG0ikTKCJRFeq1PQFPKDa0AvN9AAGBxrOQYZkBAK0FlY2AgDcgUEAvqB8THR8avFBWiQ0dGRSsvICoJ4GRibMrGyR1ragtAC0oACMSnFZziFhtFy8CqLVlrUCEpkd41p0MnL9DGxThXULMwJKbWNaCZlbTl3hZcamrHFb2DlEeQY8ABZkFWYl9JXsHHx0FAAmfBJ50iQA1utsHRrlQAO5sAQ3O5HdjXPjSARkCSYNYxIA')">function split(bigger_op, smaller_op) {
    function rec_split(painter, n) {
        if (n === 0) {
            return painter;
        } else {
            const smaller = rec_split(painter, n - 1);
            return bigger_op(painter, 
                        smaller_op(smaller, smaller));
        }
    }
    return rec_split;
}
</pre></div></div>
      <div class='snippet' id='javascript_35_14_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnABwBsKyAKAIwoHNuBTAE4B9KgwA09ALYBDJk0EiGASlABvbKE2hCpSjVAC+JIYxbsG0ikTKCJRFeq1PQFPKDa0AvN9AAGBxrOQYZkBAK0FlY2AgDcgUEAvqB8THR8avFBWiQ0dGRSsvICoJ4GRibMrGyR1ragtAC0oACMSnFZziFhtFy8CqLVlrUCEpkd41p0MnL9DGxThXULMwJKbWNaCZlbTl3hZcamrHFb2DlEeQY8ABZkFWYl9JXsHHx0FAAmfBJ50iQA1utsHRrlQAO5sAQ3O5HdjXPjSARkCSYNYxIA')">const right_split = split(beside, below);

right_split(rogers, 4);
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>

      
  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
    
    Frames
  </h2></div>

  
  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    Before we can show how to implement painters and their means of
    combination, we must first consider
    
    frames.  A frame can be described by three vectors—an origin vector
    and two edge vectors.  The origin vector specifies the offset of the
    frame's origin from some absolute origin in the plane, and the edge
    vectors specify the offsets of the frame's corners from its origin.
    If the edges are perpendicular, the frame will be rectangular.
    Otherwise the frame will be a more general parallelogram.
  </p></div>

  <div class='permalink'>
<a name='p15' class='permalink'></a><p>
    Figure&nbsp;<REF NAME="fig:frame"><a class="superscript" id="2.2.4-fig-link-2.15" href="./2.2.4.html#fig_2.15">2.15</a></REF> shows a frame and its associated
    vectors.  In accordance with data abstraction, we need not be specific yet
    about how frames are represented, other than to say that there is a
    constructor
    
    
      
      <kbd>make_frame</kbd>,
    
    which takes three vectors and produces a frame, and three corresponding
    selectors
    
    
      
      <kbd>origin_frame</kbd>,
      
    
    
    
      
      <kbd>edge1_frame</kbd>,
      
    
    and
    
    
      
      <kbd>edge2_frame</kbd>
      
    
    (see exercise&nbsp;<REF NAME="ex:implement-frames"><a class="superscript" id="2.2.4-ex-link-2.47" href="./2.2.4.html#ex_2.47">2.47</a></REF>).

    
    <FIGURE>
      <img class="scale_factor_" id="fig_2.15" src="../img_original/ch2-Z-G-42.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./2.2.4.html#fig_2.15">Figure 2.15 </a></b>A frame is described by three vectors—an origin and two edges.
      </div>
    </FIGURE>
  
  </p></div>

  <div class='permalink'>
<a name='p16' class='permalink'></a><p>
    
    We will use coordinates in the unit square
    ($0\leq x, y\leq 1$) to specify images. With
    each frame, we associate a
    
    <EM>frame coordinate map</EM>, which will be used to shift and scale images
    to fit the frame.  The map transforms the unit square into the frame by
    mapping the vector $\mathbf{v}=(x, y)$ to the
    vector sum
    
      \[
      \text{Origin(Frame)} + x\cdot \text{ Edge}_1\text{ (Frame)}
      + y\cdot \text{ Edge}_2\text{ (Frame)}
      \]
    
    For example, $(0, 0)$ is mapped to the origin of
    the frame, $(1, 1)$ to the vertex diagonally
    opposite the origin, and $(0.5, 0.5)$ to the
    center of the frame.  We can create a frame's coordinate map with
    the following
    function:<a class='superscript' id='footnote-link-6' href='#footnote-6'>[6]</a>
    <div class='snippet' id='javascript_35_15_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5F2EsRDN9GEbFnY7aa4qn2NAo2bUDVk-b86F-G02H2ADiRuABmUChEwCD9CgsgfzYOCUEQyUqgAVjQ0AADZMI-GhoN-DtCOuF8YL-ORlVVIRmLg7FOPtNgW2w3CuzkHsGFUACOzYISRL7ZjFywmicOYhoGK3HgQLA1AqIE5je1UDUdl6UdBKobs2F7HglL2VYdNEvTtgaXQgA')">function frame_coord_map(frame) {
    return v => add_vect(origin_frame(frame), 
                         add_vect(scale_vect(xcor_vect(v), 
                                             edge1_frame(frame)), 
                                  scale_vect(ycor_vect(v), 
                                             edge2_frame(frame))));
}
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p17' class='permalink'></a><p>
    Observe that applying
    
      
      <kbd>frame_coord_map</kbd>
      
    
    to a frame returns a
    
      
      function
    
    that, given a vector, returns a vector. If the argument vector is in the
    unit square, the result vector will be in the frame.  For example, 
    <div class='snippet' id='javascript_35_16_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5F2EsRDNU-nY7a1xfYkbn2NAo2bUC7wfWQgKqABmUChEwCCBGXc8YM6ABWBDQCwmNVg7NguzkHsGD7Bh51EHh0N4MDQDw3QgA')">frame_coord_map(a_frame)(make_vect(0, 0));
</pre></div></div>
    returns the same vector as
    <div class='snippet' id='javascript_35_17_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61thLEQzaAGOWWKAALxta6V+XEm77NBR5sTv403lTUdVADME6EmGnAlnc9kC86AFYV6B9zHVm6iD2eN3h3kgA')">origin_frame(a_frame);
</pre></div></div>
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.46" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.46">Exercise 2.46 </a></b> 
  
    
    
    
    A two-dimensional vector $v$ running from the
    origin to a point can be represented as a pair consisting of an
    $x$-coordinate and a
    $y$-coordinate.  Implement a data abstraction
    for vectors by giving a constructor
    
    
      
      <kbd>make_vect</kbd>
    
    and corresponding selectors
    
    
      
      <kbd>xcor_vect</kbd>
    
    and
    
    
      
      <kbd>ycor_vect</kbd>.
    
    In terms of your selectors and constructor, implement
    
      
      functions
    
    
    
      
      <kbd>add_vect</kbd>,
    
    
    
      
      <kbd>sub_vect</kbd>,
    
    and
    
    
      
      <kbd>scale_vect</kbd>
    
    that perform the operations vector addition, vector subtraction, and
    multiplying a vector by a scalar:
    
      \begin{eqnarray*}
      (x_1, y_1)+(x_2, y_2) &=&(x_1+x_2, y_1+y_2)\\
      (x_1, y_1)-(x_2, y_2)&=& (x_1-x_2, y_1-y_2)\\
      s\cdot(x, y)&=&(sx, sy)
      \end{eqnarray*}
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_3_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_3_div"><SOLUTION>
    
      <div class='snippet' id='javascript_35_18_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3CWIjFMj0YQ7Yb7UAAXja1yq+zQAAYhOg1asxRKpTLrCgFUqSXYAMzqoSYdWrLY3OjShpsbEOg1sE66IA')">function make_vect(x, y) {
    return pair(x, y);
}
function xcor_vect(vector) {
    return head(vector);
}
function ycor_vect(vector) {
    return tail(vector);
}
function scale_vect(factor, vector) {
    return make_vect(factor * xcor_vect(vector), 
                     factor * ycor_vect(vector));
}
function add_vect(vector1, vector2) {
    return make_vect(xcor_vect(vector1)  
                     + xcor_vect(vector2), 
                     ycor_vect(vector1)  
                     + ycor_vect(vector2));
}
function sub_vect(vector1, vector2) {
    return make_vect(xcor_vect(vector1)  
                     - xcor_vect(vector2), 
                     ycor_vect(vector1)  
                     - ycor_vect(vector2));
}
</pre></div></div>
      
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.47" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.47">Exercise 2.47 </a></b> 
  
    Here are two possible constructors for frames:
    <div class='snippet' id='javascript_35_19_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function make_frame(origin, edge1, edge2) {
    return list(origin, edge1, edge2);
}

function make_frame(origin, edge1, edge2) {
    return pair(origin, pair(edge1, edge2));
}</pre></div></div>
    For each constructor supply the appropriate selectors to produce an
    implementation for frames.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_4_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_4_div"><SOLUTION>
    
      <OL type="a">
	<LI>
	  <div class='snippet' id='javascript_35_20_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61thLEQzfRhGw3bQALxta5VfZoKPN0erdudujdm1sfagAfEm4AZlHQkwE-0U7IXbYc5Qi8HJLsAFZ16AAGxbts0afdyssI-Lx88Gc9uTK1VCd9z7G-+02BbG0y1fd9HzyIA')">function make_frame(origin, edge1, edge2) {
    return list(origin, edge1, edge2);
}
function origin_frame(frame) {
    return list_ref(frame, 0);
}
function edge1_frame(frame) {
    return list_ref(frame, 1);
}
function edge2_frame(frame) {
    return list_ref(frame, 2);
}
</pre></div></div>

          
	</LI>
	
	<LI>
	  <div class='snippet' id='javascript_35_21_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoHUmgVcmVqqEJq0uu16s1LGF+TFyNAipVRClMrl1W9LFOzUJXh8-mlsv9zqRRVt+y94d94YDhta3j8PHSFCyYblohFLujDpQcZ92f9+JkLVSGay1YTOZF2EsRGKZHowjY7tVoAAvG1rlV9mgAAxCdBD1ZNlttti2tj7Ht9kl2ADMw6EmGHE5oU7o7dnKAXxJuAFY16AAGyb-ST1u74ssQ+S0s8O+dtXT2fYu-71a2ovPu9SzyIA')">function make_frame(origin, edge1, edge2) {
    return pair(origin, pair(edge1, edge2));
}
function origin_frame(frame) {
    return head(frame);
}
function edge1_frame(frame) {
    return head(tail(frame));
}
function edge2_frame(frame) {
    return tail(tail(frame));
}
</pre></div></div>
	</LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
      <div class='permalink'>
        <a name='h4' class='permalink'></a><h2>
    
    Painters
  </h2></div>

  

  <div class='permalink'>
<a name='p18' class='permalink'></a><p>
    A painter is represented as a
    
      
      function
    
    that, given a frame as argument, draws a particular image shifted and
    scaled to fit the frame. That is to say, if
    <kbd>p</kbd> is a painter and
    <kbd>f</kbd> is a frame, then we produce
    <kbd>p</kbd>'s image in
    <kbd>f</kbd> by calling <kbd>p</kbd>
    with <kbd>f</kbd> as argument.
  </p></div>

  <div class='permalink'>
<a name='p19' class='permalink'></a><p>
    The details of how primitive painters are implemented depend on the
    particular characteristics of the graphics system and the type of image to
    be drawn.  For instance, suppose we have a
    
      
      function
    
    
    
      
      <kbd>draw_line</kbd>
    
    that draws a line on the screen between two specified points.  Then we can
    create painters for line drawings, such as the
    
      
      <kbd>wave</kbd>
    
    painter in figure&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF>, from lists of line
    segments as follows:<a class='superscript' id='footnote-link-7' href='#footnote-7'>[7]</a>
    
    <div class='snippet' id='javascript_35_22_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKxLYxRYSrlRFib90jkMh6jYFgiF8NMawDUB1E0ewgIYECwIgqCi0KCIzWQrMfz-CDYmgodUm8Px7FjYsIjQ79f3-QjB1rWh0goLIOHfEBQAAIl8GUAHdVSVKdjVVFhONAbwFBKCg6AIDIGDIDVsA4tFhDguRVUoIhBLIbxQC7ORfFVeSWGKV08CUsAdJYEpgLIKdIOtByqDwNJdJNIgWA-CIeIYXi2Hc+UOCQlCcXAyCiMM4pVDk4QeE4gKbJwgSpzITjVlcSLooYWKguwkD0tkTKYrihK0OS+S0v0DLTSynKwvQ1s4yw2iCOKNgejYeCAJYLQ8Lo-zTTIIjGNADsx0nZcZjwYYfBITweD6gjxv+B9ph8vyAv7Nh9J7Bg+0XSbVpmBbbJo-CAIWlqANPVkjrZDttqobs2F7E9Dru1weGoxaLp+oabpW1a-oGs130sIgzXoYQ2FnMc2muKp9jQKNm2R1ZwchuhoZtNh9jhr8qgAZmRoRMDR-QMbsrHwPtNgUHxyUqgAVhJ0AADZyewSmofnBnrhfanZyEamcexEXaZbLmaEx6G8qzPHR3hrceCjVmkZjCnpap7HINxvnlfVgtOe56ngYVpWzronhTdOsWde2QsAEhplwE3ZdO+nFYJzpVZR1Bja1nnqM9i2qnQP3w-RwPTaurMQ6-P7rfdnC6eF+26byZ2pld6Poa6hS5Dhv62o6-Oep4d7IUzJPLYI3G09rgCM9WbBqbLrRqcXXQgA')">function segments_to_painter(segment_list) {
    return frame => 
               for_each(segment => 
                            draw_line(frame_coord_map(frame)
                                      (start_segment(segment)), 
                                      frame_coord_map(frame)
                                      (end_segment(segment))), 
                        segment_list);
}
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p20' class='permalink'></a><p>
    The segments are given using coordinates with respect to the unit square.
    For each segment in the list, the painter transforms the segment endpoints
    with the frame coordinate map and draws a line between the transformed
    points.
  </p></div>

  <div class='permalink'>
<a name='p21' class='permalink'></a><p>
    Representing painters as
    
      
      functions
    
    erects a powerful abstraction barrier in the picture language.  We can
    create and intermix all sorts of primitive painters, based on a variety of
    graphics capabilities. The details of their implementation do not matter.
    Any
    
      
      function
    
    can serve as a painter, provided that it takes a frame as argument and
    draws something scaled to fit the frame.<a class='superscript' id='footnote-link-8' href='#footnote-8'>[8]</a>
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.48" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.48">Exercise 2.48 </a></b> 
  
    
    A directed line segment in the plane can be represented as a pair of
    vectors—the vector running from the origin to the start-point of
    the segment, and the vector running from the origin to the end-point of
    the segment. Use your vector representation from
    exercise&nbsp;<REF NAME="ex:vectors"><a class="superscript" id="2.2.4-ex-link-2.46" href="./2.2.4.html#ex_2.46">2.46</a></REF> to define a representation for
    segments with a constructor
    
    
      
      <kbd>make_segment</kbd>
      
    
    and selectors
    
    
      
      <kbd>start_segment</kbd>
      
    
    and
    
    
      
      <kbd>end_segment</kbd>.
      
    
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_5_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_5_div"><SOLUTION>
    
      <div class='snippet' id='javascript_35_23_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsYosADmdBYRFiUvScjI9TYCt8p2ahLUGi0HGVDFV6s1IrFyJKKrIUtl8sV9m1BIuoG8fkd+QtRU1trlCtiTpkLVS6QoWQ4IuwliIxTI9GERtVoAAvG1rlUAAxoDNCfbZ1bR2PxjVEXwptMkux5nOgasFmhFugJ6V+xXl4m++12JuJtXFs36bA9ltd3RAA')">function make_segment(v_start, v_end) {
    return pair(v_start, v_end);
}
function start_segment(v) {
    return head(v);
}
function end_segment(v) {
    return tail(v);
}
</pre></div></div>

      
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.49" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.49">Exercise 2.49 </a></b> 
  
    Use
    
      
      <kbd>segments_to_painter</kbd>
      
    
    to define the following primitive painters:
    <OL type="a">
      <LI>
        The painter that draws the outline of the designated frame.
      </LI>
      <LI>
        The painter that draws an <QUOTE>X</QUOTE> by connecting opposite corners of
        the frame.
      </LI>
      <LI>
        The painter that draws a diamond shape by connecting the midpoints of
        the sides of the frame.
      </LI>
      
    </OL>
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_6_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_6_div"><SOLUTION>
    
      <OL type="a">
        <LI>
          The painter that draws the outline of the designated frame.
	  
	  <div class='snippet' id='javascript_35_24_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsYosADmdBYRFiUvScjI9TYCt8p2ahLUGi0HGVDFV6s1IrFyJKKrIUtl8sV9m1BIuoG8fkd+QtRU1trlCtiTpkLVS6QoWQ4IvWluJbDwcgY8p4VgoMooRCELF8MpY2Mz2bxLmdrQyFGKdmTqfToDzOYzWZYJ09SKKFbTsfjibjCZYgfOxdLNoUeGqHZYQgADObmxEa-t292R93e8HaCWy2wh4v5UJHk3CjP6yh553R8vdaA14OWMOu9vUJGvRFb+xLFZtoxVFue-ig+eOKAAF4AD5QC2G5WyIY8WC-P4aV5WQwKqUpyhJOwyXuWD4KwyFZygmDMOw3lkIqG4BWWAjCMo1wayPZ98NESMQFAAAiXx4wAdzTGVQIvNMWGY10WAUEoKDoAgMgYMhM2wJi0WEUBVDkNNKCIbiyG8UBXzkXw00klhilAKg8BksB1JYK1jTIUCiF8asbMMvA0g0ksiBYKMijYhh2LYFzoMNMtLNNGzex04pVAk4QeGY3yLNVLjQLIZjVlcULwoYSL-OtZLZFSiKopizV4skpL9BS0s0oyjVgvydyImlP1FWKNgejYdRlKEnh6vtG1LzPF1n0AkC4JmPBhh8EhPE6u1-UG-4qOmTzvN8r82C098GE-Z9RGG+aZk661fW6qaGrIBjWV2tln1Wqg3zYD8YJ2i7XB4H0uv9Y7uoYiiqLexUfIHSNLCIMtQGICgbQgwC2muKpxzQccJ3h1YgZBsGbRrNh9ihmMqn2eHEcnfQUastGNXrNgUGxyVYfx0A8cJ7BidBohwagqnrjo0mIPOp7ZFJjHDkewj+fJxtcCZqgCDIXyjVVTH2dQng4YR0BleRmgQcl6W+Kq7YsYA6HFfpgn1eBqytZl36bX1w3Dvei2dYCuXsSF3nDKlmWfV3RmNfNj3HYOymDZxzpjdVpGid993tdc3WKYVm4w-p03Nf92Orfj4PJStpM0-YJ2bRQHm3beB3Y59MWJbz2WbQAZgT3HaeTyOzejz2bLYeus5hzplZ3COfdbsv8+mv6u9tnPh5rzvi5LmYp59WuU79mP84OzAG97puB6r1e4437vFb78OGd3y3R5tA+J4v3O94LthMFnuepgXjvMGXtudbaxUhKhq2mpat-KSWhXZYUvLfc+J1MZPznlPDORdsAAEhkGINkHAi+M8kEoLQdXDO79VjYCnkAjqpMtq6CAA')">const outline_start_1 = make_vect(0.0, 0.0);
const outline_end_1 = make_vect(1.0, 0.0);
const outline_segment_1 = make_segment(outline_start_1, 
                                       outline_end_1);
const outline_start_2 = make_vect(1.0, 0.0);
const outline_end_2 = make_vect(1.0, 1.0);
const outline_segment_2 = make_segment(outline_start_2, 
                                       outline_end_2);
const outline_start_3 = make_vect(1.0, 1.0);
const outline_end_3 = make_vect(0.0, 1.0);
const outline_segment_3 = make_segment(outline_start_3, 
                                       outline_end_3);
const outline_start_4 = make_vect(0.0, 1.0);
const outline_end_4 = make_vect(0.0, 0.0);
const outline_segment_4 = make_segment(outline_start_4, 
                                       outline_end_4);
const outline_painter = segments_to_painter(
                              list(outline_segment_1, 
                                   outline_segment_2,
				   outline_segment_3,
				   outline_segment_4));
</pre></div></div>
	  
        </LI>
        <LI>
          The painter that draws an <QUOTE>X</QUOTE> by connecting opposite
	  corners of the frame.
	  <div class='snippet' id='javascript_35_25_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsYosADmdBYRFiUvScjI9TYCt8p2ahLUGi0HGVDFV6s1IrFyJKKrIUtl8sV9m1BIuoG8fkd+QtRU1trlCtiTpkLVS6QoWQ4IvWluJbDwcgY8p4VgoMooRCELF8MpY2Mz2bxLmdrQyFGKdmTqfToDzOYzWZYJ09SKKFbTsfjibjCZYgfOxdLNoUeGqHZYQgADObmxEa-t292R93e8HaCWy2wh4v5UJHk3CjP6yh553R8vdaA14OWMOu9vUJGvRFb+xLFZtoxVFue-ig+eOKAAF4AD5QC2G5WyIY8WC-P4aV5WQwKqUpyhJOwyXuWD4KwyFZygmDMOw3lkIqG4BWWAjCMo1wayPZ98NESMQFAAAiXx4wAdzTGVQIvNMWGY10WAUEoKDoAgMgYMhM2wJi0WEUBVDkNNKCIbiyG8UBXzkXw00klhilAKg8BksB1JYK1jTIUCiF8asbMMvA0g0ksiBYKMijYhh2LYFzoMNMtLNNGzex04pVAk4QeGY3yLNVLjQLIZjVlcULwoYSL-OtZLZFSiKopizV4skpL9BS0s0oyjVgvydyImlP1FWKNgejYdRlKEnh6vtG1LzPF1n0AkC4JmPBhh8EhPE6u1-UG-4qOmTzvN8r82C098GE-Z9RGG+aZk661fW6qaGrIBjWV2tln1Wqg3zYD8YJ2i7XB4H0uv9Y7uoYiiqLexUfIHSNLCIMtQGICgbQgwC2muKpxzQccJ3h1YgZBsGbRrNh9ihmMqn2eHEcnfQUastGNXrNgUGxyVYfx0A8cJ7BidBohwagqnrjo0mIPOp7ZFJjHDkewj+fJxtcCZvgjVVTH2dQng4YR0AFeRmgQcln0sYA6G5fpnckaJ1WrMl36bU17XDve42DuxIWqPVmzMZV4Gjalm1Ka1nHOl1pX9cZw3Biq7Z3fNmnFfpp21Ytv7g5jE3+Fdimed51x7aDiOXbaxUhKhk2mpazOpK0W2sMveOTcxpPk5TqO3YY-RsElguOtJrbdCAA')">const x_start_1 = make_vect(0.0, 0.0);
const x_end_1 = make_vect(1.0, 1.0);
const x_segment_1 = make_segment(x_start_1, 
                                 x_end_1);
const x_start_2 = make_vect(1.0, 0.0);
const x_end_2 = make_vect(0.0, 1.0);
const x_segment_2 = make_segment(x_start_2, 
                                 x_end_2);
const x_painter = segments_to_painter(
                              list(x_segment_1, 
                                   x_segment_2));
</pre></div></div>
	  
        </LI>
        <LI>
          The painter that draws a diamond shape by connecting the midpoints of
          the sides of the frame.
	  <div class='snippet' id='javascript_35_26_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsYosADmdBYRFiUvScjI9TYCt8p2ahLUGi0HGVDFV6s1IrFyJKKrIUtl8sV9m1BIuoG8fkd+QtRU1trlCtiTpkLVS6QoWQ4IvWluJbDwcgY8p4VgoMooRCELF8MpY2Mz2bxLmdrQyFGKdmTqfToDzOYzWZYJ09SKKFbTsfjibjCZYgfOxdLNoUeGqHZYQgADObmxEa-t292R93e8HaCWy2wh4v5UJHk3CjP6yh553R8vdaA14OWMOu9vUJGvRFb+xLFZtoxVFue-ig+eOKAAF4AD5QC2G5WyIY8WC-P4aV5WQwKqUpyhJOwyXuWD4KwyFZygmDMOw3lkIqG4BWWAjCMo1wayPZ98NESMQFAAAiXx4wAdzTGVQIvNMWGY10WAUEoKDoAgMgYMhM2wJi0WEUBVDkNNKCIbiyG8UBXzkXw00klhilAKg8BksB1JYK1jTIUCiF8asbMMvA0g0ksiBYKMijYhh2LYFzoMNMtLNNGzex04pVAk4QeGY3yLNVLjQLIZjVlcULwoYSL-OtZLZFSiKopizV4skpL9BS0s0oyjVgvydyImlP1FWKNgejYdRlKEnh6vtG1LzPF1n0AkC4JmPBhh8EhPE6u1-UG-4qOmTzvN8r82C098GE-Z9RGG+aZk661fW6qaGrIBjWV2tln1Wqg3zYD8YJ2i7XB4H0uv9Y7uoYiiqLexUfIHSNLCIMtQGICgbQgwC2muKpxzQccJ3h1YgZBsGbRrNh9ihmMqn2eHEcnfQUastGNXrNgUGxyVYfx0A8cJ7BidBohwagqnrjo0mIPOp7ZFJjHDkewj+fJxtcCZnSExobYAtVTH2dQng4YAVgJ5GaBByW6GlqrtixgDocV+nEeV9XgasrWdd+m19cNw73stmyjTl7Ehd50BHe2H1d0ZjWLYoKWndlm1KYNnHOmN0AVbNzWA+1p2fVDu2adVumkaJv2Pbjq3pr+pOY2tnhPedkOefdt5i8TmP-cDmWDoAZgVm4VZ3dPffNrPa91thG7D6nOjhhGo7QU2M474vrZ7pvC4nhuy-LmZK6d+vq87+O68sthMCbmmh+jsfY67n1t77mGB5HtWD5r9f7b+k+7Zn7Og4OzB54XqYl+2TBV+LtrFSEqG1smotT-lJLQbssKXiLk-GWucbZvwXhPOBFMBDYAAJAYLQTlGBt8bT11QZgrBMgkEnS3gxfQ2Bf4aH-loUmW1dBAA')">const diamond_start_1 = make_vect(0.5, 0.0);
const diamond_end_1 = make_vect(1.0, 0.5);
const diamond_segment_1 = make_segment(diamond_start_1, 
                                       diamond_end_1);
const diamond_start_2 = make_vect(1.0, 0.5);
const diamond_end_2 = make_vect(0.5, 1.0);
const diamond_segment_2 = make_segment(diamond_start_2, 
                                       diamond_end_2);
const diamond_start_3 = make_vect(0.5, 1.0);
const diamond_end_3 = make_vect(0.0, 0.5);
const diamond_segment_3 = make_segment(diamond_start_3, 
                                       diamond_end_3);
const diamond_start_4 = make_vect(0.0, 0.5);
const diamond_end_4 = make_vect(0.5, 0.0);
const diamond_segment_4 = make_segment(diamond_start_4, 
                                       diamond_end_4);
const diamond_painter = segments_to_painter(
                              list(diamond_segment_1, 
                                   diamond_segment_2,
				   diamond_segment_3,
				   diamond_segment_4));
</pre></div></div>
	  
        </LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
      <div class='permalink'>
        <a name='h5' class='permalink'></a><h2>
    
    Transforming and combining painters
  </h2></div>

  

  <div class='permalink'>
<a name='p22' class='permalink'></a><p>
    An operation on painters (such as
    
      
      <kbd>flip_vert</kbd>
    
    or <kbd>beside</kbd>)
    works by creating a painter that invokes the original painters with respect
    to frames derived from the argument frame. Thus, for example,
    
      
      <kbd>flip_vert</kbd>
    
    doesn't have to know how a painter works in order to flip
    it—it just has to know how to turn a frame upside down: The flipped
    painter just uses the original painter, but in the inverted frame.
  </p></div>

  <div class='permalink'>
<a name='p23' class='permalink'></a><p>
    Painter operations are based on the
    
      
      function
    
    
      
      <kbd>transform_painter</kbd>,
      
    
    which takes as arguments a painter and information on how to transform a
    frame and produces a new painter.  The transformed painter, when called on
    a frame, transforms the frame and calls the original painter on the
    transformed frame. The arguments to
    
      
      <kbd>transform_painter</kbd>
      
    
    are points (represented as vectors) that specify the corners of the new
    frame: When mapped into the frame, the first point specifies the new
    frame's origin and the other two specify the ends of its edge vectors.
    Thus, arguments within the unit square specify a frame contained within the
    original frame.
    <div class='snippet' id='javascript_35_27_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKxLYxRYSrlRFib90jkMh6jYFgiF8NMawDUB1E0ewgIYECwIgqCi0KCIzWQrMfz-CDYmgodUm8Px7FjYsIjQ79f3-QjB1rWh0goLIOHfEBQAAIl8GUAHdVSVKdjVVFhONAbwFBKCg6AIDIGDIDVsA4tFhDguRVUoIhBLIbxQC7ORfFVeSWGKV08CUsAdJYEpgLIKdIOtByqDwNJdJNIgWA-CIeIYXi2Hc+UOCQlCcXAyCiMM4pVDk4QeE4gKbJwgSpzITjVlcSLooYWKguwkD0tkTKYrihK0OS+S0v0DLTSynKwvQ1s4yw2iCOKNgejYeCAJYLQ8Lo-zTTIIjGNADsx0nZcZjwYYfBITweD6gjxv+B9ph8vyAv7Nh9J7Bg+0XSbVpmBbbJo-CAIWlqANPVkjrZDttqobs2F7E9Dru1weGoxaLp+oabpW1a-oGs130sIgzVdAgyAC4Ks32Mc2muKoozQKNozR1Zwchqhodh6iEdHJGtx4fY0YxmN9GxuzcZhkSzv6wniYZgiFTx+m8vh26PshWn8cgthC2wamobpjy4bYFBEa-KoyfR0BUcp4WaBx9nxeoqWiZlzo5YLTGqZVmm1fYYHNeZv62bFk3TpQbmeYBPn6Y1rHDdF2HObYABmaXJVl8nQDll2IaNq36q9n3kc6RW9aVkXHfF4Hva1yULfj62cK9u37deNOw89oPVdDj3MAjkno4D-XleDt2nYFkvk8j3hy8VguQ-dq6s3r82O8t93TswLPs+mXPqMwVua-FrqFLkRG-rajqp56nh3vPTNe45jvBcHofc9NgRsAASCPg-ZF3zfPf34+T5kM-zs7099CryHiAoLNZ1Lm5m8rkWX6zG1BY-n7eWLcDbV1-uBe0ktAFR39oHUBz8iCv3nB-F84DZzbyOuA-+hwV4HiwZAlsXlaB4BNKoGwIEeCL0aAaGCRoyAyghtNOQdBOoaG6loKhGDXjaybrAzGQhQAcQ8rxV06lLS4NkDwuwusK4xgEUIlgIi0JmWtPafYEiZBSJ4F-GMeRBFgGEY5XwKinyNUokxBhxQmEsKoZQth08hDoI0ZCKIHkDhCFcT1fUZwRpjQnION4Is6CIwejtF6e0TxVRca7YRbB35awVGI1UBVAQjVsV+F8zi2SxPQYDe2qIMRVDoDwTxBw7xDxmDkpJRByk8wKTcYppSThcIqVU5UySH7vQMPkJ+dkSEUFUKoDUcTjasI0j1Mch1+lkK4BQ3OVDVj4FIUM7Y8z7FL3AYuXQQA')">function transform_painter(painter, origin,
                           corner1, corner2) {
    return frame => {
             const m = frame_coord_map(frame);
             const new_origin = m(origin);
             return painter(make_frame(
                              new_origin, 
                              sub_vect(m(corner1), 
                                       new_origin), 
                              sub_vect(m(corner2), 
                                       new_origin)));
           };
}
</pre></div></div>
    Here's how to flip painter images vertically:
    <div class='snippet' id='javascript_35_28_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8g-CIROKFglTlCD7DYM0GDkMh6jYFgiF8NMawDASNC0DgPPSbzfP8wKi0KCJPO8jznNc2IgqHVJvD8exY2LCJYpSlz-PSwd+PSCgsg4d8QFAAAiXwZSY1UlSnY1VRYOrQG8BQSgoOgCAyBgQN8bBarRYQBK4iCWrSbxQHI3xVWGlhildPAxrAMh5qSwiGAC60DqoPA5pYdrEPs2hGoYFiTUQ9zdpigKMqW4pVCG4QeDqu6zt22bhrq3jZFe96GE+iLdqBmQQY+r6fsOpaiFagGodAGGwfc2L3zjRLUpK4o2B6QCNAg0CeCc4qILYTMMv4rCJ3+Nk-2sHwSE8cm8Yg7DGdMtGmupjr+zIqhuzYXsTzE3mZHJqKswptKOcpshTxMqXXlIxaxaoiW1YBHhCvlkrFbSt9VfvQ2qZpuz6MIqgCDIH7Iq8rN9nYyUqijNAo2jL3Vht117cdwrXdHNpriqfYvZ9mN9H9u2HY6oq0rYEOw-YC3zUDxPdpTs3dameOg4ClO-ZoBjC+z2W2BQN3w86SPvdAT2Y+wOOs8Qvzi5r0ORIjqPQAb0uCIDhOO4z6va-TznM9H9Oq5QPP89kCuO8Kls29np3koAZknm4G4LX3Y7L232-YQrd5793Ombw+W43x3x8vtOk6Nle5+dtht8XpeR6L7Zt5D3LmfLeWZMB7w9v3Qex9h7v07tscBV8668Fvk3I+rcT5-2ztPNgiCX4ZwVCAnOmAf5LzgYVTAQDT6b0EqBYiGcCZE1oVoSW55MyEM3uPbErC1JwPHgvbAABIYRgjl5EJwd-IRIixGcJwZQ1YGDh7EAoFmNiSCtw8FQc3KhoBlFZhtCnCB9d+7aJgQxPRfl7QT3UTcVB0DFHmKICo+ce8XwWJgjzKWFiDGHB4fubxViWyXRIiaVQNhvI8GYbTEKX59q-n-MTYCZNmGkJmL3G+UDfZCFALVZiroLJED8TIdJvAD4DyyTIXJLAmII3Wtae0+wikv0gY3bReQclgDybFOpT5Wz+zwKE1QGpWIgOYWOMSAyKBhK4BEuBUT9D4EGcMuZJMhIWJokAA')">function flip_vert(painter) {
    return transform_painter(painter, 
                make_vect(0.0, 1.0),  // new origin
                make_vect(1.0, 1.0),  // new end of edge1
                make_vect(0.0, 0.0)); // new end of edge2
}
</pre></div></div>
    
  </p></div>
  <div class='permalink'>
<a name='p24' class='permalink'></a><p>
    Using
    
      
      <kbd>transform_painter</kbd>,
      
    
    we can easily define new transformations. For example, we can define a
    painter that shrinks its image to the upper-right quarter of the frame it
    is given:
    <div class='snippet' id='javascript_35_29_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8g-CIROKFglTlCD7DYM0GDkMh6jYFgiF8NMawDASNC0DgPPSbzfP8wKi0KCJPO8jznNc2IgqHVJvD8exY2LCJYpSlz-PSwd+PSCgsg4d8QFAAAiXwZSY1UlSnY1VRYOrQG8BQSgoOgCAyBgQN8bBarRYQBK4iCWrSbxQHI3xVWGlhildPAxrAMh5qSwiGAC60DqoPA5pYdrEPs2hGoYFiTUQ9zdpigKMqW4pVCG4QeDqu6zt22bhrq3jZFe96GE+iLdqBmQQY+r6fsOpaiFagGodAGGwfc2L3zjRLUpK4o2B6QCNAg0CeCc4qILYTMMv4rCJ3+Nk-2sHwSE8cm8Yg7DGdMtGmupjr+zIqhuzYXsTzE3mZHJqKswptKOcpshTxMqXXlIxaxaoiW1YBHhCvlkrFbSt9VfvQ2qZpuz6MIqgCDIH7Iq8rN9nYyUqijNAo2jL3Vht117cdwrXdHNpriqfYvZ9mN9H9u2HY6oq0rYEOw-YC3zUDxPdpTs3dameOg4ClO-ZoBjC+z2W2BQN3w86SPvdAT2Y+wOOs8Qvzi5r0ORIjqPQAb0uCIDhOO4z6va-TznM9H9Oq5QPP89kCuO8Kls29np3koAZknm4G4LX3Y7L232-YQrd5793Ombw+W43x3x8vtOk6Nle5+dtht8XpeR6L7Zt5D3LmfLeWZMB7w9v3Qex9h7v07tscBV8668Fvk3I+rcT5-2ztPNgiCX4ZwVCAnOmAf5LzgYVTAQDT6b0EqBYiGcCZE1oVoSW55MyEM3uPbErC1JwPHgvbAABIYRgjl5EJwd-IRIixGcJwZQ1YGDh7EAoFmNiSCtw8FQc3KhoBlFZhtCnCB9d+7aJgQxPRfl7QT3UTcVB0DFHmKICo+ce8XwWJgjzKWFiDGHB4fubxViWyXRKJ4aaTBCZUDYAQVQqhQIhmVJ4OwzDaYhS-PtX8-5ibATJsw0h95e43zQAAVh9kUrS2kCm8APmgspeTzyVLsJ7EpA9fbvn9sUUJxBwlwOYWOMSHSwkRKiTEuJUlEkcMdsk-Q2ABldNYiA5hPALE0SAA')">function shrink_to_upper_right(painter) {
    return transform_painter(painter, 
                             make_vect(0.5, 0.5), 
                             make_vect(1.0, 0.5), 
                             make_vect(0.5, 1.0));
}
</pre></div></div>
    
  </p></div>
  <div class='permalink'>
<a name='p25' class='permalink'></a><p>
    Other transformations rotate images counterclockwise by 90
    degrees<a class='superscript' id='footnote-link-9' href='#footnote-9'>[9]</a>
    <div class='snippet' id='javascript_35_30_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8g-CIROKFglTlCD7DYM0GDkMh6jYFgiF8NMawDASNC0DgPPSbzfP8wKi0KCJPO8jznNc2IgqHVJvD8exY2LCJYpSlz-PSwd+PSCgsg4d8QFAAAiXwZSY1UlSnY1VRYOrQG8BQSgoOgCAyBgQN8bBarRYQBK4iCWrSbxQHI3xVWGlhildPAxrAMh5qSwiGAC60DqoPA5pYdrEPs2hGoYFiTUQ9zdpigKMqW4pVCG4QeDqu6zt22bhrq3jZFe96GE+iLdqBmQQY+r6fsOpaiFagGodAGGwfc2L3zjRLUpK4o2B6QCNAg0CeCc4qILYTMMv4rCJ3+Nk-2sHwSE8cm8Yg7DGdMtGmupjr+zIqhuzYXsTzE3mZHJqKswptKOcpshTxMqXXlIxaxaoiW1YBHhCvlkrFbSt9VfvQ2qZpuz6MIqgCDIH7Iq8rN9nYyUqijNAo2jL3Vht117cdwrXdHNpriqfYvZ9mN9H9u2HY6oq0rYEOw-YC3zUDxPdpTs3dameOg4ClO-ZoBjC+z2W2BQN3w86SPvdAT2Y+wOOs8Qvzi5r0ORIjqPQAb0uCIDhOO4z6va-TznM9H9Oq5QPP89kCuO8Kls29np3koAZknm4G4LX3Y7L232-YQrd5793Ombw+W43x3x8vtOk6Nle5+dtht8XpeR6L7Zt5D3LmfLeWZMB7w9v3Qex9h7v07tscBV8668Fvk3I+rcT5-2ztPNgiCX4ZwVCAnOmAf5LzgYVTAQDT6b0EqBYiGcCZE1oVoSW55MyEM3uPbErC1JwPHgvbAABIYRgjl5EJwd-IRIixGcJwZQ1YGDh7EAoFmNiSCtw8FQc3KhoBlFZhtCnCB9d+7aJgQxPRfl7QT3UTcVB0DFHmKICo+ce8XwWJgjzKWFiDGHB4fubxViWyXXkFQdIIEACcUYeDMNpiFL8+1fz-mJsBMmzDSH3l7sYxu2j0nnkybwA+A9fa5IPPkuwWjfbvn9nIUJK1thwOYWOMSNSwksEiRwx2MT9DYBaXU1iIDmE8AsTRIAA')">function rotate90(painter) {
    return transform_painter(painter, 
                             make_vect(1.0, 0.0), 
                             make_vect(1.0, 1.0), 
                             make_vect(0.0, 0.0));
}
</pre></div></div>
    
    or squash images towards the center of the frame:<a class='superscript' id='footnote-link-10' href='#footnote-10'>[10]</a>
    <div class='snippet' id='javascript_35_31_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8g-CIROKFglTlCD7DYM0GDkMh6jYFgiF8NMawDASNC0DgPPSbzfP8wKi0KCJPO8jznNc2IgqHVJvD8exY2LCJYpSlz-PSwd+PSCgsg4d8QFAAAiXwZSY1UlSnY1VRYOrQG8BQSgoOgCAyBgQN8bBarRYQBK4iCWrSbxQHI3xVWGlhildPAxrAMh5qSwiGAC60DqoPA5pYdrEPs2hGoYFiTUQ9zdpigKMqW4pVCG4QeDqu6zt22bhrq3jZFe96GE+iLdqBmQQY+r6fsOpaiFagGodAGGwfc2L3zjRLUpK4o2B6QCNAg0CeCc4qILYTMMv4rCJ3+Nk-2sHwSE8cm8Yg7DGdMtGmupjr+zIqhuzYXsTzE3mZHJqKswptKOcpshTxMqXXlIxaxaoiW1YBHhCvlkrFbSt9VfvQ2qZpuz6MIqgCDIH7Iq8rN9nYyUqijNAo2jL3Vht117cdwrXdHNpriqfYvZ9mN9H9u2HY6oq0rYEOw-YC3zUDxPdpTs3dameOg4ClO-ZoBjC+z2W2BQN3w86SPvdAT2Y+wOOs8Qvzi5r0ORIjqPQAb0uCIDhOO4z6va-TznM9H9Oq5QPP89kCuO8Kls29np3koAZknm4G4LX3Y7L232-YQrd5793Ombw+W43x3x8vtOk6Nle5+dtht8XpeR6L7Zt5D3LmfLeWZMB7w9v3Qex9h7v07tscBV8668Fvk3I+rcT5-2ztPNgiCX4ZwVCAnOmAf5LzgYVTAQDT6b0EqBYiGcCZE1oVoSW55MyEM3uPbErC1JwPHgvbAABIYRgjl5EJwd-IRIixGcJwZQ1YGDh7EAoFmNiSCtw8FQc3KhoBlFZhtCnCB9d+7aJgQxPRfl7QT3UTcVB0DFHmKICo+ce8XwWJgjzKWFiDGHB4fubxViWyXRKAARwIAwYong2CqiYl5XwxQeDMNpiFL8+1fz-mJsBMmzDSH3l7jfExvtcnnnySgtAAA2AArD7belStLaVKXYT2tSfZVKsq2f2xQwkRO8NsOBzCxxiS6eEyJ0SiCxIogk-pJNIIKOGT0jUrEQHMJ4BYmiQA')">function squash_inwards(painter) {
    return transform_painter(painter, 
                             make_vect(0.0, 0.0), 
                             make_vect(0.65, 0.35), 
                             make_vect(0.35, 0.65));
}
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p26' class='permalink'></a><p>
    Frame transformation is also the key to
    defining means of combining two or more painters.
    The <kbd>beside</kbd>
    
      
      function,
    
    for example, takes two painters, transforms them to paint in the left and
    right halves of an argument frame respectively, and produces a new,
    compound painter. When the compound painter is given a frame, it calls the
    first transformed painter to paint in the left half of the frame and calls
    the second transformed painter to paint in the right half of the frame:
    <div class='snippet' id='javascript_35_32_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8mwejCOICgszY0c2muKoozQKNo281YHNAJysxtNh9nYyUqn2bzfJjfQAqCtgQpQcKPM6LyfNAKLYvsmgGISrC3JEl8Epg-5TNcBKQsOMT70q+02BbD8IhE4oWCVOUIPsNgzQYOQyHqRKiF8NMawDASNC0DhuvSPqBpYIbY2LCIer67q2o62IRqHVJvD8exFsKCJ5u2Vr2vmzbB349IKCyDh3xAUAACJfBlJjVSVKdjVVFhHtAbwFBKCg6AIDIGBA3xsAetFhAEriIPetJvFAcjfFVMGWGKV08EhsAyCRlbCIYIbrWJqg8ERlgvsQpraBehgWJNRCuoJuaFsHVHilUUHhB4R7GcpgmEbBx7eNkDmuYYHmpoJ0WZHF7nef5knUaID7hdl0B5clrrjvfONlvW87ijYHpAI0CDQJ4U6NrYTMtv4grJxq2Zhh8EhPCtw2IOwsryrphnvv7MiqG7NhexPZ3yqtmas2t87PbOiDTxM8q3lIlGw6oiPU8BHhjrWxO7DjpPk99h9i6zO27ICvhpt6rMwsKiK0ui0B0v83LCNr-PG-crceCygs-LizvBgLm3e5ar3tzr1bsUj+9u6G0KO4IseCYalL+8Htvh5ytel+2ZKm9S3h0qH7Ka-H87N5P9gK-4WesxQFOc7H-OWyvwTQOIivjdN7+WgF4rkzI-CuoVX5v3XtPBqVlcC10ATwfKPpVg01AGiDGFBfDykAdiQBaFXABU5iaLMqgqDAS3jcLyABWGKGsAqCVtjmQibkvxE1-P+M2wFLa4MgbJESnlW7tz4eXLmzlALkIgiI+8AiW4ZSynAwho9GFSU8CwtI34OFyAAog-B0jzzEPEWQ4C+iDyyN4DvYRZdtLmLsDQi+ij0ypEdoOQEjCKh4DsDRYBKjlRqJPNZN4tlWwYOKFg+UCDzaQSEJE7huQkFEHETRIAA')">function beside(painter1, painter2) {
    const split_point = make_vect(0.5, 0.0);
    const paint_left = transform_painter(painter1, 
                            make_vect(0.0, 0.0), 
                            split_point, 
                            make_vect(0.0, 1.0));
    const paint_right = transform_painter(painter2, 
                            split_point, 
                            make_vect(1.0, 0.0), 
                            make_vect(0.5, 1.0));
    return frame => {
               paint_left(frame);
               paint_right(frame);
           };
}
</pre></div></div>

    
  </p></div>

  <div class='permalink'>
<a name='p27' class='permalink'></a><p>
    Observe how the painter data abstraction, and in particular the
    representation of painters as
    
      
      functions,
    
    makes
    <kbd>beside</kbd> easy to implement.  The
    <kbd>beside</kbd>
    
      
      function
    
    need not know anything about the details of the component painters other
    than that each painter will draw something in its designated frame.
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.50" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.50">Exercise 2.50 </a></b> 
  
    Define the transformation
    
    
      
      <kbd>flip_horiz</kbd>,
    
    which flips painters horizontally, and transformations that rotate painters
    counterclockwise by 180 degrees and 270 degrees.
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_7_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_7_div"><SOLUTION>
    
      <OL type="a">
	<LI>
	  The transformation 
          
	    
	    <kbd>flip_horiz</kbd>:
	    
	  
          <div class='snippet' id='javascript_35_33_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8mwejCOICgszY0c2muKoozQKNo281YHNAJysxtNh9nYyUqn2bzfJjfQAqCtgQpQcKPM6LyfNAKLYvsmgGISrC3JEl8Epg-5TNcBKQsOMT70q+02BbD8IhE4oWCVOUIPsNgzQYOQyHqRKiF8NMawDASNC0DhuvSPqBpYIbY2LCIer67q2o62IRqHVJvD8exFsKCJ5u2Vr2vmzbB349IKCyDh3xAUAACJfBlJjVSVKdjVVFhHtAbwFBKCg6AIDIGBA3xsAetFhAEriIPetJvFAcjfFVMGWGKV08EhsAyCRlbCIYIbrWJqg8ERlgvsQpraBehgWJNRCuoJuaFsHVHilUUHhB4R7GcpgmEbBx7eNkDmuYYHmpoJ0WZHF7nef5knUaID7hdl0B5clrrjvfONlvW87ijYHpAI0CDQJ4U6NrYTMtv4grJxq2Zhh8EhPCtw2IOwsryrphnvv7MiqG7NhexPZ3yqtmas2t87PbOiDTxM8q3lIlGw6oiPU8BHhjrWxO7DjpPk99h9i6zO27ICvhpt6rMwsKiK0ui0B0v83LCNr-PG-crceCygs-LizvBgLm3e5ar3tzr1bsUj+9u6G0KO4IseCYalL+8Htvh5ytel+2ZKm9S3h0qH7Ka-H87N5P9gK-4WesxQFOc7H-OWyvwTQOIivjdN7+WgF4rkzI-CuoVX5v3XtPBqVlcC10ATwfKPpVg0xIiaVQbBPCKgAF48EAfbMaX4ia-n-GbYCltAGQLeCJSKrd25CFAA9ZiroLJEGAbQluGUGEyGYSwJiyssbWntPsDhzdeA7yylZJhYAWHHSEU+VseAMFYNwY-AhSCiDOXnHkIAA')">function flip_horiz(painter) {
    return transform_painter(painter, 
               make_vect(1.0, 0.0),  // new origin
               make_vect(0.0, 0.0),  // new end of edge1
               make_vect(1.0, 1.0)); // new end of edge2
}
</pre></div></div>
          
	</LI>
	<LI>
	  The transformation 
          
	    
	    <kbd>rotate180</kbd>:
	    
	  
          <div class='snippet' id='javascript_35_34_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8mwejCOICgszY0c2muKoozQKNo281YHNAJysxtNh9nYyUqn2bzfJjfQAqCtgQpQcKPM6LyfNAKLYvsmgGISrC3JEl8Epg-5TNcBKQsOMT70q+02BbD8IhE4oWCVOUIPsNgzQYOQyHqRKiF8NMawDASNC0DhuvSPqBpYIbY2LCIer67q2o62IRqHVJvD8exFsKCJ5u2Vr2vmzbB349IKCyDh3xAUAACJfBlJjVSVKdjVVFhHtAbwFBKCg6AIDIGBA3xsAetFhAEriIPetJvFAcjfFVMGWGKV08EhsAyCRlbCIYIbrWJqg8ERlgvsQpraBehgWJNRCuoJuaFsHVHilUUHhB4R7GcpgmEbBx7eNkDmuYYHmpoJ0WZHF7nef5knUaID7hdl0B5clrrjvfONlvW87ijYHpAI0CDQJ4U6NrYTMtv4grJxq2Zhh8EhPCtw2IOwsryrphnvv7MiqG7NhexPZ3yqtmas2t87PbOiDTxM8q3lIlGw6oiPU8BHhjrWxO7DjpPk99h9i6zO27ICvhpt6rMwsKiK0ui0B0v83LCNr-PG-crceCygs-LizvBgLm3e5ar3tzr1bsUj+9u6G0KO4IseCYalL+8Htvh5ytel+2ZKm9S3h0qH7Ka-H87N5P9gK-4WesxQFOc7H-OWyvwTQOIivjdN7+WgF4rkzI-CuoVX5v3XtPBqVlcC10ATwfKPpVg03kFQdIIF9gAA4ow8EAfbMaX4ia-n-GbYCltgGAMgW8ESkVW5ZT+KAB6zFXQWSIMAuhLcMqMKEMwsArDjpY2tPafYnDm68B3u3PI-DGIsCYsrYRT5WxyAwejHBeCEHm0gqIJBRBnLzjyEAA')">function rotate180(painter) {
    return transform_painter(
               painter, 
               make_vect(1.0, 1.0),  // new origin
               make_vect(0.0, 1.0),  // new end of edge1
               make_vect(1.0, 0.0)); // new end of edge2
}
</pre></div></div>
          
	</LI>
	<LI>
	  The transformation 
          
	    
	    <kbd>rotate270</kbd>:
	    
	  
          <div class='snippet' id='javascript_35_35_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8mwejCOICgszY0c2muKoozQKNo281YHNAJysxtNh9nYyUqn2bzfJjfQAqCtgQpQcKPM6LyfNAKLYvsmgGISrC3JEl8Epg-5TNcBKQsOMT70q+02BbD8IhE4oWCVOUIPsNgzQYOQyHqRKiF8NMawDASNC0DhuvSPqBpYIbY2LCIer67q2o62IRqHVJvD8exFsKCJ5u2Vr2vmzbB349IKCyDh3xAUAACJfBlJjVSVKdjVVFhHtAbwFBKCg6AIDIGBA3xsAetFhAEriIPetJvFAcjfFVMGWGKV08EhsAyCRlbCIYIbrWJqg8ERlgvsQpraBehgWJNRCuoJuaFsHVHilUUHhB4R7GcpgmEbBx7eNkDmuYYHmpoJ0WZHF7nef5knUaID7hdl0B5clrrjvfONlvW87ijYHpAI0CDQJ4U6NrYTMtv4grJxq2Zhh8EhPCtw2IOwsryrphnvv7MiqG7NhexPZ3yqtmas2t87PbOiDTxM8q3lIlGw6oiPU8BHhjrWxO7DjpPk99h9i6zO27ICvhpt6rMwsKiK0ui0B0v83LCNr-PG-crceCygs-LizvBgLm3e5ar3tzr1bsUj+9u6G0KO4IseCYalL+8Htvh5ytel+2ZKm9S3h0qH7Ka-H87N5P9gK-4WesxQFOc7H-OWyvwTQOIivjdN7+WgF4rkzI-CuoVX5v3XtPBqVlcC10ATwfKPpVg03kFQdIIEUAAHYow8EAfbMaX4ia-n-GbYCltgGAMgW8ESnlW5ZT+KAB6zFXQWSIMAuhLcMrtyEMwsArDjpY2tPafYnDm68B3u3PI-DGIsCYsrYRT5WxyAwejHBeCEHm0gqIJBRBnLzjyEAA')">function rotate270(painter) {
    return transform_painter(
               painter, 
               make_vect(0.0, 1.0),  // new origin
               make_vect(0.0, 0.0),  // new end of edge1
               make_vect(1.0, 0.0)); // new end of edge2
}
</pre></div></div>
          
	</LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_2.51" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.51">Exercise 2.51 </a></b> 
  
    Define the
    
    <kbd>below</kbd> operation for painters.
    
      
      The function <kbd>below</kbd>
      
    
    takes two painters as arguments. The resulting painter, given a frame, 
	draws with the first painter in the bottom of the frame and with the
	second painter in the top.
    Define <kbd>below</kbd> in two different
    ways—first by writing a
    
      
      function
    
    that is analogous to the
    <kbd>beside</kbd>
    
      
      function
    
    given above, and again in terms of <kbd>beside</kbd> and
    suitable rotation operations (from exercise&nbsp;<REF NAME="ex:rotate"><a class="superscript" id="2.2.4-ex-link-2.50" href="./2.2.4.html#ex_2.50">2.50</a></REF>).
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_8_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_8_div"><SOLUTION>
    
      <OL type="a">
	<LI>
	  First the direct method:
          <div class='snippet' id='javascript_35_36_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBbAQwGsBTAfQDcXyAKADwA0oAJ4BKUAG9soGaABOLMgTm0ADgwpz+QsQG5sAX3zFy1WnxJU5nbmR5dyV8VNnzFy2gAsWDACb3bJ30jQlJKGhFLawc7GKdJaVkFJRVQMg0AGwDHOVFg4zCzUABnEgYM9hiePAYcoTjchNdkj3pmSttq2rIrUAAqUAsrG14G0SFE1ynp1xqc-sjhqrG8wwLTCL9fEdjAuQBGer2UZ0m3FNpGVh3+KJuG-fFQM5nXmQBqQbvl4-Hnt4BMmE306DyeL0BU0+wKWoN+qxCJnCtGKBAARvc9odQA0Tk0ku5UlcOrwhtE4TlHjIIZDZABaL6w0a-Ca014w8nMyngtkzBkczE5E4I3ChDaXdpsPByBh0Fg8KwUADmFCIQhYviVLGxGq1eJcBIuoAyFGKdkVKrVoF12vVmpYJ3yYuRoAtqqlMrl1U9LFOzUJtBNZrYCjw3tlLCEAAYRc6ijb9h6I+G5X7Da0g2QQyww9KI0JHk6kfH7Sgk1686n8TIWqlM9ncz6hI61usXZX2JYrNtGKoU77q+dWhxQABeAB8oC2NzdRHL8o7fxpvNk06qpXKJLsZPuS5X+8hCfn-dEe4PvI3FRuAuWZ-P99cNrLHZPp5FbaKZBlRGKeCsdDYdRVTIFgtCAogQLkIRZwEZdzyiIhQOxBDQP1M5a1oDsx0nA1AUsH8yHoMdQA7NguzkHsGD7Rd9FpfCzVARCAHc2FnYi6AVORlVVVZaQw0BwMgnhiWPOCH2Y1iuMtVkH1eVEMSqDiUIOO9ZLZCTZ1UtTZHkm4lKsRC5BOGTtNpDSpJ409aIBAx8mwejCOICgszY0c2muKoozQKNo281YHNAJysxtNh9nYyUqn2bzfJjfQAqCtgQpQcKPM6LyfNAKLYvsmgGISrC3JEl8Epg-5TNcBKQsOMT70q+02BbD8IhE4oWCVOUIPsNgzQYOQyHqRKiF8NMawDASNC0DhuvSPqBpYIbY2LCIer67q2o62IRqHVJvD8exFsKCJ5u2Vr2vmzbB349IKCyDh3xAUAACJfBlJjVSVKdjVVFhHtAbwFBKCg6AIDIGBA3xsAetFhAEriIPetJvFAcjfFVMGWGKV08EhsAyCRlbCIYIbrWJqg8ERlgvsQpraBehgWJNRCuoJuaFsHVHilUUHhB4R7GcpgmEbBx7eNkDmuYYHmpoJ0WZHF7nef5knUaID7hdl0B5clrrjvfONlvW87ijYHpAI0CDQJ4U6NrYTMtv4grJxq2Zhh8EhPCtw2IOwsryrphnvv7MiqG7NhexPZ3yqtmas2t87PbOiDTxM8q3lIlGw6oiPU8BHhjrWxO7DjpPk99h9i6zO27ICvhpt6rMwsKiK0ui0B0v83LCNr-PG-crceCygs-LizvBgLm3e5ar3tzr1bsUj+9u6G0KO4IseCYalL+8Htvh5ytel+2ZKm9S3h0qH7Ka-H87N5P9gK-4WesxQFOc7H-OWyvwTQOIivjdN7+WgF4rkzI-CuoVX5v3XtPBqVlcC10ATwfKPpVg01AGiFgGQqBMR4IA7EgC0KuACpzE0WZVBUGAlvG459d4AFYNYBUEmwAgqhVA-1HMuL8RNfz-jNsBS2eDIH3hIc5QCFCIJCPPCJSKrcvL0MkQeaRLcMpZTgUQ0eTCsFMXYZw78PC5AAUQQQhR+4lFn1kX5ExK4zF2B3u3KxF4uaiPIcBDWDsfQ+1wpCJhLC2FaBosAzR2DLYBMBLZVsGCtGP0AUIBB5tIKiCQUQURNEgA')">function below(painter1, painter2) {
    const split_point = make_vect(0.0, 0.5);
    const paint_upper =
        transform_painter(painter1, 
                          split_point, 
                          make_vect(1.0, 0.5), 
                          make_vect(0.0, 1.0));
    const paint_lower =
        transform_painter(painter2, 
                          make_vect(0.0, 0.0), 
                          make_vect(1.0, 0.0), 
                          split_point);
    return frame => {
               paint_upper(frame);
               paint_lower(frame);
           };
}
</pre></div></div>
          
	</LI>
	<LI>
	  Now the version with rotation and
	  <kbd>beside</kbd>:
          <div class='snippet' id='javascript_35_37_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQAjAUwGcKATBgCgAcBDCosgwBOARgA0oXv0FCUASlABvbKFWgSNJmVBMuAGwpkA+lyrTQAXlABbHgGsGRgG4NyHAAxoArBM-u5ANwqahpEWpJ8AkZ6DHjaVmRCPGF4VELWJpEy3FnC4qDBakXFJaU29o4ubn6+aP4ShWVNZboGxqbSDc3dpbYOzq5kHnUSInVygY2h4VJRQhQA5gAW8aCJyUyp6ZnSwjm7sl09x6qthiZmAkcnPX2Vgxxj7rX1BTfHdwPV3qPjk0VCBhkAhCWh4JLWBiWAB8Ska3VmxhicQ44J4kP+J0RRnmyyGaIxQW6AF8gsTcIRSJQaKAhFQyDxBABOdz7ATCBTKAFAkG0dYpNIZRF7YVCa7vZqfKpDJ4vOTiiVlKUPWWgJ7yt6KyUVL5DGqgPwTMkU4jkai0OkMwQoADsrNFnMagOBoLWSQF21FHHhzVFCu1-Wlw2eavGElAIFARAYAHdQGlFvwfU1ld8Q4bw5Ho3GGERWPG8KAGKwFgwRMmlTqg6rDYEI2Bs0W8wWiyWGChsOT8KbqbRGHoqDG2TJ8qL5HDuS6LfTGe27RxGCx2BxLbOWcO8vKK1raTPmfbcrIJpMu-3BxwAB47dli0BXh0cYjnAkMQJAA')">function below(painter1, painter2) {
    return rotate270(beside(rotate90(painter1),
                            rotate90(painter2)));
}
</pre></div></div>
	</LI>
      </OL>
    </SOLUTION></div></div>
</EXERCISE></div>


  
      <div class='permalink'>
        <a name='h6' class='permalink'></a><h2>
    
    Levels of language for robust design
  </h2></div>

  <div class='permalink'>
<a name='p28' class='permalink'></a><p>
    The picture language exercises some of the critical ideas we've
    introduced about abstraction with
    
      
      functions
    
    and data.  The fundamental data abstractions, painters, are implemented
    using
    
      
      
        functional
      
    
    representations, which enables the language to handle different basic
    drawing capabilities in a uniform way.  The means of combination satisfy
    the closure property, which permits us to easily build up complex designs.
    Finally, all the tools for abstracting
    
      
      functions
    
    are available to us for abstracting means of combination for painters.
  </p></div>

  <div class='permalink'>
<a name='p29' class='permalink'></a><p>
    We have also obtained a glimpse of another crucial idea about languages and
    program design.  This is the approach of
    
    
    <EM>stratified design</EM>, the notion that a complex system should be
    structured as a sequence of levels that are described using a sequence of
    languages. Each level is constructed by combining parts that are regarded
    as primitive at that level, and the parts constructed at each level are
    used as primitives at the next level.  The language used at each level
    of a stratified design has primitives, means of combination, and means
    of abstraction appropriate to that level of detail.
  </p></div>

  <div class='permalink'>
<a name='p30' class='permalink'></a><p>
    Stratified design pervades the engineering of complex systems.  For
    example, in computer engineering, resistors and transistors are
    combined (and described using a language of analog circuits) to
    produce parts such as and-gates and or-gates, which form the
    primitives of a language for digital-circuit design.<a class='superscript' id='footnote-link-11' href='#footnote-11'>[11]</a> These parts are combined to build
    processors, bus structures, and memory systems, which are in turn
    combined to form computers, using languages appropriate to computer
    architecture.  Computers are combined to form distributed systems,
    using languages appropriate for describing network interconnections,
    and so on.
  </p></div>

  <div class='permalink'>
<a name='p31' class='permalink'></a><p>
    As a tiny example of stratification, our picture language uses primitive
    elements (primitive painters) that specify points and lines to provide the
    shapes of a painter like <kbd>rogers</kbd>. The bulk of
    our description of the picture language focused on combining these
    primitives, using geometric combiners such as
    <kbd>beside</kbd> and <kbd>below</kbd>.
    We also worked at a higher level, regarding
    <kbd>beside</kbd> and <kbd>below</kbd>
    as primitives to be manipulated in a language whose operations, such as
    
      
      <kbd>square_of_four</kbd>,
      
    
    capture common patterns of combining geometric combiners.
  </p></div>

  <div class='permalink'>
<a name='p32' class='permalink'></a><p>
    
    Stratified design helps make programs <EM>robust</EM>, that is, it makes
    it likely that small changes in a specification will require
    correspondingly small changes in the program.  For instance, suppose we
    wanted to change the image based on <kbd>wave</kbd>
    shown in figure&nbsp;<REF NAME="fig:sqlimit-designs"><a class="superscript" id="2.2.4-fig-link-2.9" href="./2.2.4.html#fig_2.9">2.9</a></REF>.  We could work
    at the lowest level to change the detailed appearance of the
    <kbd>wave</kbd> element; we could work at the middle
    level to change the way
    
      
      <kbd>corner_split</kbd>
    
    replicates the <kbd>wave</kbd>; we could work at the
    highest level to change how
    
      
      <kbd>square_limit</kbd>
      
    
    arranges the four copies of the corner. In general, each level of a
    stratified design provides a different vocabulary for expressing the
    characteristics of the system, and a different kind of ability to change it.
  </p></div>

  
    <div class="permalink">
    <a name="ex_2.52" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_2.52">Exercise 2.52 </a></b> 
  
    Make changes to the square limit of <kbd>wave</kbd>
    shown in figure&nbsp;<REF NAME="fig:sqlimit-designs"><a class="superscript" id="2.2.4-fig-link-2.9" href="./2.2.4.html#fig_2.9">2.9</a></REF> by working at
    each of the levels described above.  In particular:
    <OL type="a">
      
      <LI>
        Change the pattern constructed by
	
	  
	  <kbd>corner_split</kbd>
	  
	
        (for example, by using only one copy of the
        
	  
	  <kbd>up_split</kbd>
	  
	
	and
	
	  
	  <kbd>right_split</kbd>
	  
	
	images instead of two).
      </LI>
      <LI>
        Modify the version of
	
	  
	  <kbd>square_limit</kbd>
	  
	
	that uses
        
	  
	  <kbd>square_of_four</kbd>
	  
	
        so as to assemble the corners in a different pattern.
	
      </LI>
    </OL>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#solution_35_9_div" data-toggle="collapse">Solution</button></div>
      <div class="solution_content collapse" id="solution_35_9_div"><SOLUTION>
    
      <div class='snippet' id='javascript_35_38_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnARwIEMAnAUwH0q9O8qCrABRkANgBpQZVpIBGE0LNYBKUAG9soLaA5lBtAA7MKRMu1agAvAD56ZZiQDWQ2ezoUAJuxGihRk2YqktJ+xqbmysrimtqxcfEJWq7uXi6+-uFBisIZgZHKANzYAL64hKSUNKCe7KYUZACeQgAeqhqxuvqgzUWl+MTk1LSsFADmABZknHQGovWhAeaSRG0xWhR4oEK0lrugAAyriZ2shmGBRbHFoOyidOzqa3EkNHRk9AC2zKKi5lY6Y0m01m81yS1AtAAtKAAIyFJ4ddh6U6KNw1BaZSRvBzOOhfH7gvHfX4qeFXEplAaVWgEAzAuZkDGBZZHbQbLY7PaHR7HJFdMGsS7aa63e48hIvIhvT7Ev6WUC0+mg87gqGwskJE60bFOFxo1JEgkyGVGqKgAUarSlPrlQZVF6ncxKxkClni9abbZWLmsuJa80qwVPEV3B7teKS6W0-6KmYMpmq0DQuFC56vd4jCbveWZoFx5WLY1qlMIrSR95kKh0354bOolLeWmSWmW2LlxRUMiVj6cXN1nXOPuSPut7Tth1EOWgCdO-MuwPLJPq1OI5Ha+y65LoyvV9i1yQzoKlxLxLepV0drtUHsj1vWykVIb0JhsLhzD4FzEQ33T9O-j6yCY7CYP8jAsBw3C8PwghCHgcx0uMVAjAAXpINR1I0kjHieOE4WunC0g2nAeFQADuRCSHBFB0gAbuYZCtv6LwAUBmBCIezoJkWkS9LgICgNAcxOKA4zmA8lbmqIzANKApH1OMoDMEQMnMLIbysA41LYPxBD3B4oD8BYYGvpw771LgdCIaRQjGRBZmMqJbBkJImA8UAA')">// Click here to play with any abstraction
// used for square_limit
</pre></div></div>
    </SOLUTION></div></div>
</EXERCISE></div>

  
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    The picture
    language is based on the language
    
    Peter Henderson created to construct images like
    
    M.C. Escher's <QUOTE>Square Limit</QUOTE> woodcut (see
    <CITATION>Henderson 1982</CITATION>). The woodcut incorporates a repeated
    scaled pattern, similar to the arrangements drawn using the
    
      
      <kbd>square_limit</kbd>
    
    
      
      function
    
    in this section.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    
    
    
    <p>
      William Barton Rogers (1804–1882) was the founder and first
      president of MIT.  A geologist and talented teacher, he taught at
      William and Mary College and at the University of Virginia.  In 1859
      he moved to Boston, where he had more time for research, worked on a
      plan for establishing a <QUOTE>polytechnic institute,</QUOTE> and
      served as Massachusetts's first State Inspector of Gas Meters.
    </p>
    <p>
      When MIT was established in 1861, Rogers was elected its first
      president. Rogers espoused an ideal of <QUOTE>useful learning</QUOTE>
      that was different from the university education of the time, with its
      overemphasis on the classics, which, as he wrote, <QUOTE>stand in the
      way of the broader, higher and more practical instruction and
      discipline of the natural and social sciences.</QUOTE>  This
      education was likewise to be different from narrow trade-school
      education.  In Rogers's words:
      <blockquote class='blockquote'>
        The world-enforced distinction between the practical and the
        scientific worker is utterly futile, and the whole experience of
        modern times has demonstrated its utter worthlessness.
      </blockquote>

    </p>
    <p>
      Rogers served as president of MIT until 1870, when he resigned due to
      ill health.  In 1878 the second president of MIT,
      
      John Runkle, resigned under the pressure of a financial crisis
      brought on by the Panic of 1873 and strain of fighting off attempts
      by Harvard to take over MIT.  Rogers returned to hold the office of
      president until 1881.
    </p>
    <p>
      Rogers collapsed and died while addressing MIT's graduating
      class at the commencement exercises of 1882.  Runkle quoted
      Rogers's last words in a memorial address delivered that same
      year:
      <blockquote class='blockquote'>
        <QUOTE>As I stand here today and see what the Institute is, …&nbsp;I call
        to mind the beginnings of science.  I remember one hundred and fifty
        years ago Stephen Hales published a pamphlet on the subject of
        illuminating gas, in which he stated that his researches had
        demonstrated that 128 grains of bituminous coal—</QUOTE>
        <p>
          
          <QUOTE>Bituminous coal,</QUOTE> these were his last words on
	  earth.  Here he bent forward, as if consulting some notes on the
	  table before him, then slowly regaining an erect position, threw
	  up his hands, and was translated from the scene of his earthly
	  labors and triumphs to <QUOTE>the tomorrow of death,</QUOTE>
	  where the mysteries of life are solved, and the disembodied
	  spirit finds unending satisfaction in contemplating the new and
	  still unfathomable mysteries of the infinite future.
        </p>
      </blockquote>

    </p>
    <p>
      In the words of  Francis A. Walker
      
      (MIT's third president):
      <blockquote class='blockquote'>
        All his life he had borne himself most faithfully and heroically,
	and he died as so good a knight would surely have wished, in
	harness, at his post, and in the very part and act of public duty.
      </blockquote>

    </p>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    
    In <kbd>square_of_four</kbd>, we make use of an
    extension of the syntax of lambda expressions, compared
    to section&nbsp;<REF NAME="sec:lambda"><a class="superscript" id="2.2.4-sec-link-1.3.2" href="./1.3.2.html">1.3.2</a></REF>: The body of a lambda
    expression can be a block, not just a single return expression. Such
    lambda expressions have the following shape:
    
      \[ \texttt{(} \ \textit{parameters}\ \texttt{) => \{}\ \textit{statements}\ \texttt{\}} \]
    
    
    
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4'>[4] </a>
    <FOOTNOTE>
    Equivalently, we could
    write
    <div class='snippet' id='javascript_35_39_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=2&ext=RUNES&prgrm=PTAEGUEkGEAVQFLlAJgHToCwChsDMBXAOwGMAXASwHsjQBnARwIEMAnAUwH0q9O8qCrABRkANgBpQZVpIBGE0LNYBKUAG9soLaA5lBtAA7MKRMu1agAvAD56ZZiQDWQ2ezoUAJuxGihRk2YqktJ+xqbmysrimtqxcfEJWq7uXi6+-uFBisIZgZHKANzYAL64hKSUNKCe7KYUZACeQgAeqhqxuvqgzUWl2CQ0dGSgeKIUBgbsHpz+rHRWMVqMLBzcvPyCIvqcBAYpXB5UAO5EkqPjnABu5mSSi4mJ5wacABZUrBQAXpI1dY2FuDobyOQiek2mszoQhe7DYZEiBSAA')">const flipped_pairs =
    square_of_four(identity, flip_vert, identity, flip_vert);
</pre></div></div>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5'>[5] </a>
    <FOOTNOTE>
    
    
      
      
	The function
      <kbd>rotate180</kbd>
    
    rotates a painter by 180 degrees. Instead of
    <kbd>rotate180</kbd>
    we could say
    
      
      
	<kbd>compose(flip_vert, flip_horiz)</kbd>,
    
    using the
    
      
      <kbd>compose</kbd>
    
    
      
      function
    
    from exercise&nbsp;<REF NAME="ex:compose"><a class="superscript" id="2.2.4-ex-link-1.42" href="./1.3.4.html#ex_1.42">1.42</a></REF>.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-6' href='#footnote-link-6'>[6] </a>
    <FOOTNOTE>
    
    
      
      
	The function
	<kbd>frame_coord_map</kbd>
      
    
    uses the vector operations described in
    exercise&nbsp;<REF NAME="ex:vectors"><a class="superscript" id="2.2.4-ex-link-2.46" href="./2.2.4.html#ex_2.46">2.46</a></REF> below, which we assume have been
    implemented using some representation for vectors. Because of data
    abstraction, it doesn't matter what this vector representation is,
    so long as the vector operations behave correctly.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-7' href='#footnote-link-7'>[7] </a>
    <FOOTNOTE>
    
    
      
      
	The function
	<kbd>segments_to_painter</kbd>
      
    
    uses the representation for line segments described in
    exercise&nbsp;<REF NAME="ex:segments2"><a class="superscript" id="2.2.4-ex-link-2.48" href="./2.2.4.html#ex_2.48">2.48</a></REF> below. It also uses the
    
      
      <kbd>for_each</kbd>
    
    
      
    function
    described in exercise&nbsp;<REF NAME="ex:for-each"><a class="superscript" id="2.2.4-ex-link-2.23" href="./2.2.1.html#ex_2.23">2.23</a></REF>.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-8' href='#footnote-link-8'>[8] </a>
    <FOOTNOTE>
    
    For example, the <kbd>rogers</kbd> painter of
    figure&nbsp;<REF NAME="fig:rogers"><a class="superscript" id="2.2.4-fig-link-2.11" href="./2.2.4.html#fig_2.11">2.11</a></REF> was constructed from a gray-level
    image. For each point in a given frame, the
    <kbd>rogers</kbd> painter determines the point in
    the image that is mapped to it under the frame coordinate map, and
    shades it accordingly.
    
    By allowing different types of painters, we are capitalizing on the
    abstract data idea discussed in section&nbsp;<REF NAME="sec:data?"><a class="superscript" id="2.2.4-sec-link-2.1.3" href="./2.1.3.html">2.1.3</a></REF>,
    where we argued that a rational-number representation could be anything at
    all that satisfies an appropriate condition.  Here we're using the
    fact that a painter can be implemented in any way at all, so long as it
    draws something in the designated frame.
    Section&nbsp;<REF NAME="sec:data?"><a class="superscript" id="2.2.4-sec-link-2.1.3" href="./2.1.3.html">2.1.3</a></REF> also showed how pairs could be
    implemented as
    
      
      functions.
    
    Painters are our second example of a
    
      
      
        functional
      
    
    representation for data.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-9' href='#footnote-link-9'>[9] </a>
    <FOOTNOTE>
    
    
      
      The function <kbd>rotate90</kbd>
      
    
    is a pure rotation only for square frames, because it also stretches and
    shrinks the image to fit into the rotated frame.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-10' href='#footnote-link-10'>[10] </a>
    <FOOTNOTE>
    
    The diamond-shaped images in
    figures&nbsp;<REF NAME="fig:wave"><a class="superscript" id="2.2.4-fig-link-2.10" href="./2.2.4.html#fig_2.10">2.10</a></REF>
    and&nbsp;<REF NAME="fig:rogers"><a class="superscript" id="2.2.4-fig-link-2.11" href="./2.2.4.html#fig_2.11">2.11</a></REF> were created with
    
      
      <kbd>squash_inwards</kbd>
      
    
    applied to <kbd>wave</kbd> and
    <kbd>rogers</kbd>.
     
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-11' href='#footnote-link-11'>[11] </a>
    <FOOTNOTE>
    
    Section&nbsp;<REF NAME="sec:circuit-simulator"><a class="superscript" id="2.2.4-sec-link-3.3.4" href="./3.3.4.html">3.3.4</a></REF> describes one such
    language.
    </FOOTNOTE></div>

    
</SUBSECTION></div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./2.2.3.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='37' href='./2.3.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      2.2.4  Example: A Picture Language
    </div>
    <script> var chapter_id = 36; </script>
    <script> var chapter_path = "chapters/2.2.4.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>