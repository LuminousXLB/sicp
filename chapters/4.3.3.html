<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="4.3.3&nbsp;&nbsp;
    Implementing the
    
      
      amb
    
    Evaluator
  " />
    <title>
      4.3.3&nbsp;&nbsp;
    Implementing the
    
      
      amb
    
    Evaluator
  
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html"> 
        Foreword
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html"> 
        Prefaces
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html"> 
Acknowledgments
    </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      
      Functions
    
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-4" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      
      Operator Combinations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.4.html"> 1.1.4 
    Compound 
    Functions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      
      
        Function
      
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.8.html"> 1.1.8 
    
      
      
        Functions
      
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      
      Functions
    
    and the Processes They Generate
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-14" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  
	  Functions
	
      </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-21" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.3.1.html"> 1.3.1 
    
      
      Functions
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.2.html"> 1.3.2 
    
      
      Constructing Functions using Lambda Expressions
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.3.html"> 1.3.3 
    
      
    Functions
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.4.html"> 1.3.4 
    
      
      Functions
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-26" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-32" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-37" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.3.1.html"> 2.3.1 
    
      
      Strings
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-42" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      
      Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-60" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-69" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-70">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-75" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      
    
    Lazy Evaluation
</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-84" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.3.1.html"> 4.3.1 
    
      
      Search and amb
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      
      amb
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-97" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-104" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.3.html"> 5.2.3 
    Generating Execution
    
      
      Functions
    
    for Instructions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-112" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-113">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                <a href="./5.4.1.html"> 5.4.1 
    The Core of the Explicit-Control Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.2.html"> 5.4.2 
    Sequence Evaluation and Tail Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.3.html"> 5.4.3 
    Conditionals, Assignments, and Declarations and Blocks
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-117" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      Statements and
    
    Expressions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      
      
	Applications
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./making-of.html"> About the SICP JS Project</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    4.3.3&nbsp;&nbsp;
    Implementing the
    
      
      amb
    
    Evaluator
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    The evaluation of an ordinary
    
      
      JavaScript
    
    expression may return a value, may never terminate, or may signal an error.
    In nondeterministic
    
      
      JavaScript
    
    the evaluation of an expression may in addition result in the discovery of
    a dead end, in which case evaluation must backtrack to a previous choice
    point.  The interpretation of nondeterministic
    
      
      JavaScript
    
    is complicated by this extra case.
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    
    We will construct the <kbd>amb</kbd> evaluator for
    nondeterministic
    
      
      JavaScript
    
    by modifying the analyzing evaluator of
    section&nbsp;<REF NAME="sec:separating-analysis"><a class="superscript" id="4.3.3-sec-link-4.1.7" href="./4.1.7.html">4.1.7</a></REF>.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a> As in the analyzing evaluator, evaluation of an
    expression is accomplished by calling an 
    
    execution
    
      
      function
    
    produced by analysis of
    that expression.  The difference between the interpretation of ordinary
    
      
      JavaScript
    
    and the interpretation of nondeterministic
    
      
      JavaScript
    
    will be entirely
    in the execution
    
      
      functions.
    
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    
      Execution
      
	
	functions
      
      and continuations
    
  </h2></div>

  
  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    
    Recall that the execution
    
      
      functions
    
    for the ordinary evaluator take one argument: the environment of execution.
    In contrast, the execution
    
      
      functions
    
    in the <kbd>amb</kbd> evaluator take three arguments:
    the environment, and two
    
      
      functions
    
    called
    
      
      <EM>continuation functions</EM>.
    
    The evaluation of an expression will finish by calling one of these two
    continuations: If the evaluation results in a value, the 
    
    <EM>success continuation</EM> is called with that value; if the evaluation
    results in the discovery of a dead end, the 
    
    <EM>failure continuation</EM> is called.  Constructing and calling
    appropriate continuations is the mechanism by which the nondeterministic
    evaluator implements backtracking.
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    It is the job of the success continuation to receive a value and proceed
    with the computation.  Along with that value, the success continuation is
    passed another failure continuation, which is to be called subsequently if
    the use of that value leads to a dead end.
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    It is the job of the failure continuation to try another branch of the
    nondeterministic process.  The essence of the nondeterministic
    language is in the fact that expressions may represent choices among
    alternatives.  The evaluation of such an expression must proceed with
    one of the indicated alternative choices, even though it is not known
    in advance which choices will lead to acceptable results.  To deal
    with this, the evaluator picks one of the alternatives and passes this
    value to the success continuation.  Together with this value, the
    evaluator constructs and passes along a failure continuation that can
    be called later to choose a different alternative.
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    A failure is triggered during evaluation (that is, a failure
    continuation is called) when a user program explicitly rejects the
    current line of attack (for example, a call to
    <kbd>require</kbd> may result in execution of
    
      
      <kbd>amb()</kbd>,
    
    an expression that always
    fails—see section&nbsp;<REF NAME="sec:amb"><a class="superscript" id="4.3.3-sec-link-4.3.1" href="./4.3.1.html">4.3.1</a></REF>).  The failure
    continuation in hand at that point will cause the most recent choice point
    to choose another alternative.  If there are no more alternatives to be
    considered at that choice point, a failure at an earlier choice point
    is triggered, and so on.  Failure continuations are also invoked by
    the driver loop in response to a
    
      
      
	<kbd>try_again</kbd>
      
    
    request, to find another value of the expression.
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    In addition, if a side-effect operation (such as assignment to a
    variable) occurs on a branch of the process resulting from a choice,
    it may be necessary, when the process finds a dead end, to undo the
    side effect before making a new choice.  This is accomplished by
    having the side-effect operation produce a failure continuation that
    undoes the side effect and propagates the failure.
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    In summary, failure continuations are constructed by
    <UL>
      <LI>
	<kbd>amb</kbd> expressions—to provide a
	mechanism to make alternative choices if the current choice made by the
	<kbd>amb</kbd> expression leads to a dead end;
      </LI>
      <LI>
	the top-level driver—to provide a mechanism to report failure
	when the choices are exhausted;
      </LI>
      <LI>
	assignments—to intercept failures and undo assignments
	during backtracking.
      </LI>
    </UL>
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    Failures are initiated only when a dead end is encountered. This occurs
    <UL>
      <LI>
	if the user program executes
	
	  
	  <kbd>amb()</kbd>;
	  
      </LI>
      <LI>
	if the user types
	
	  
	  
	    <kbd>try_again</kbd>
	  
	
	at the top-level driver.
      </LI>

    </UL>
  </p></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    Failure continuations are also called during processing of a failure:
    <UL>
      <LI>When the failure continuation created by an assignment finishes
      undoing a side effect, it calls the failure continuation it intercepted,
      in order to propagate the failure back to the choice point that
      led to this assignment or to the top level.

      </LI>
      <LI>When the failure continuation for an <kbd>amb</kbd>
      runs out of choices, it calls the failure continuation that was originally
      given to the <kbd>amb</kbd>, in order to propagate the
      failure back to the previous choice point or to the top level.
      </LI>
    </UL>
    
  </p></div>

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Structure of the evaluator
  </h2></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    
    The syntax- and data-representation
    
      
      functions
    
    for the <kbd>amb</kbd> evaluator, and also the basic
    <kbd>analyze</kbd>
    
      
      function,
    
    are identical to those in the evaluator of
    section&nbsp;<REF NAME="sec:separating-analysis"><a class="superscript" id="4.3.3-sec-link-4.1.7" href="./4.1.7.html">4.1.7</a></REF>, except for the fact
    that we need additional syntax
    
      
      functions
    
    to recognize
    
      
      
	the <kbd>amb</kbd> syntactic form:
      
    
    <div class='snippet' id='javascript_90_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChsDMBXAOwGMAXASwHsjQKBnAfQEMBbAIwAoSrWAHGgFMiZAJSgA3qGkzsM0ACdBZAgtoNGZZgHNtggCaMANgzLdeAosLIAaUACJmfPiZLNKNe+IBk30HPlAuiYiNkFOQlIPIkZBAA8+JXp6aiJzfiERUR8-AKCZegBPDiojRio8RlDWcMjyVNiEpJSadMtrbNAAXh6HNnZ7AG5sAF98YnqaUH7GEgALKgoSQXo2zLFJPMVlVVpmBW1VngyrLOGRoA')">function is_amb(component) {      
    return is_tagged_list(component, "application") && 
           is_name(function_expression(component)) && 
           symbol_of_name(function_expression(component)) === "amb";
}
function amb_choices(component) {
    return args(component);
}
</pre></div></div>
    
      
      
	The symbol <kbd>amb</kbd> here is no longer
	a name with proper scoping. Whenever the symbol
	<kbd>amb</kbd> appears as the function
	expression of an application, the evaluator treats the application as
	a nondeterministic choice point.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
      
    
  </p></div>

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    We must also add to the dispatch in <kbd>analyze</kbd> a
    clause that will recognize
    
      
      such expressions and generate an appropriate execution
      function:
    
    <div class='snippet' id='javascript_90_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7Y8BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmAy3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLEniytRS0pJaakTmKymM5Nfiso8IOyu7By8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaAKtrJKuItrT3c0PyyKvqEShyHKO9IKsK0q5g80WSsNGSnImU4zcOLIPIWQHoLzHzYEKXQq6Ct7biscycShbjUXJwZRIygawc59S9MakkW9RaWETyF3OXcy74WLAEBa5RYk0ARvNVQUK1FM3aJC7EFCii1atVcXLHK1BqpaiYS6ric6tuZREfMC6YKUQqGwDzSk+3d2IXJQP3Bi77QUT6qCC7fKvapA+0VsMsN0NuUGnLcG1slmKIBg+bSGpq1GNamqcaY+Ra5IUgToEgGgOabiY8ACXIW+e+M6WI5IdqsgTq0pdaUUvEFcm-bqxsyitwGfWi0A8LRHJi7QvU3Qqi42KyufA1E3RYqq5als9ihkckwa-Ckq0HPiuk2PRaoS1W92XKoKlSzfQo2q98O6smby5aoq7E42twBmpmzmyDIvSGlmfqvCvneqp22XVPGq1OfbUILsloxY0pdCWcHINHOY2fMyefGW7KKrMgGrOrakCLAsnS4WTihklWwg0GCmpgQCYNLDF0eO0oUcquVhMuAu2rIulGkPZg9TTjCy7dOOiu5cmy0qu4j22lQ5aQXOqSHdGcRuhO61G00AbPdwb0Lu9LHu+Ys-LPeS4i0C4Qibb4dbEbS4+mLwG-Zezo1HC6KIULf7behmVc6HP7XUxrGs2qXe8soMyslikW8+3qdewOu84Ws+j0He74QIoQ1iqux+tcz+iig+3Gja5Y0Yo7Vew+1okB448BoB6EB-dCOHRiuAmB2qX+4++BiwRB7LIWqsu+t+i+74dMlBmqNB1naiDYnUlCChs0siq0hA9+6EA8mgTc4huKG-JhlhwBq4S+8SyEc0iMgB7+teo+sh0ii08ituLh1mUzYOqRthwOszVhts0zFmnq3B1+n+kRvg1RrmuRts7JLYs+EgYm0m+UhQXUewCZe+BfQsf24i9CXkzoiLNS6a4wzS8IReoYpOpWtAieWe8OJvaiWwWQYEPsbIWQDDa-BxwMJjIYc8bYOws6MQEgcJ42KqbaBoGoU26TWTTbBTXUU2qwvOpS76mIc40RQ5JOXAw5dGgodm6CIJp0e8sJiJouSTVaYJ7RcCMuWoMUy4KMPsM4zbPPQGlJ2QbmHO0pWEacOREssQTdUZ1JnuZIceuEGZvzIgq4VZ6Zvsao5eIs-WKuMzRx5sG4eJ5IRJjqFptJ8qTJsKnJjVPJ0TXDDzQUmOiwE5gayOVEpOCCKSUpUp0wX4yoQ5TZ1GegTp+VcCByX5iFpp+Veo1GeGN0IFuOEZlZyZtZvsEMYpgFoZ-hRF2qdgt545wMZgtk1Emp7EX1RgzjQlkekewZsp4Z9BCja5pk+IzOsNZJVJbYfAJl1F+KOIF+S6OohWtYQwSoKkDXSF9tVROdYgBps5mIcCbaa21GAAHTlKTFV01HXGyEYnVcui1ZTq5WyChsUY0CiAAHJwBfj6AlxCgdWiA9XrXag0itWV4jXjatWoxRgHH4haFJEkh1AbNvW3ATW7Myy9KkZQ3w3epI3q6y5433ZE248xBLSe5aY42U3dA03q6fBc2yZ8303-WPnA3LT54Zx1ACLrbPWi3iitX2nSBlWChumOyG2rhfXjxlWJA5pEp6x+2mBnMURDWjW03DBdXDAlAuV18lAW24mQ1a263RQp31xZ2q8kYy2YglBaYF3pW6mq3mwh2R3tirj3A02Z8sQjgT3wI92UnF26n3XSq0393zw22xZLU32Q1n3w2J3dJLFaYT2kQ4MFtr2+2B3l3k163O2PXZ1zzIt9hewundFLFrXEPrWkhrX-imBMPQBrW4S8P8O+w8PrXLxSO5paE5BrX4Nu3Hpe3EOm5jiyQ5Bhh4mx3G3F6sx0PDBsgb5shWPvIiO-3ONe2T20SDAkPQHPIyiS3epe2SbSAWO2P1xz3aqYPYPK0tXv5FOGBPU0PdPSOUQiA79dRSOqFeymLEpSOfMbOH9I4aPn3tO5CYhalUPfRrWpWLAjPjBYkotSO7BKA2T6BSOHBdUjO7BJOQvaP26i3nPzyhhqAuwot9OPPEvvM7BSPxZSP7BHO4Ooxe3ew-g7B0ssRlPvJ4itLZOuO0OiuJEb5dP+PBPzxhPIq5PaoxOB3vKku7AZP1PRPF2IPh2hysRJ91WNPNPoPtWFOyuBOVPKuU202-WEkPmEdpIRulO5vvIOPcj2vvRFHdPyvzwaVvX2vRoOgFBVvTq1sDOsQmuVPWvNXYu3BDutvju4PraGPeOmPVi443vVPB6I3CzJvU3F6LurusMfTCuwMehXvmuAff2nuvWQew06OhFBvzx4anSduROU7uPMfwxShHvceyYZvNv4f1MTuX2BvpWAxXOjuEefXGgUepuCvBuvOGeFv42lvjxwefJIfGMOf-uceW09vJxFGhf4eqfxvg8+e1ufTuOvP7uhPpfjXnu9BJeVPVeYEzu0ivvJOfuxi-uKfrVl202GgJSWegeU65frvYnafxOvOxvdvmerfQe2fafrnFnWmqvx3Lhv2P3knUnEfYPL250CfoWMf3RKGoPqe6Q13AbN3mwA+1PTvF6CeQ+UeJu3fLpytcBcAjdGmQm1TFW-vF33Fzo1Wc+1fe2vfuPsusOLOCArPcOsPAvVh-Pte1f3YCOaAsvawfOTP3QKOqP++DAbPpEaPl38QgA')">: is_amb(component)
? analyze_amb(component)
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    The top-level
    
      
      function
    
    <kbd>ambeval</kbd> (similar to the version of
    
      
      <kbd>evaluate</kbd>
    
    given in section&nbsp;<REF NAME="sec:separating-analysis"><a class="superscript" id="4.3.3-sec-link-4.1.7" href="./4.1.7.html">4.1.7</a></REF>) analyzes the
    given expression and applies the resulting execution
    
      
      function
    
    to the given environment, together with two given continuations:
    
    
      
    <div class='snippet' id='javascript_90_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7Y8BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmAy3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLEniytRS0pJaakTmKymM5Nfiso8IOyu7By8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaAKtrJKuItrT3c0PyyKvqEShyHKO9IKsK0q5g80WSsNGSnImU4zcOLIPIWQHoLzHzYEKXQq6Ct7biscycShbjUXJwZRIygawc59S9MakkW9RaWETyF3OXcy74WLAEBa5RYk0ARvNVQUK1FM3aJC7EFCii1atVcXLHK1BqpaiYS6ric6tuZREfMC6YKUQqGwDzSk+3d2IXJQP3Bi77QUT6qCC7fKvapA+0VsMsN0NuUGnLcG1slmKIBg+bSGpq1GNamqcaY+Ra5IUgToEgGgOabiY8ACXIW+e+M6WI5IdqsgTq0pdaUUvEFcm-bqxsyitwGfWi0A8LRHJi7QvU3Qqi42KyufA1E3RYqq5als9ihkckwa-Ckq0HPiuk2PRaoS1W92XKoKlSzfQo2q98O6smby5aoq7E42twBmpmzmyDIvSGlmfqvCvneqp22XVPGq1OfbUILsloxY0pdCWcHINHOY2fMyefGW7KKrMgGrOrakCLAsnS4WTihklWwg0GCmpgQCYNLDF0eO0oUcquVhMuAu2rIulGkPZg9TTjCy7dOOiu5cmy0qu4j22lQ5aQXOqSHdGcRuhO61G00AbPdwb0Lu9LHu+Ys-LPeS4i0C4Qibb4dbEbS4+mLwG-Zezo1HC6KIULf7behmVc6HP7XUxrGs2qXe8soMyslikW8+3qdewOu84Ws+j0He74QIoQ1iqux+tcz+iig+3Gja5Y0Yo7Vew+1okB448BoB6EB-dCOHRiuAmB2qX+4++BiwRB7LIWqsu+t+i+74dMlBmqNB1naiDYnUlCChs0siq0hA9+6EA8mgTc4huKG-JhlhwBq4S+8SyEc0iMgB7+teo+sh0ii08ituLh1mUzYOqRthwOszVhts0zFmnq3B1+n+kRvg1RrmuRts7JLYs+EgYm0m+UhQXUewCZe+BfQsf2x6JvaiWwWQYEPsbIWQDDa-dCXkzom4c8bYOws6MQEgNx42KqbaBoGoU26TWTTbBTXUU2qwvOpS76mIc40RQ5JOXAw5dGgodm6CRxp0e81x9xouSTVaJx7RcCMuWoMUy4KMPsM4zbPPQG4J2QbmHO0pWEacOREssQTdFpkJnuZIceuEbpvzIgq4EZrpvsao5eIs-WKuMzbx5sXx9cZIAJjqYp0J8qCJsK6JjVWJ0TXDDzQUmOiwZZgayOVEpOCCKSUpFJ0wX4yoQ5CZ1GegCp+VcCByG595wp+Veo1GeGN0R5uOZp4Zjp0ZvsEMJJ+5xp-hAF2qdg05pZwMZgtk1E7J7EX1RgzjBFkekehp1Jpp9BCjLZpk+IzOsNZJVJbYfAQlkF+KOIF+S6OohWtYQwSoKkDXD59tVROdYgfJ1Z9xMybaa21GAAHTlKTFV01HXGyEYjFcuklZTq5WyChsUY0CiAAHJwBfj6AlxChpWiBZWtXag0jJWV5FXjbJWoxRgvH4haFJEkh1AbMrW3BlW7Myy9KkYXW3XeoPXq6y4-X3YA248xBLSe5aZfXg3dBQ3q6fAY2yY42w27XzmHXLT54Zx1ACLraLXE3ijJWynSBVmCgqmOz82rgbXjxVmJA5pEp6w62mBnMUQFXFXQ3DAZXDAlAuV18lBi2hhzxcmc3c3RRO31we2q8kZU2YglBaZ+2uXcnM3mxG3m3tirj3BQ2Z8sQjgV3wI53gmB2Q0zXSrQ353B3wJOYz2j3g323dJLFaYV2kQ4MFtt3a363h3k082K3zXZ1zzIt9hexKndFLEtX-2tWkgtX-imBwPQAtW4SYPYO+wYOtXLxkO5paE5AtX4Mq3Hoa3-2m5jiyQ5Bhg-HW2C3F6sxQPDBsgb5shiPvIEO3Xk3eoa2V20SDAAPQHPIyjmPaoa2SbSAiOSP1x13aqv3v3K1JXv4BOGBPUQOZPkOUQiA79dRkOqFeymLEpkOfNtOH9I4sPj2pO5CYhalgPfQtXOWLBFPjBYkotkO7BKA2T6BkOHBdVFO7AOPnPsP27E2jPzyhhqAuwos5PzOAvvM7BkPxZkP7ADOf2owa3ew-g7B0ssQhPvJ4itKeOKOQPEuJEb4ZPaP6PzxGPIrePKND232m3vLAu7BuOxPONWP62hysRJ8xXxOJPP2pX+PUu6PhOMub26njwOgFBzmEdpJmvBPevvIyPcjePvRFGZO0vzwaUrWyvephvRvTq1t5OsRCvhOSuJWfO3BFupvluf3ra8PqOCPVi45TuRPB73XCyOuQ3F6NufIsMfSEuwMegTuiv7vj2k3Ghnu80cOhEKvzx4anSZumPsvzOIfwxSgDuYfgMKvfu+v91rWGuKvLOlv-vMfLXgeYFQevga2ce7v+u-XQ3bWElNuPvGMye-voeW05vJxFGGfhOVu23g83uxufTKPLO9uGPOfDvrb2fvJhew01uW1LuOPruxjbu-v1MHu9BQ2GgJTCfHuU6eetumMKu2PLPWvZugeNeXv4uKutmBmSnMuue3Ar3S2zItmAeJPN2514evnwf3RKGP2T3R3jWu3e27fRPVvF74enfCf2uTfLpytWrusvHAwQ7sg1LprjDNLwhF6hik6la0CJ4JNjRpRfy8-WQPyTRi-8-S-WQjcCnnG1SBXbvD33FzpRXI+lXsAa2LfKOouIOlOVOKA0OMPIvaxtPpEkfwhJWtX6APPshnOIOkOIPO-YPP99Og-jbImjuyYAAGb2mBNPD2nf7f0NDkWoIAA')">function ambeval(exp, env, succeed, fail) {      
    return analyze(exp)(env, succeed, fail);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p14' class='permalink'></a><p>
    
    
    
    A success continuation is a
    
      
      function
    
    of two arguments: the value just obtained and another failure continuation to
    be used if that value leads to a subsequent failure. A failure continuation
    is a
    
      
      function
    
    of no arguments.  So 
    
    the general form of an execution
    
      
      function
    
    is
    <div class='snippet' id='javascript_90_4_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(env, succeed, fail) => {      
    // succeed $is$ (value, fail) => $\ldots$
    // fail $is$ () => $\ldots$
}</pre></div></div>
    For example, executing
    
      
      
	<kbd class='snippet'>ambeval($\textit{exp}$,      
    the_global_environment,
    (value, fail) => value,
    () => "failed");</kbd>
      
    
    will attempt to evaluate the given expression and will return either the
    expression's value (if the evaluation succeeds) or the
    
      
      
	string <kbd>"failed"</kbd>
      
    
    (if the evaluation fails).
    The call to <kbd>ambeval</kbd> in the driver loop shown below uses
    much more complicated continuation
    
      
      functions,
    
    which continue the loop and support the
    
      
      
	<kbd>try_again</kbd>	
      
    
    request.
  </p></div>

  <div class='permalink'>
<a name='p15' class='permalink'></a><p>
    Most of the complexity of the <kbd>amb</kbd> evaluator
    results from the mechanics of passing the continuations around as the
    execution
    
      
      functions
    
    call each other.  In going through the following code, you should compare
    each of the execution
    
      
      functions
    
    with the corresponding
    
      
      function
    
    for the ordinary evaluator given in
    section&nbsp;<REF NAME="sec:separating-analysis"><a class="superscript" id="4.3.3-sec-link-4.1.7" href="./4.1.7.html">4.1.7</a></REF>.
  </p></div>

  
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
    
    Simple expressions
  </h2></div>

  <div class='permalink'>
<a name='p16' class='permalink'></a><p>
    The execution
    
      
      functions
    
    for the simplest kinds of expressions are
    essentially the same as those for the ordinary evaluator, except for the
    need to manage the continuations.  The execution
    
      
      functions
    
    simply succeed with the value of the expression, passing along the failure
    continuation that was passed to them.
    
    <div class='snippet' id='javascript_90_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49Ay6MBrhWPRF29MDJIhUyClEKEkAgC9On02m7N+swcXoqZS-GI6qX0vIQ67LH6-HaoLabF1nkPWX0DaRGZgo9hBw5By72PLB3rPNbUUMCk9wqSetu-d8kdxxgjc68A3Q39BS-fQndgUTxlCvY9KD0Mc6LBGrMpd-r65BSIK9JOSbq0iAzYMHNwgi2xnLYJ6txyNo5V5YB5SVSXD3wVquKdiemCz0Zauz0c8ABHYI5B1wolYCeouYMDB8-dFQR0L6lD2EmHLHHj48craJ0UEnZ2Pmcb0PYPHWu3Cy-jsEebC8FRk5bdGZMhv1z3arHr8IQ8Keq4NzmdXNgFR2-cFEcz6opuO+J6zhUx3eqs+x6Af2ugozB0NcuS2pBihRdjwwBXLX7Ol2CUoHLifK5ky8P-RPFGAroN5-z6g0uhQx8BEH1GtNM+Alwsz2qnNa9CHr4j8PSOl28gYOBId6OBtTYoMLmdzE1hhLEqQXCSW4rqg+YGv1BR6aF5DqOif+6lGr-O6IPvPQCh5BsJ9mR8PEzf27mZXfXYD9tBo8D2WiPv7lFR9lTnGOlDn-38MfoVuHuRdy04I-oeJsfd8dCd-dSdMV8MH9SBJs7c7pjcmxTdMVmsw11JH4aMrdE5HQfpEcw1bY-d6w59g01cA9Q8yYGgq8c5Ft2djxt9Sloto55Ij8i4T9KZwIUCqB6D3Rr8j87851ICzA0dn8BtZc6Cn4v9ssotns-9LN4tEdAD5hfcQCiCwCOkeo+DoDLpYDXcECulNBUZ8BZleBZktdv5bAjh4xPVnpXotsvpY4sCtc2Do40DttbD3IbA7D3ZcDFDYCPddp1MPldC3B9C5QjDzddoHCY5KZ0DbCfDQjepTCrdyNYiki9BrZkirhvQA91NsCkiGgSD+Yq8Q8qDHoaDXRYl+hHQb83twhLg1FH9t8LNsQNE6BHQyRDBYkfN1x-8eDO8yA6jBDOi6Ayi2gWivxxcS9KiPRQ9v57A+jeshDSimjOdSkbBvsMt+EJiVFZDccgCVdQCNdVl6ZsghB1CyZ8AVdI4O9qBIJpEeQCBEpohYwbj+wp9Rp8BxZ51ChvNpEQgKAZoNVGwzBIszDWxOMmM2iEitCltk0HMZB5BlAgSrcXBk0vBeioCdi8C4C3dm0p4Zi0T5DgDVtMTA9ONNMF4TAQgww+wiAbjiR7iDBHirjYQXjeo3jawPj2jviABITk2zVGQoxDXORwdVWQCQN-S-dtDYoudeaEYvTsAYgrTrZPE-QfD1JTMYuU6iNMe4fKDY7IxXVPITXeWUgXFCFU7PQeCCYJAvbKYqIjFCdmYUyUMUj-eVEECvFEb4+SIXE9BvPaB0g4J0vfcUhgIDJIpyaidUk02vD07U90akb0+vTYv2XWc8T+fU0fSQZ0mkqQhU2WKuLwLMLMz-WODY7EyIS06CNvAU48CUXbUgcIwoJQIbKLDDa0IGCQD5ZIWZeskQwoeZJIZsmdJoJDMwGgiwbsMgToSU97ZHWHcCccmgScmHaYXUmoudCcjycCO2UkAM0UoMl0iUrHbo78Hsx+QoHRPFOsjLXstbRcmGY842FHUgVg-opQI8lBMwZXDE13KE3qJ8pwKSIjVTeSDczCJIU89gwgrCcccg3QXYpQs7WoS6as4o-oqUHcTUz090actczvJgWYrnDPS3cQ3-UsrYpXdExQzE384uY4n3UEpOSEj5eCqnRCEsOMR0fdYg2Cn8oo8OBESUNrWXFvG8BQwkn8mzISEfFMdLdPXEpPHqB3LwsuainqKIWmeS3CE45NM4x3C4yk64xce4+QcQbKIQGI2XJaIkmiltAS0pJaakTmTS305NeitI8IXSwnfS8sKk7MwgRKGIy6fAEoEwXsSoUMaXQIGaOytrQK3wtrTE80M3dy5LPApjNxSy2EO9BylylK1nc0HisNbimI-k4cjsFQPIWQHoLzHzYERnBKgk1Xai8bScShbjGnJwZRRSxqxs59S9dqkkW9RaWETyPXEPNS74WLAEQa5RZk0AXPNVQUK1UM3aQC7EYC7CsatVOnb7OiZhQq4aiYLariDatuZRBvN82HKUQqFY6yzXd2Fi6EdizHK6nLKCMbOK+alPUwL-MMbCwUa696sslmKIAgubT64qvkxbCa7JIa5IUgToEgGgOabiY8ACXIW+e+M6Hw5ILISq+4UpdaL43zTfUctCmq7MnCtwb+AgAil-cLR7CQmLaQorB8syifHvA1WXfo7Kkasij84WSi8SkPZKy6WmvE8oA64ZRnYg0WvNGKhy4SifRIlK98KW1GTKrCfKmy1W6ICqsgKqwmkqYmuquPT6lmBq+CxK3KlmSGoqyg0IMq6g8m9CWcHIY-OdVE7vMyXvHm7KKrMgGrOrakCLJM6SwW-Eq2iSxA0GNGpgQCYNLDF0IO0oSfJA9I1qtPJGQO2rVO4G+3V3dTTjdS7dHO4OtQbStIq2828IPwzFaQBOqSHdGcMuvOsOpBOGScBu9LJur24fPQBoPi7rV8xg5rVhDYb7Coo-emLwGgiemIKelmj0C6KIULYbaehmJ-OYwbfbJess1ezM-cymje3qWetCos5m3MiMFe74cIhgvemerernWgx+e+q+5e2qA+ssRo8o5sE+2qM+7e7+oY5ov+h+z+74ffKHe7EiyQjYx+uev7b-J7S+xra+iBmUyM0oeBzemg407B-B7nLUyROM0sm+6EBcycnB0+p+jHAUCcqc-+1mJ6y3GMkhtuJhuKGg-0Nht+tBj+mqL+szahgB2h67YRzh8s0zIm2ql7cBmhmgimw-eRq4caY+CYs+EgRG5GswVCXUewCZe+bfQsJ24o9CekioiLUSnqhCieSS3QAW+o0Or8qi3ilC8OPPaiWwWQYEPsbIWQVs-2iwCx5sG4c8bYXQs6MQEgfx42KqbaBoGoKW6TWTFohTXUKWzQxOwSlYmINY0RQ5JOGAw5MGgoUm7KaCLxp0bRJQPxgJouSTVabx7RcCMuWoTky4KMPsVYloqPWpmJ2QbmeO0pWEacORNMsQTdfp2JnuZIbuuEMZvzdOgTYZhZvsLI5eFM-WKuMzEJ9KqkdcZISJjqOpuJ8qRJlylJjVNJ0TXDDzEksAXZwMRqyOBizAiCKSZYnp-hQ5ZZy6egZp+VcCByRigF6p+VPI1GeGN0UwXp9BOZ1Z0ZvsEMbJr5vJm4yoSF2qMgh5oJkJ13ck0Ekp7EX1QgzjLF9vdvbp9FuOPpijU52CuunQu3ZJVJbYfAal2FqmbJF+S6XI8ihkQwSoA5lCQF9tVROdYgSpsJmIcCbaXW1GAAHRHKTD501HXGyEYgVcumVfDq5WyC+uEY0CiAAHJwAbj6AlxChVWiB1WTWkKW1lWV5tXVblWoxRhzH4haFJEkh1B7GXXdBdW7MMzZKkY-WA3eog2C6y4I33Yo3PcxBtSe5aZw3Y3A2cYvAfA02yZ43WYPXgmvXtT54Zx1B4MFWnXs2kjlXGnSAZWChWngkHXK33A3XjwZWJA5pEp6xO2mBnMUQtXtX43DA1XDAlAuUx8lBa2hhzwymy3y3RQR31xx2s7mx82YglBaYp2Dmyni3mwe2+3JjNiW3cLvw7iAR93wJN2Ynp2Q0m3kj42t2Z3wJOZH3b3Y2h3dJLFaZ92kQ4N5ssQjh925280K3m3zdlX+UDB9hewWndFLETXItsgTWkgTW7imBkPQATXfiMPMO+wMOTXLx8O5paE5ATX4NW3Hp23EOm5f6yQ5BhhwmB2q2BaswEPDBsgb5sh6PvIcOA3c3Rp2392wSoOaOIWaVYj+Pep22kbSA6OGP1wj2UrQOwPK0IO50ZPvaKUTWNP8OUQiBd9dR8OqEaACAJDEp8OfMLP99I4yOHW1PO9hXak4PfQTXHPdPjBYkot8O7BKByT6B8OHBdVdO7AoP-PyOa7K37PvwhhqAuwotPV4OYvvM7B8PxZ8P7BbPwOVX23ew-g7B0ssQ5PvI-CAj3KP3HxWPcuJEb4NPOPuPzxeO0jJPapBOu3LLYu7BPJXXONWve2mysRW953nWVOQPsub2CvZOuP5OSv33OnjwOgFBgmHtpJ+vJv6uEx-XHWepvRhGNOivzxxPB27cFulu1q1t4PaupuePDulWIv3A9uruDusvdaqP2PRPQH9uFPrU7343huRuc2BaTufIsM7ScuwNBtCvHuvu72dXGh-vRuowcv3Q5SZvs3yuGRKvkeBdGuI3mvKNxuHv1v1Mbv72evxvHPPv1NgPSe-v4eWYKOhFyeYgLBKemOju3B3WElTuQfGMKeoe2fnuM7WtXa+f1uSfuuw0gflu7TWPHO6v5OcfYfdbRf5Pxe427u3BXuROYPhi44oeqfFP023AGhuS6e3B0e1gpezv9mNIhPHPBvQjlOzeAfEfxvTnpn6nSu+PLhX362zJTmYfm342T9FNXEDmIy3QTTqeyuF3bXR2J3ffDf2fg3dH3RA--unfnfLpytjNw457vXhgwH37AmXHhblCbGlB57C-0Cj9qKJNjRpRK+G-WRayTRW-G-2-WRpcqmfGJSpW9eb33Fzp5Ws-Yf233fWO0uUO9ODOKAiOSPUvawLPpFFfwhlWTX6AQvsh-OUO8OUOp-MOL8bOk+UqkmNeyYAAGG2mBYkpI2-92e-q4DkWoIAA')">function analyze_literal(component) {
    return (env, succeed, fail) => succeed(literal_value(component), fail);
}
</pre></div></div>
    <div class='snippet' id='javascript_90_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BtIjMwUewg4cg5d7HlnbHoi5qKGBSYbOj1hnYu+SO44wGuFY9MA3Q39BSevewKJ4yg7uIIB3OiwRqzI9eO+uQUkOWsMim6tIgs2DDzcIEtsZ9MVtY-rE5OVeXPuUlUlw98FariLabF1nk8P+s9HPAAR2COQdcKJWAnqLmDAwbP3RUEdC+pQ9hJhyy9JONHBPse04nh8zjeh7Bo8V24UXW2DB7abAqPHLbozJg1+rqsqvwhDwx6to3rYtc2AVCb9wURzPqmm+bwn1uFT8dGnL5H-tdBRmDoa5cltSDFCi0HhgEuUdrDCc2HLYfK5ky8P-MPFGAroNZ+z6gwuhSB8BB7smtNY+AlwtT2qnNC9CGL-90APvQxzor+BIdjOBvTYoNzmdzEo+l2CbI3CSW4rqg+YGv1BR6ap5DqO0gnkpwzgryog7x4m89AKHkGwT2ZEQ4e3O7uZll9djX20GjP3OtV+-uUWH2UjtM6ULv1fwx+ga8u5F3LTgIfI+9NLl3svceYvw2f0gU2Tc7o3dDlmsw11JH4aNDdY5x4foq8w1bZP96wh9g0igcdtdkcyYGg88ad9tENDtesTtwCqBo55IN9mtv5t8H5iCn5D8IcT850-8zA4dL8BtRdosSD3QH9ssosbsX9LN4sq938nd0dMcv86ddcrhGCADLogC0CbcQDUZ8BZleBZlFdv5bAjh4xPVnpXoUt4wlZrYWYiDo5ID9DoD3IbBYDFcEDRD6wk47ddp1MPlNB3AlC5RVC9ddpjCY5KYoDT4HDPDeoNCNdyNAiwi9BDDwjwhvQ5c5R1M4CwiGgMD+ZsCvd59HpF8yxsQNE6BHQj8mtwhLg1Fz9F8LNsj+hNtItYkfN1xX96Cl1QwSiWDai6BYkKi44vx+cM98iit6jvx7AmiCCWjyi2hNtHRhsMt+EeiPQ38pdhCZdUCvcJDapsghBpCyZ8ACdI5a9dQ+wiBpEeQCBEpohYwDj+w+9Rp8BxZ51ChvNpEQgKAZoNVGwzAqiNdOMmNDBNCrc5CddVk7cHMZB5BlA3iqwLjB5Gj-95jEDgC7cogBioT5hndbDgDsC9BNMF4TAQgww9iDjiRjiDBTjqBzjOMrjawbjqj7iABIKk2zVGNIvA48O2UkA4SUG-ffdtaYxMdeaEdPTsFogrTrCPCg1vD1JTLo-k6iNMe4fKLkhIyXR8aESRYTaiCUjnFCUU+PCEsuFPbKYqIjFCdmdVWQCQdku-eVEEHPFEe4+SLnE9EvPaI01k00lfDkhgIDMI4nPk9Uwva0mU90akO04vOfP2XWc8T+BU+zSQM0vEvgwU2WKuLwLMGM+-WOLk5te3CCYJKvJoJoJDMwCUVLd9DLdglApQDLUYXvZrb0IdCQD5ZIWZUgbwwoeZJICsqLenUQTIiwbsMgToLkzfBooHMyHsmgPs0HaYOUooudXsjycCZk40tk1080zkpHPo42Js0swoV7QsmgNLTcx+QoJQWc4ydc0AGHUgcCUotcibYWaElEuQzpemC8pwKSIjVTeSE8rCA86g7cn6NE3QBY63eDXaRkjI5oqUHcKUm090Ac8gudJgQYhHJQf0bg5-dMwQuYpEkQ1bYC5YuGNYp3D4pOX45bRAxyG0SCyEQ3QMfdWIh0x89I8OBESUNrUXCvG8ZE3Cx8mzISDvFMdLbvBE8PHqM3Ww8s4JYCnqKIWmYS3CdY5NTYl3bYnEyCWMwgY4+QcQbKIQAI0XJaYA-CytFi0pJaakTmOShisNIiqI8IJSzHFS8sXExcRKAIy6fAEoEwXsSoUMYXQIGaEytrNyxwtra3c0Iy2ytwBYpjNxfS2EO9Myqy2yuXc0AC5NeitKnOXAvMjsFQPIWQHoLzHzYESnUKnC13Hi6sycShbjEnJwZRUS8qo859S9WqkkW9RaWETyVXL3aS74WLAEdq5RcE0ARPNVQUK1D03aN87ED82CnqtVMnF7K1TKzqiYBariOatuZREvJQQUKUQqGwDzUihXd2aK6EEsZ0fanLKCe7YK0ayPe0VsLIisPasHA626jM92KIZA+be6jK-DXqmqcaY+Dq5IUgToEgGgOabiY8ACXIW+e+M6Bw5ILIfK+4UpdaO43zTsswTIoq2MuC6choggJCq-cLK7HgmLfg3o4m-o+vMyRvZohKrqjC28j-B8pY-4smUmxE8oVa4ZSneiiKmBQKsy9iyfUIyK98AW1GOKrCFKp86W9wNGsgAqzGkqbGkq4Pe6owsyriiqxW2Wy6AG9K-bUIHKhfCCszWcHIRMb+MgBm9KA1UXZm7KKrMgGrOrakCLEM-iu87CoCnizFUA1OOGpgQCYNLDF0L20oKsquVhMuGO2rOOr6uKOXdTTjGS7dT2lOjshSqIoC3W8IJwzFaQSOqSHdGcXO7261eU6vHqb0cu9LSux2yfb3Ji7rZoom-26EdbEbLk+mLwTI-uvIiHC6KIULUYQehmC-IY9LZCce2qSe6M5cwmpe3qYeiClM6m+MiMCe74bw0gmmj0IeuehHUpUs4+ve0+5e-q1onIo7Geze8+pnLIto0Y0bE+r6le07dCc7R-a7Xexrfe2ekekHNC3g5+q4X+700oaBmqLe+euBznNU0oaC-06ddMg+6EUcvshBuKbs3s-sjemB-XKCv0yRWC0hxB1+k7f0Sh6+kB2+4Gw+9CAh03Ohwq9hmhzM0zLG4q27b+s+-GgR9e4Ru+7JaYs+EgSG6GswVCXUewCZe+RfQsS2jI9CQkvIiLTipqxY3HFwhDf20o32jm7ihkjR8OJPaiWwWQYEPsbIWQDDPGrRwMGKqkdcZIFws6MQEgJx42KqbaBoGoAW6TWTTbBTXUAW2QqO1io6mISY0RQ5ewsNUurpX6goXG7KaCWxp0bRJQRx5xouSTVaOx7RcCMuWoKky4KMPsCYzbf3Qp-x2QbmCO0pWEacORCMsQTdZpgJnuZIZuuELpvzUOgTdpkZvseI5eMM-WKuMzbR5sG4c8bYHxjqIpwJ8qEJhi8JjVSJ0TXDDzUksARZwMcqyOYix0NsqSUpBJ0wA4yoEAu3egcp+VcCByEi15-J+VZI1GeGN0B5uOJpoZyZzpvsEMOJu5hp-hP52qLAk592iwJZuQrEj4w5TJzjOFmvGvepxJxp9BCjTZgC9Jnp0aZJVJbYfAPFoF+KOIF+S6JIzCx8QwSoTxlCN59tVROvYJMkIYc8dxMybaZW1GAAHXzKTDZ01HXGyEYhFcunFf9q5WyAepto0CiAAHJwADj6AlxChJWiBpWNXag9dxWV55XpbxWoxRgtH4haFJEkh1BeKLW9BFW7NO9BKkYnWXXeo3XOGy4fX3Y-W+GZSe5aZvXA3dBg3OGfBI2yZo3MybXkW7WZT54Zx1AQLlazW42wjxXSnSAVn9WzIqmc2rgrXjxC2JA5pEp6xq2mBnMUQ5X5Xg3DApXDAlAuVo8lAC3+WQ1M2s3RQ231xO2u8kYk2YglBaYe3PGsm03mw62G2Zi593Bg3v4jiAQF3wIp3-He2smTXbLg3p3zwChwJOYj2Q192XWW3dJLFaYF2kQ4MFssQjgF3+3k1s3S3TXZ0GjIt9hewKndFLENXf2NWkgNWjimBQPQANXHioPoO+woONXLxEO5paE5ANX4Ny3HpK3f2m52iyQ5BhhVmm3c3bysxgPDBsgb5shCPvI4Or3ONK2F3PiDA-3H6p9SPgNe30ssQCOiP1xl3IqP3P3K1xXv4obJ9PUgOJOSBEOUQiBl9dREOqE9yeDEpEOfMNPV9I4MP92xOGCYhalAPfQNW2WLA5PjBYkotEO7BKAsT6BEOHBdU5O7BWOHPMPi6c39OGihhqAuwospOTPfPvM7BEPxZEP7BdOv2oxK3ew-g7AePSA+PvInCjGD2yOgO4uJEb4ZPqPaPzx6OoiE3eomOa39K-O7AOP0uuPPGq2yuZPK8RXhORP32JXK2ZPkviPnWmvanjwOgFBkXLtpJyzeOaP+OSPPDivHqkWRukuxvvIaULWpvRp+vBuZq1tpOsQ8v+PCuxXPP3AOv5vzxFu81lu9ccPKO8PP7OuBO663Bg3zWWuWZr3HxVufIsMDTYuwMehDv8vbvL29vHunuYEsOhFuPzw3R1SJuGP-byOIfwxShduYeyZ2vRu-v1MTuivGPuOzObv1M33SOgfgfnu2ucfDO8foeB23BrWEk1uPvGNcejuExuuW0pvvQbbGe-vMeqeYE3uhuDTyOzPtu6PufdozuW1Of+PReg39u3ALvWOrvci44mf8fBOo2-YaTif7vby+f1uPGNJmOzPGvJvGgteQfSfavNn+nim0vkfdBz2T2zJNmAfP3V2t9FNXFav4f+T4jm3B3DX22u2He1e-f-b4eXfgfmuzfLpytjNw5Mj2ye73XJt7yLHv8Ol8dyLg4XoVM9CvoUs9yF7p6Id-yTdLHcBCyTRK-pRjzjQa-q-WQG-Rdcnvn7HOTiBcnC33FzphXo+FXsBK2rfyPwuwP5PFOKAUO0OwvawNPpEkfwhxWNX6BXPsgHOwOEOwOR-oO98dOQ-IrQnZeyYAAGJKmBd3Yu8-s-0NDkWoIAA')">function analyze_name(component) {
    return (env, succeed, fail) =>
           succeed(lookup_symbol_value(symbol_of_name(component), env),
                   fail);
}
</pre></div></div>
    <div class='snippet' id='javascript_90_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dno54ACOwRyDrhRKwE9RcwYGHh+6KgjoX1KHsJMOWXpJzXdew9sHE8Pmcb0PYa7VO3B462wYPbTYFTPZbdGZMjOGdVjp+EIet3Vvc9bMzmwCpefuCiOZ9U02BdvZFwqEHvVyeIN0P7XQUZg6GuXJbUgxQos64YITlr9nS7BKUDlg3lcyZeH-gbijAV0Fw4R9QHHQpteAkV6jWmFvAS4Qrb1TmPuhB++Aary439g-gSHVD-rTOroo5ncxNYYSxKkFwkluK6oPmBr9QUemDuQ6jrT-upRxeIeiBjydgoeQbBDGkTFyz423Df27mZavXY6-9BowDzrofQxzvKEasylf1zt9r8MLv8ZBw5By72PL52VF96u9Lm7d2ydPcxfhwfpApu87uvLw5zWw3qUfjRrnsdx4-T72G22svChKBz8Gooj2Wcq5Zg0T3Od9uIcO71k7J+qBo55IF8i4W9KZwIACgD3Ru8F8+9v5t8zBh8jtY88dosoDe0p9ssos58nAF839l95gZc19n9lc2crgEDd9Lp98X9RdD9UZ8BZleBZkqdv5bAjh4xPUPsVMvsvoL93w39LpICY5KZz9T53IbAr8qdb9iD99xddp1MPlNB3AGC5RmD2ddohCz9vsL85D1Deo2DGdyM9DjC9BrYTCrhvRyc5R1Nr9jCGgBD+ZPdlcDtjwR8yxsQNE6BHQe8mtwhw851sgh9spkCBsLMPD+hNtItYkfN1w8C4C50yAgiR8wjYkIi44vwMdncfCit4il1sokiQjYi6BUi2hNtHRhsMt+FsiPR8DicV9ScSCN8Ol6ZAid9pdON8BXtI5+9dQ+wiB69iREpohYx69+wM9Rp8BxZ51ChvNpEQgKAZoNVGwzAojGdOMmNDB2DhcaDWdVlxcHMZB5BlBViqxxjB5QwhASc79GjX9xcoh7BLj6jriD9P9dBNMF4TAQgww+iBjuIhiDARjqAxiOiwApiojZj7gABISE2zVGZwn-Y8O2UkA4SUMfTveVaoxMdeaEJ3TsIogrTrI3FvCgBPcCXExHaiNMe4fKTE2wonR8aESRYTaiTIvElCEkk9CjLwMue3bKYqIjFCdmdVWQCQNEifDE23SkuY+SZHE9f3UaJE4U1EmvdE9tIDYwpyFkzHRHc3fXKU6k90akWUv3RfP2XWc8T+ekk3UUlU8U+fRvCMKuLwLMMU34mAh0moquKIMuPvJoJoJDMwCUX7UgIQ+-DLUYdPZrb0IdCQD5ZIWZEMtAp-eZJIcMqLcvMwNwiwbsMgToTE0AudQUcCbMmgXMgUJ4ZQWA-wvInMjyMkoUlEm0jvO0hgJQQUN-b+RMx+QoHRPFYMjLJM+-Ws4yXI78CwAov-dcdspfOowg1fVbEXTpemcctorDIjVTeSYcrCLswAp-LCccV4+cuXGg+DXaBEx6Nw-0FEaU90fM5rb+JgCc6HXUncafSLXLXAj000pPSbJ44gxcsg4uR4wg9YpOHY5ba4xyG0KUV877QMfdKw+U9Xb-f0qMBESUNrPHYPG8Ighck8mzISH874MuLC4vHqfnGQsuRcnqKIWmB44vSgvNTo2Xbo74yCX4wgIY+QcQfI0gXQvHJaA-QCltdC0pJaakTmeiw3Q8sNdo8w8IZiu7Vi8sH4xcRKXQy6fAEoEwXsSoUMHHQIGaUStrDS+QtrEXc0YS+SvqSChyHKO9cSpC6ymg80GSmBRCtytweE1CySFQPIWQHoLzHzYELhRaWELCBogCqMycShbjOVPLZRcio8+-Z9S9OKkkW9MKzyOnZXGi74WLAEDK5RM40AG3NVQUK1dU3aKSdchTPDdytVckO4cYK1Ny8ynKrLUTXDVEZheUtsisqUQqGwDzcCynd2BopQaEEsZ0QUQaqCC7Uy0q43UwRndwisfq6YOa4a5tGBKIR-ebRajy-DXKmqcaY+TK5IUgToEgGgOabiY8ACXIW+e+M6OQ5ILIfy+4UpdaCEvEDM4Iyc76kqX6+0gkpvPQCPJ8lA8LGfbAhvMGnI6s78KS3s6PQohy8KzE2ox8K4-8-CvYsmAgYC8oTy4WUKxCqysNYy8S0ihgIw5yuS5ygS8Kiypc5y9wD6sgAKoGjYYKhK3XRalmcy5Km4mwVywWq4I65NZw0IHyi8wo0pdCWcHIRMb+RItPKPA1PHdG7KKrMgGrOrakCLb8uzNYXGvC0gzFI-VOB6pgQCYNLDF0A20oSMquVhEi-W2rF2namqG3S1H2q4Wi7dT2w2tQRi+SyKiW2lQ5aQe2qSHdGcEO72k28INXdwb0WO9LeO9Ww3X0lw+Wycu8ibb4dbEbTE+mLwNw0u7whfC6KIULf7WuhmAG6HP7fExrR02qeuyQV0mRJu3qSuhW3u+Gjuj0Ou74IQ4Ar8iulu2PUpJMqehGseru-K4ozwo7cu5utw10Eorw0baele6EWvdCAoewN82fEewHAOpaquszU+8+uG0G0en27urUhHUoTege2ek7ckj+3+mHKkyRQ0rG8e6EEs3Mz+2qQewG8BvM-uwOjnV868g0tueB327+20TnZBoB1Bg+06iepWtBuKNwszSB1mUzH6vmz8pe6+6B1uoK34shiXeKSac7M+Ega626swVCXUewCZe+EfQsOW8OMzAE7wiLHCkWqKvwoi5I4282487y4zcOSU+gWwWQYEPsbIWQDDTM9CMR5sG4c8bYJQs6MQEgbR42KqbaBoGoTy6TWTTbOqjzPfMCh2jC4amISo0RQ5JOPfQ5fagof6nHaidR7RSaixnRouSTVaMJ+VcCH0yEy4KMPsCozbTXCJyx7mO20pWEacORS0sQTdTJ2QHuZITOuEfJvza2gTHJypvsGw5ec0-WKuURwMJjIYYx5IUxjqLR0p6x0AWxpyhxjVJxrqp+Q8-ANpx0I8yOUCx0VMqSUpTx0wevSoQ-cXNRp0bRcCByMCrZjR9tBw1GeGN0VZuODJ8pupvJvsEMdx5ZtJ-hY52qD-EE3WiwAxmgz49YgJ7EX1J-TjZ5tOtO1Jrx9J9BCjPplxsmBQq23nZJVJbYfAUF85lhxKF+S6ewmcx8QwSoKkJHOJo5zBCPYJMkTpmIcCbadm1GAAHQDKTHh01HXGyEYmpcujpaIq5WyBvqVo0CiAAHJwB696AlxCgGWiAmX+Xah2c6WV42XnK6WoxRh9H4haFJEkh1ACL5W9AOXTaUx0szdNXtXepdW+cIJgljX3ZTXmG1X2BN5aYjXLXdBrWzWfAnWyYXXmHlWPnVXqT54Zx1BTz2bZX3XjC6WYnSAjGxWzIfTQ2rhFXjwo2JA5pEp6wU2mBnMURWW2XrXDBGXDAlAuUU8H8LHyWgmg3g3RR831wi3TckZvWYglBaZI2y2S9LV03M2ajF93BrWI8sQjgO3wJm3S38WgnpX5LrWW3R3wJOYp3zwx3LXc3dJLFaYO2kQ4MFt+3k3U2K3k0Q242ZXZ08jIt9hewdndFLF+WT3+Wkh+WCBEob3QB+WFjH2n2+xH3+XLwP25paE5B+X4ME3Hok2T2m40iyQ5BhhjHs2w3i6swr3DBsgb5sgIPvJX3tXPXeok2O2NiDBT317PITCMPaok2brSBwPIP1xu3rL92D3K06Xv5SOGBPVL3GOP2UQiBq9dQP2qEaACBsCH3b2fMP2O9I5-3x36OB8YhakL3fR+W8WLA2PjBYkosP27BKBPj6AP2HBdU2O7BcPNOAOo73WJO8ihhqAuwotmPZOzPvM7AP3xYP37AxPD2owk3ew-g7B0ssRyPvIFClDqPYPL33OJEb5GOkOUPzw0PzCiPKNyXt2M2BLzO7ACOAvgM4vsPGOQ9qWaPaO936WSPvPkOKO-PF3knjwOgFAPnp9pIlBGOfPzxoP1CiPvRSG6uivvIaV5WYveoKuquarGM4Owv2vIvOuPWjO3A2uIu48W1uuW1gOEPQPSi45hvKPrVx3nWzTcurXi7eufI1zGM3OwMehJviuqOxu5Wtuw1AOhE4vzw3QdTGv0PAvZO7vwxSgovjXZvbU4uTvfP90FXOMk35P6vVv1vovGhLu8vXO4vgeVuSvPuyvHpdvquBTYepvHuZueoWula0eKPRvsvedkf+u1tL35PwuKOPv2Xxu9BceOvD32b5vcPFu96Qf1M1u3BrWGhoTIeOeduEk+v9viN0vU3swpOsumuIeeftvof8XQNImtgoWMfK23A53o3zHLGweD3e251Xvdnbv3Q2Td2J2q2JWC3i3Vfy3Nfle9XVp3QretucupfLpytlHusFbj6LB76sCPyi7m8Ai69mqqRPU76z6mrKR2svzRzjYizdEQ-yzphaSkbo+obQjpzi6FH19wdKabKZDNSMqw-htVJQqDzeclHsAgyTQK-pQlAq-WRa+a-jRq+QmDnwniBoIyX8X3FzoqWneqek2oWG-ZOHPb32POOKBv3f37PaxhPpFKfwg6X+X6A9PshNPb333b3h+n2RODOjfzC7HqfUYAAGJy5NBXCWs-mBC-mqDkWoIAA')">function analyze_lambda_expression(component) {
    const parameters = lambda_parameters(component);
    const body = lambda_body(component);
    const bfun = analyze(body);
    return (env, succeed, fail) =>
           succeed(make_function(parameters, bfun, env),
                   fail);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p17' class='permalink'></a><p>
    
    Notice that looking up a
    
      
      name
    
    always <QUOTE>succeeds.</QUOTE>  If
    
      
      
	<kbd>lookup_name_value</kbd>
      
    
    fails to find the
    
      
      name,
    
    it signals an
    error, as usual.  Such a <QUOTE>failure</QUOTE> indicates a program
    bug—a reference to an unbound
    
      
      name;
    
    it is not an indication
    that we should try another nondeterministic choice instead of the one that
    is currently being tried.
  </p></div>

  
      <div class='permalink'>
        <a name='h4' class='permalink'></a><h2>
    
    Conditionals and sequences
  </h2></div>

  <div class='permalink'>
<a name='p18' class='permalink'></a><p>
    Conditionals are also handled in a similar way as in the ordinary
    evaluator.  The execution
    
      
      function
    
    generated by
    
      
      
	<kbd>analyze_conditional</kbd>
      
    
    invokes the predicate execution
    
      
      function
      <kbd>pfun</kbd>
      
    
    with a success continuation that checks whether the predicate value is true
    and goes on to execute either the consequent or the alternative.  If the
    execution of
    
      
      
	<kbd>pfun</kbd>
      
    
    fails, the original failure continuation for
    the
    
      
      
	conditional
      
    
    expression is called.
    <div class='snippet' id='javascript_90_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjw7ZSQDhJRwCv921f9rNmt15oR29Ox1wEDP5Sc51NcPUlM9c1dShqI0x7h8oeiPQaiLdK8hNd5Bj1cUIKBl9m0aovAy4W9spioiMUJ2Z1VZBb978uiGAQQe8URpFJF3RtjdiR89pzj2irjP9ID5UgNiiRdNjSga8S85jHjFiJjh8VEs9dZzxRikCUwviIDpFtCCtOsq4vAsxOifj+RY4liVEq4ogy4p8mgkMzAJRftSBAjCglAMtRgt9mtvQh0JAPlkhZlKTVDGD5kkhaSosr9gDeCLxuwyBOg8SX8GdqdwILAhTOgqdpg8T-850hSPJwJWiLiOjrjsTbj2cFSl1QB2TH5ChsdySaA0t9SBDGClAlTjIdTvxGdSBxClC2dqdED9D5gk8jDPdOl6Y7SnApIiNVN5IrSsIzTo5DTgdOMhdPTahLpmjHob9-QHiFjnjhDZDdSmAgCF9gSdxNCotkd4CdCis9CucDDIzmCvSQEhALCyYrDKjls6DHIbQpRszvtAx91ayOCc8uCSSowERJQ2sTcJ8bx3SbcyybMhJV8ESy4Byz8epQ9oiy5PSeoohaZ7AJ81Aqzk18BXtI56ddQ+wiBkTiREofxxBsohAciTclp8DyzcjezSklpqROZVyz8Ozk1E8cjLotyw8dywx9zDzuJEoPzdp8ASgTBexKhQwjdAgZo7y2sgLRpLzYQsI+dzRTCyjkt6yHIco70Hy3j0LU4F5zRXyw12ycimjuzJIVA8hZAegvMfNgQpc2thy3tPTLtJxKFuNRcnBlFZzDDVsTd1pL1OKSRb1FokK8LOzwclzvhYsAQRLlFt9PBeQuJZShRmE-jdo-TsQAzniXdhVxcscrViKxKJg9KstRNcNURmER8lBBQpRCobAPNrDDkHchclA-dkxyC7KcsoILt4KvB-ceNyxnjvKotfK9j3YogGD5t4LSLUY5dpLslRLkhSBOgSAaA5puJjwAJchb574zpYjkgshqL7hSl1pvN-zCwKK4zHSyqSoKqn8CyLsRC50CAMzHTZErQcy4C8TEDv5nyGA58DUTdHScKkLeqizLcSy6DWLVkKM2rsD3zk1RLay0Lk1YKHzpyGBCj8LdAlrdrhYmLmDUK5qDqSiqKyAaK6qNh6K8suF4KWYjrSyUKJKWY4qSL9tQhqrw4b8zNZwcg0c50yBZ8zJ59RrsoqsyAas6tqQIsoSJthZpqPTRzCDQZsqmBAJg0sMXRobSh6Sq5WEpyobas8aIq4o+d1NONlzt1iaYb1z9r8LIyHrwh4jMVpBMapId0ZxabSb4bfZyjHx2b0tObgaz8s8DtjxMyUyJzvh1sRs8T6YvAb85bHQFbaoohQt-tUdFb+Toc-thimqIqNbJAsT-y1beolbarTbGrUTZYLpjbSkOShDDadbfqnbkyXb1aZK6BYl+hVbtaGZdbWcyxsQNE6B-bPaaoHaH90I4duq8zzbapLaBSkRKdstcyUTGsIx7bvhASDbbbs7A6b886UJpihjQSkzp1eqc7oQpSaBhTE79ig6Ts66G6A6o7oxPLEyni2526k7m7bQu75ie6tg+7WZTN0JG64pfrJ6x649vg6Kza56Q8B7rqGrM7Acjb4pJpzsz4SA0qMqzBUJdR7AJl74F8qrjMfr0IDBAx-rsghy+KWLRzEjbNVi1hMy4aUCRzyKr7Fx7jbBZBgQ+xshZAMNr8b676bhzxtg7CzoxASBQHjYqptoGgahjKt4JAZMNVNsFNdQMGrCsa+zHKYgMt+FDkk5cDDloqCg+SjdqJAHtF3LEGwGi5JNVpGH5VwIiSABIS4KMPsYbI7WuEB2QbmDG0pWEacOROE-olh42TeZIIWuEaRvzIgq4ZRqRvsao5eGE-WKuMzW+1W6B9cZIOBjqUR5B8qNBvC6TWTXBiyp+V8-AQxwMJ+yOTjQhqSUpEh0wZEyoQ5dR1GegTh9tcCByJODhp0bReo1GeGN0PxuOPPKxCRlRvsEMIhnxoR-xhMFY2qdgzjFxyBx0ZgkwAwTx6h7EX1RgzjWJ0AbPepy4QR0hzbZJijSxjs1m2w4PZJVJbYfAZpxJ7exKF+S6OoyahkQwSoKkDXUJsvTBGfYJMkIYc8dxMybaM61GAAHVJKTFV01HXGyEYk2cuh2Zlq5WyFACVsno0CiAAHJwBkT6AlxCg9miADm7noyW0dmV4TmDqdmoxRgb74haFJEkh1Axy-m9Azm7M18q8kYIWoXeoYWV6y4kX3YUX57QX2BN5aZEX0XdBMWV6fACWyYiX56gWLAYh3KFj54Zx1B4NNmfnSXiidn2HSATGChuHgkvmWX3AAXjwTGJA5pEp6wRWmBnMURjmTnMXDB9nDAlAuV18lAOWVmQ1GWmXRR5X1wlX4XmxKXqXaZVWZnaG6XmxxXJWPRrVeXCXUzvwCAsQjgLXwIjXEG1XaGbXWXLhjXzwuWxZLUfWQ1PXNWZasxaYLWkQ4MFtHXhXRWNW81mW+W0idn+UDB9hextFPVLE7nItsg7mkg7mHWmB83QA7mKAaAS3S2+wS27nLwa25paE5A7n4MBXHohXc2m4-a45sg5BhgYHpWvXQ3s3c2b4e2+2DBK2oXyXeohWLWmNDB02w6y8aUijp3aohX0rSAyRe3vJ1N42yjE2k3K0U251N3BrdFs2z2a2UQiA79dQa2qETTczEoa2fNX2H9I5m2vmT3dTpnakL3fQ7m-3r3jBYkosa27BKAyn6Aa2HBdVr27A02YOW3maWWf3vwhhqAuwoss3APMPvM7Aa3xYa37Av3k3dmhXew-g7B0ssRt3x34jX70LZXdJs2qOJEb4z3R2d3zxJ3mPONZ3RXLysO7BPJ-mBO1XY2JWaSsRJ9NXfmj2E2KPJOz36Pd2B2ZX+HjwOgFAqWEdpIZOt2x3vINPyOBan1J7VPjPzwV3NOw0dO9OtK1tL2sRuPx2+PtnUP3ArOePF9vmvO3B22F3O22hNtrP1xrV43MWFPFOyWEaHOfIsNTjKOwMegfOGOoSMXGhYulOoxKP3QhjGO0OEasw7nzw3R1cPOp2JOZnaOjPfP1NbP+PgNJO-21P+392vWYucuWZW2hFWuYgLB2uIvIWQ3U5tOElHOkvGM2vwvTP-PzOP7J7ZvfOmuzq13RoEv9PTjSu-23PvIqvdoNu0iVvx21uYFjuW0gu02Qvw7u2GvIubXoueGeGeu3AWPHwtunOmNJO52-25PcjD23u4u8vJPLHmGkH5v1vvW3WTXwJLHg3iu3BX9FNXFavyvwwgTOvmudJtX3K9WVXYffXMvquZaMfEfFOgfgfLpys-7IdarXRfbQvRtDbRu7XjZsh2qBSLNQ6u2yRDBYkfN86s6rWbTjZRaFCB6eeme7uQ7NjR7Da+q50BqHTufGel3NtHRsn+EJqEbv7n6TDTqZ3KyGbPywBtzGBfzIJ-zCBjyjGnRkT+xFLep8BxZ51CgGqQhy3QANVGwzBIt3DWxPGA+CjnK1qyYHMZB5BlAQ+qxnfLovAJf9e0CWDY8ogBrk-jDU88LNMF4yndzqBrfFw7fYxHfYR4+apXfax3fBfHiXu37Lpf7sBySTQW-pRLTjR2+2-WRu+TdoIGHonfjiB++TH3FzoNnqfTnsAhXwfSviOC2b272KB63G2iPaxX3pFDv+XsAyvEPsgYOC3q2C35-S3P9P2Sezr0GAuyYAAGV6mBNPZmx-h-0NDkWoIAA')">function analyze_conditional(component) {      
    const pfun = analyze(conditional_predicate(component));
    const cfun = analyze(conditional_consequent(component));
    const afun = analyze(conditional_alternative(component));
    return (env, succeed, fail) =>
           pfun(env,
                // success continuation for evaluating 
                // the predicate to obtain pred_value
                (pred_value, fail2) =>
                    is_truthy(pred_value) 
                    ? cfun(env, succeed, fail2)
                    : afun(env, succeed, fail2),
                // failure continuation for evaluating 
                // the predicate		    
                fail);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p19' class='permalink'></a><p>
    Sequences are also handled in the same way as in the previous
    evaluator, except for the machinations in the
    
      
      subfunction
    
    <kbd>sequentially</kbd> that are required for passing the
    continuations. Namely, to sequentially execute <kbd>a</kbd>
    and then <kbd>b</kbd>, we call
    <kbd>a</kbd> with a success continuation that calls
    <kbd>b</kbd>.
    <div class='snippet' id='javascript_90_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5OwUPINgMcyNR0Xb+3czLK67GrtoNGieyzp9-coTPspHdZ0oXXqvhj9C2z5RHUXkdOFRxzlrDJue3dW3t8HHz8Nm9IFNzjLSk6PabAqD5zWw3qUfjRh3idHQ-Tp2G223u3tKEDX6oo4ebAKhT6jBoIOPb7cQ4d3rJ3Y9UGjvJDXzWteU3AlXmv7pDe08uKb83iv1zN6fg7hHkXcuu8s-FunV31TTfT7zp7qyeqB6cBP+ud1fd58OZoVG+BZm8FmSH7+tgjjxk9R9lTX2vqx2TyH3v8fvvn-cjYC-7s093cKMvkPZN1NR-cJvuUO+W2XSv6fgnOfm-n-qjPvg7uRqAVAe4NbNAXDJOHznKOpgXlAQ0O7rVEXvXHLgdseN3mWNiBonQI6EbtZuvghm4Gol3pbgNhZgQf0JtpFrEj5uuG7ibnOmQFQRXiwXQLEvQXHF+AYAAI7BBtysEd5zr2CcHQ60G8FtCbaOjDYZb8IkEeju7j7zCT7P455y4C69TZBCDB4sz4CvaRz066h9hEDSI8gECJTRCxhWH9hJa7T4DizzqFDebSIhAUAzQaqNhmCMEO6cZMaGAH6tgr6R6z7JoOYyDyDKABFVhOFkxeAcFB4T43ZaHhHNpTySGpEaHpE+654KjF5uCaYLwmAhBhgWFWHEi2EGD2HUCOGcYuG1huFMGeEACQ7RtmqM2BZex4dspIBwkoNu+u7aKhiY680I54whnY3BBWnWcspOc6KIrAHqSmQhIhpQ1EaY9w+U4xKBHuaw0Ikiwm1EGxsxKEFAqxlcSREEwSFGUQDG9YAx6qsgEgIxdu8qIIy4koKInh8kKxJ6Mugu7MrxwxKuoxDAQG0BIu0xmx64OWvxOxki7o1IgJuE1qdOb8H80edmRxkgHx1Rw+8xssVcXgWYhJ9usc4xWRkQdx0EWJfRj0Eov2pAveL+GWowuEl2k4Q6EgHyyQsybJ0W0chQ8ySQnJUW8uZgeBFg3YZAnQ4xmuDO1O4EcpNACpVO0w+x4hS6T0EMmE4ELxQx7xEJnxYx7ObBepwpj8hQ2OLJNAaWNp1ewa72BpM6FBDOUhVulpE2wsaRQuK+nS9MjOqRWGRGqm8k8pY8oAzpopBQWE44xReggZue8Gu0TJ4ceB-ofxux7oSp9ec6TA3pNB-o2WzuMWI+RWY+XOAZU+2hM+HS9MxZuR5QyZwyYeiBy29ZjkNoUoO4CegY+6XZ7ZaZOBj0CIkobWSgORDAN4mhBROhZB3RhxKY6WwSM5QgNxcUQuSgZcQZPUUQtMs5uEhheaxh6ephlRkERJhAth8g4g2UQgIBLSOUmRuhf+k5pSS01InMJ5wJeai+cBVwF5d2V55YVRi4iUL5ZM+AJQJgvYlQoYjoVM3hoAX5bWMFqMM5P5K+5oH5wFVwu5Dkb5i0sInkWFoBfO5oo5YaI5WFvRTQSGmQKgeQsgPQXmPmwIUubWC5b2QZPJj4lC3GouTgyiPUQ8PZz6l6IlJIt6ZFFFMCcuh53wsWAIclyiiRugXgwqgoVq0Ju0UkEZCmeGSlaq4uWOVqtFCl1l4WomuGqIzCwJSggoUohUNgHmhRhyIeu50IJYzorlOWUEF2lF2lq5-eYY+ZgVUWwVtJLMUQWerp1lsuC8RR+GylNU40x88lyQpAnQJANAc03Ex4AEuQt898Z0MFyQWQbF9wpS60Hhvm0pFuXB9VJUjVlZJJpBup34BAJZ644WTuQ+NJVp34J54EQ63ed6P5I1fpXuGRaZBFo0fVrZyVwsUuXZS1YaGFM1J5kBhFugQFB1wsvFue+FkRx1bgNVZA7FbVGwXFeWXCoV7sp1qZ1FAFSlqVH1bg2BoQTF5e0OpS6Es4OQaO7BW5E1BqM51BBgd6VWZANWdW1IEWKiNZj481i5jZn8ugUY0ggEwaWGLoiNpQ3JuJ4QrCZcRNtWJNcV4QOllqtN7gR526CN1NUpZ5hFgZz1VwH+mKeN6WUkO6M4rNSNmJy8PU3o-NBNWwKRDA7uDQ45WZMNBZfp0I62I24x9MXgeB6txBqOF0UQoW-2+tDMLVgNkpmttUhtBJZpRJltvU2tMNppeu5pxJjWEYBt3wveteVZHoWtZtrOpSIpamJtmVqlPBhBR29ttUjtrVroshRBo2vttJ1tSIlO5Zw1odMdAdJ2qu6EcOA+SOnV7tftVt3wcJFxWdNUsdgNFd5A64ddWxuZKJ06NJnt0I6pCp0d1dOdF48pipVdTN0YyY2x-x+Zg9dNvd-ZkIo9eZohyd7dkgZm3dcUeBy9E95MpmDVD1btgOtNNdgdnFdtG9ugWVk052Z8JA+VhVZgqEuo9gEy983ehY-1uB6EdRxBEW85+R-Fi1y5QkzEaw3eIN2QagGNv9jFxm4c-8vxtgsgwIfY2QsgGGMp79gYTGQw542w6+Z0YgJASDxsVU20DQNQyV0msmm2JlHmIBy+EEUkpSHlMQShoihyScNDhyiVIait3W0E1EcD2iSgiDyDRckmq0-D8q4EZctQ7RlwUYfYihm2wcQMQjnl-NcI04ci2NYgm6gj+DsgPcyQajsIGjfmZN7gRjGjyBy8us54WjbgZmH9zYNwWDyQODHUKjJ0oAJDH15DGqlD9lT8o5+ADjgYP9kcQRYe0tDDCj-Ca+L59A4j7a4EDkYeCTTo2i6BZM8Mbopgij6ChjTAgE6jfYIYUTChTDVhlQmTvUmBRhYAITjoue5RQRHD2IvqrpnG1TXjyCbg8jFTccSjBlu0Kj7ZvNXSZjo0ySqS2w+AfTuTVM2SL8l0aBaNDIhglQVIDdiTctmC38xAvDzjMQ4E20l1qMAAOsxUmMIZqOuKAzZqc6NBc4A2YFytkKANrcDRoFEAAOTgBWH0BLiFBXNEA3PfO1B-4XMrwPPHUXNRijDv3xC0KSJJDqD3PQt6BPN4lrmU2ovou9SYuT1lx4vuwEtD1IvsCby0y4vEu6CkuT0+A0tkx0tD3wsWAxCCO7HzwzjqDpmXWQuMvQEXOiOkCHMFCSPBLgsCvhCwvHiHMSBzSJT1gKtMDOYoiMTQukuGDXOGBKBcphLNgiuYMhq8t8uijavrh6ulwbmsvsu0yGubMFD7qczKuquqGo3uCkt7NYhHAuvgR2v4NGuOuSvAWkv2vnhitiyWphtcPEuau6SWK0wutIhwYLbevyuKsmvJr8tSsQuzp6mRb7C9jaKeqWLfMFvfNJDfM2FMAVugDfPeG1t1t9i1vfOXgttzS0JyDfPwYyuPRysFtNx8FkhyDDBYPqtwFxuPhZhluGDZA3zZAjveSNvovMt6FGvpsqvBEGCFuR2eQTucZysFWkDDujvrjusHXZs5uVoXPfxHsMAlu+jfN3stsohEDK66gttUKOnO6JQts+Z-uq6RzduSs3tzobO1K6KlvgcvvGCxJRYtt2CUDlH0AtsOC6ovt2Dbsoc9vc1Sugd6lDDUBdhRYPtbDfOEfeZ2Atviwtv2DAe5tRhyu9h-B2DpZYgnveQf7-37vPMUrfPMcSI3x3vzuLvnjLshsHvrsus4VEd2B7sXuSebMbv1h3sYnBsKdQtXt5q9tCLrt3scdjtounOktwsJJssI7SR7nscLunvjtQGrurnZTA36c2feQ0oasgEdAKDmdGWMbTvCeudifudMu4fhAueiew25uXX9uzuDtyFxyBdnuYluCkuadache8dec+fhmMZMdgY9DhenvqaZu7SXvpcwI6dfBMfugXF2d4uTsMjTvnhuj13if1eKcaSFecf7owsde8QxAWAGdJfqf7tpflcsyVc8hyvgdDdcexuyPHhZeO6WczeJd1dRdXDejL2rcRfBfGeedmfLdEZKDTvgcientteXQOegE7ent7dhrXd-4xfbtxeJ2zfWomupedHjcpd+lLcWfHdyvSfgdqf2eNA-cVeXNysqO6MEPrf7duDRsRt4MEMjd4c9XGzNfGxmTVctelDIEPNxvmuCNWtIxI-nsee8dY9o-pdlcQ+XTlZQPdZO2N0N1XEnpFxgznHmEoXKD2CTCLGOfgPT5+6YogH2DXYwUzkQFeVbUwJ+Uj3fbw5VihWSVaHS85heWhVRDmZ1kLX0V5q9FuD+w43HiDMwOAjFBRaWykCk0S2Tj6tKCImAjbmXQ6U-GAgPFPQhx13UC8-fEWyW-c20zO9bkqJrW2KWqh+2+o09N6B7O2+Q1AxTVXTXFqEO+k9iQx9aVuDozzAfKcMFD0wBToKjox9ctZ9y0Wgskmg1-SgnfGj191+sjN8zm8NpPwNjH7MJdGvuLnQnP09XfYDQ96NbDTs0eVuvvvsUDtudvUe1h-vSKXfSvYD8eYfZAoeVvNuVsT91t65AcU-HWkOhfuwAAM31YaaV0BV-7sN-VwHItQQAA')">function analyze_sequence(stmts) {
    function sequentially(a, b) {
        return (env, succeed, fail) => 
                   a(env, 
                     (a_value, fail2) =>
                        is_return_value(a_value)
                        ? succeed(a_value, fail2)
                        : b(env, succeed, fail2),
                     fail);
    }
    function loop(first_fun, rest_funs) {
        return is_null(rest_funs)
               ? first_fun
               : loop(sequentially(first_fun,
                          head(rest_funs)),
                      tail(rest_funs));
    }
    const funs = map(analyze, stmts);
    return is_null(funs) 
           ? env => undefined
           : loop(head(funs), tail(funs));
}
</pre></div></div>
  </p></div>

  
      <div class='permalink'>
        <a name='h5' class='permalink'></a><h2>
    
    
      
	
	Declarations
      
      and assignments
    
  </h2></div>

  <div class='permalink'>
<a name='p20' class='permalink'></a><p>
    
      
      Declarations
    
    are another case where we must go to some trouble to
    manage the continuations, because it is necessary to evaluate the
    
      
      
	declaration-value expression before actually declaring the new name.
      
    
    To accomplish this, the
    
      
      declaration-value
    
    execution
    
      
      function
      <kbd>vfun</kbd>
      
    
    is called with the environment, a success continuation, and the
    failure continuation.  If the execution of
    
      
      
	<kbd>vfun</kbd>
      
    
    succeeds, obtaining a value <kbd>val</kbd> for the
    
      
      
	declared name, the name is declared and the success is propagated:
      
    
    <div class='snippet' id='javascript_90_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAv0p0Xo7yVR0Xb+3dmd36fjRonss6ff3KEz7KR3WcTc39Rx3cEdItcsnBUcOcK81grc7sU87dVkepf9SApt647pPdvdMVNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4fo6dLp1JH4aN3dE5HRaCHdbZk96wk5Y9dp1MPkcC3A8C5RCCW16C38mDvsaCeDRDRoSD3dyMZDFD3BrYlC4ZJw+c5R1M6ClCGhoDaoGg+9M9ENDtesTtXRYl+hHRP9rMBDbNSc51sg-8F8LNsQNE6BNtItYkfN1woDv850yAnCACBsXCLC2hNsvw9cO9rCPRoDv57BAjTCfC6BQj3C45HRhsMt+FoiVE6crtE8bt4Cigo9+ckDRpHDUDE9ON8BXtI56ddQ+wiBpEeQCBEpohYwmj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzBPD3dOMmNDBSDWxMDOlY8HMZB5BlAJiqwujB5QwhA4CbdiiY9k0oh4iKj5gk9Cj5i+89BNMF4TAQgwwGimjiRWiDB2jqBOiqiwBejPCBj7gABIH4uwy6IwpoJDMwO2UkA4SUAoPIGwDHbRbIoudeaEdvTsJIgrTrcvZ-CgZfcCZE9XaiNMe4fKbI7Qi3SvITXeXE0oFCLEk9CjLwMuFvbKYqIjFCdmdVWQCQKErsWE+VEEHvFEQY+STXE9EfPaNkiEzk6Enk9tIDJQkXSk9cQfAUwk90akYU4fHIv2XWc8T+UktfSQLkmE4YGRVHKuLwLMQ06UmOSmbI5tOPCCYJKfYE3PJkGgNLUgBgqgaOQoJQDLUYLfZrb0IdCQD5ZIWZD0t-QoeZJIP0qLK-f-RIgUbsMgToeE5rMnancCCwZMzoKnaYYk6fOdZMjyHE8Ujky0403k9nPwpdUACMx+QobHCUX7esr04Nd7CGYyGs78RnUgcCZw6sibYWfIoXT3BY0aXspwKSIjVTeSYszCJIVs70goLCccC43QUc4o+DXaYw48G-f0ZUyRd0NMws2spgBI6HGvZMMApHGLSzeLXIrnEczgscn3YubYyolmDAvY5bTgxyG0KUHcZgwMfdDQ0Urcg7Y8BESUNrE3CfG8U43YuXGzISVfFMdLavI4svHqUPQo304JMcnqKIWmLC3CNAytaosPWou4yCB47iVo+QcQbKIQaQk3JaeYt8ltaC0pJaakTmUi8CsNT81Q8ISiu7ai8se4xcRKaQy6fAEoEwXsSoUMI3QIGabitrWS3gtrT3c0TikSuqP8hyHKO9XiwSgyvnc0dc5NMC6ynOfbXcx6LIPIWQHoLzHzYEKXHSgopCp7QMycShbjUXJwZRHCny8PZ9S9IKkkW9RaWETyF3OXIi74WLAEGK5RDY0ARvNVQUK1WU3aac7EWc48xKtVcXLHK1OyuKiYUqriYqtuZREfJQQUKUQqGwDzH8+3d2IXJQP3a877FqnLKCC7LSrKmA+0VsMsN0NuQaqLYau092KIffdsqq2XVPEfJKmqcaY+WK5IUgToEgGgOabiY8ACXIW+e+M6Hg5IZysgVy0pdab4vEeMm-dyuik8twGfC8wA8LRHKLZHSA+8orbs42UiufA1E3IIxfWC3wocnYt7V80o1GAgD8k42PWKsC-SsNDS3iuCzfBQgy3QYSwmti+K3S8cwm5QlQFy+4B6kqJ6vLLhUalmbyzcyy8ysmWy2PTPUIZ0vcqG0pdCWcHINHfw2fMyefKGu9KrMgGrOrakCLTUtC4ck48KhAkorpZrNwKMaQQCYNLDF0OW0oAMquVhMuQ22rY2hauKPndTTjYi7dWWy2uM8iwm0c5m8IPgzFXW9LKSHdGcJ2+W61Ek0AbPdwb0H2-WrYAIs-LPSCx6Zwx-fyx8aEdbEbbI+mLwG-NOqw002qKIULf7PO3qLOgW2MjO-O74Cs964u2qUuxM6uk0oGj0C6AuyQT0+-Y82umqeu6HW-R+B-ZuhatuqalIo7CukuhMvu8wtw8e7u+01OynbLf6u8tE2WTOqe1nJEJev6iAieq4EehU-enuzepXSIlElCc+vEw8okqA1u74bMmgFM4+uKG-R+5++eyIaMa8m+ruoeje-cn+gko8tuT+8mUzIWsBtwXureszF+r+0zR6jylHf+hmU+typBmu1Bra+KSac7M+EgA6o60EhQXUewCZe+BfQsPmhO9CZ4qwiLBCtWoo5C2w1CuzNYZwxW+G9W+MpvaiWwWQYEPsbIWQDDa-OhwMJjIYc8bYHAs6MQEgUR42KqbaBoGoVa6TWTTbBTXUVa78qO0pdqmITI0RQ5bgsNL2rpZakNeO8OI3ARp0OEkRsRouSTVaQR7RcCMuWoH4y4KMPsDIzbPPXqpR2QbmJgQCOEacORXUsQTdUJ5RnuZIH26JvsPzLWq4VJ2EGJrQ5ebU-WKuMzeh5sG4WR5IeRjqFxlR8qdR8CrRjVHR0TXDDzd47KSRx0cKyOKYpOCCKSIxoJ-hQ5TJ1GegTx+VcCByXpsZpx+VPQsmeGN0UwYJ9BFJyJ0pHJ9JmM-p9IkxpoyoeZ3qAwtp4pwMYom4qYw5Gxw-FmQ50O5BNwQJvZuOEJijap9cqxuJ0aZJVJbYfAJ55ZqmbJF+S6XQx8x8QwSoKkDXcZ9tVROdYgaCMkGRmIcCbaSmsmAAHRBKTFV01HXGyEYgxdRmxeVq5WyDGrgY0CiAAHJwAmj6AlxChcWiB8WaXahRDsWV5iWMXsWoxRg6H4haFJEkh1AUKeW3BSWOH0LzaxWJXRopWQ8HTwl5X3ZFWF7CSe5aY5XVW9B1WlWfBdWWZ9X7SBWLAYherCT54Zx1BtzeXGgjXVDsX3HSAynmWzIfHHWao+Xjw3WJA5pEp6wA2mBnMUQiWeX1XDA8XDAlAuV18lBXWUWCgciJXI3Ij8XY3vhzazWLXaZE3oXk3rXmxg3Q2YiU3JXTzvwWiAQS3wI82lGk27WnXLh83zwChwJOZW3bHdW03HwsxaYS2kQ4MFssQjgS2m3k0uWvXFDsX+UDB9hewvHdFLEaXItsgaWkgaWWimAN3QAaXhjd292+xd2aXLwT25paE5AaX4MfXHo-W12m5LC45sg5BhhZHw2lDe2GQsxV3DBsgb4X232DBD35WTXeo-WS3pj53H25maUZ3OM-XDrSAyRX3vJ1MJ3P2HXp3OXZ1aykOGBPUV38OT2UQiAoTdQT2qE3T-rEoT2fM6OYTI5r2OXQBZ250oXall3fQaWOOSPjBYkosT27BKAbj6AT2HBdUSO7B52xOb2PavW2PayhhqAuwotCPuPlPvM7AT3xYT37BmOcOow-Xew-g7B0ssQUOgO+C2Hm3laf2TOJEb58OAPUPzwQORKwPaoIPA22KVO7BPJKbPPKMUX-WfP8PJ9iWp3sOW1b2hEQv8PLO0OP2I3-HjwOgFBzWEdpJfSLPAPvJkucO1DWshaEu8vzw4OUuw10vMvCq1siOsQXOgP3OSX5P3BSvXPF8YvWu3B72-2YPUjEv33g6K23BuXou1WhzqufIsMWTjOwMeh2urPy2sWsPxvJ2cXjP3QL6CvU2hz7Otv1dmvQOEP4vcuOv1MKuPOTvoWAwYgLBBv1xluruxu1uYFYuvg-WOOHvrOe3UvHopusuWSvuyuExxXCurhvQ4HgeOvLv7WquEkauZvGMf2OPGvvIjvdogvRDoegPYe3vuu9BevoPF2wjn3zvrUm31WGg-jXv3Av21gAfavpGbvIOOOIuZCovaeJujOQvqnEnXGbPKu9Au322zJqmWPxv1Xn9FNXEbvzxpqqSMOru6Ro31x42RenvIuhz5eKAJeufOeueyZytjN7GBbG7V7GsbDK3jYX9QBzf+RY4CzPr2Pvrgj7eJrSxl697YblaeGWGntMV8MUCpy0bLHenMbsDZKO7rSjJmCaD3IbA2CW0OC8Lrn5iQ7Rpjmw0gTcBmyTQ8-pQlAC-WRi+i-jRC+HGZmhGZTEXn2UX3Fzp0XDeWu-W+ef3dPN3SPyOKBz3L2dPaw6PpEMe6fsAaX6BpPsgxPN3j3N2O+93uSmPNeDKNGCfUYAAGDm92NPD27fmBXfmqDkWoIAA')">function analyze_declaration(component) {
    const symbol = declaration_symbol(component);
    const vfun = analyze(declaration_value_expression(component));
    return (env, succeed, fail) => 
              vfun(env,
                   (val, fail2) => {
                       assign_symbol_value(symbol, val, env);
                       return succeed(undefined, fail2);
                   },
                   fail);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p21' class='permalink'></a><p>
    
    Assignments are more interesting.  This is the first place where we
    really use the continuations, rather than just passing them around.
    The execution
    
      
      function
    
    for assignments starts out like the one for
    
      
      declarations.
    
    It first attempts
    to obtain the new value to be assigned to the
    
      
      name.
    
    If this evaluation of
    
      
      <kbd>vfun</kbd>
      
    fails, the assignment fails.
  </p></div>

  <div class='permalink'>
<a name='p22' class='permalink'></a><p>
    If
    
      
      <kbd>vfun</kbd>
      
    succeeds, however, and we go on to make the assignment, we must consider the
    possibility that this branch of the computation might later fail, which will
    require us to backtrack out of the assignment.  Thus, we must arrange to
    undo the assignment as part of the backtracking  process.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
  </p></div>

  <div class='permalink'>
<a name='p23' class='permalink'></a><p>
    This is accomplished by giving
    
      
      <kbd>vfun</kbd>
      
    a success continuation (marked with the comment <QUOTE>*1*</QUOTE> below)
    that saves the old value of the variable before assigning the new value to
    the variable and proceeding from the assignment.  The failure continuation
    that is passed along with the value of the assignment (marked with the
    comment <QUOTE>*2*</QUOTE> below) restores the old value of the variable
    before continuing the failure. That is, a successful assignment provides a
    failure continuation that will intercept a subsequent failure; whatever
    failure would otherwise have called <kbd>fail2</kbd> calls
    this
    
      
      function
    
    instead, to undo the assignment before actually calling
    <kbd>fail2</kbd>.
    <div class='snippet' id='javascript_90_11_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTtXRYl+hHRf9rNNBwhp851sggCF8LNsQNE6BNtItYkfN1wED-850yApCQCBsZCBC2hNsvw9cO9hCPREDv57BNDeCVC6BdD5C45HRhsMt+FjCVE6crtE8btUCmC5cfdapJDsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxIj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzBFD3dOMmNDAjhI8+cCCOlY8HMZB5BlB8iqxEjB5QwhAUCbdmCY9k0ohzD-D5gk9PD8CR9dBNMF4TAQgwxwjIjiQYiDA4jqAEjAiwAUjFD0j7gABIFY2zVGTPbg48O2UkA4SUcAr-dtZwoudeaEdvTsKwgrTrcvV-CgZfcCC49XaiNMe4fKZw6guzNfSQSRYTaiQwy4lCe4k9CjLwMuFvbKYqIjFCdmdVWQW-e-I4hgEEHvFEDI+STXE9AY2qXYuEg4xEyA+VIDFtNwEXJ40oGvEvF49E90akTE4fFwv2XWc8T+C3SvBEz-QklHSzWWKuLwLMQ4rkmOSmZw5tOPCCYJKfJoJDMwCUX7UgEgqgaOQoJQDLUYLfZrb0IdCQD5ZIWZBU6LZUgoeZJINUqLK-YAywgUbsMgToE45rMnancCCwG0zoKnaYD48QpdJ6CGTCR42E-YjkiAiY5E9nNQ70g0x+QobHOUmgNLSMpUxgpQG0mGcM78RnUgcCaQsMibYWdwoXT3TpemDMpwKSIjVTeSFMzCJIBMo0rCccDg3QAs5g+DXabYx6G-f0NEt490e0r078JgCw6HSkncGApHGLHkorVwrnfMugwsnwuGZogIlmPAto5bOgxyG0KUUc77QMfdMo7ErY6UqMBESUNrE3CfG8Xo1o7w0QhDVfFMdLavLosvHqUPTw1U4JQsnqKIWmF83CHAytIIsPEIsYyCEMwgGI+QcQbKIQWPYZHKfohcytU80pJaakTmf87EsNZckk3qYCu7UC8scYxcRKeC1GfAEoEwXsSoUMI3QIGaVCtrciy6E3dCz3c0ZCvCnEjchyRCxaWETyFikkvnc0Rs5NA88Szg8HA7SSFQPIWQHoLzHzYEKXNra8t7eczUycShbjUXJwZRN8jw1bE3daS9PSkkW9ASoSmBOXH874WLAESy5RBo0ARvNVQUK1Yk3aMs7ECs3sl3YVcXLHK1KS6ysK8LUTXDVEZhEfJQQUKUQqGwDzNc+3d2IXJQP3ZMcghKnLKCC7YStypA+0VsMsN0NuXKqLfKsU92KIBg+bQqyS-DOymqcaY+Ky5IUgToEgGgOabiY8ACXIW+e+M6eC5ILIBS+4UpdaZYvEC0m-ZSkMvstwGfIc0A8LRHKLZHeAyckwtM42f8ufA1E3LQxfc81Q3MlozSlsri0HJcno2PKyg82692Ji9Ci8zfcjbi+WB6768INiwSjiosv62qCasgRS6akqWavLLhQqlmdS4y660S7ClmJqiS-bUIY848Ba9CWcHINHdQ2fMyefU6u9KrMgGrOrakCLRkh8vMnoxGtA-nQg0GAapgQCYNLDF0Sm0oDUquVhMubm2rXmmquKPndTTjX87dCm4W80wCkGpsucuG-6w5aQDmqSHdGcGWqm61T43QbPdwb0NW9LDWjQs-LPWSjs065ar4x89bEbZw+mLwG-e2oQ1HC6KIULf7d2hmS06HP7K4xrCMD274QUpan23qZ206oMpEx22qT2yQRU6OeSCO2qKOq0pOtTVO1maEfguQo7OOyOv21nMqmwgu7O8U6EB-dCOHMcraic643k32l2ynbLeu7kxu4O+O74ckwOwHUWoqm-XulCAE547syRWk0UkO6EF0mgW0wutO4uk7We+eiuyIaMbK8elO3age9O-2rs14ietuNe8mUzXGk+twPekuszBenOxOmalSjuoOj0J2pepSh+8OnekO7JYws+Egbq3qswVCXUewCZe+BfQsLGjs9CaYoQiLK8xmrwp7O8jY4qt+vG7INQK6pmi0pvaiWwWQYEPsbIWQDDa-GBwMJjIYc8bYUQs6MQEgEh42KqbaBoGoMKreCQGTDVTbBTXUDh1czms85KmIRw0RQ5JOXAw5eqgoea6CfBp0bRTKxh0houSTVaAh7RcCMuWoFYy4KMPsBwzbPPZRph7mdm0pWEacORVksQTdUx2QHuZIY2uEaxvzIgq4FxqxvsdTPW0AN+D+Dx8IMzWB5sG4Gh5IOhjqYhxxlh-x9hzjaTWTXhqKp+cS-AEJwMRGyOQopOCCKSUpER0wSIyoQ5IJy6egTR+VcCByPJypxR+VVgsmeGN0YpuOEx5xix1xvsEMIRwpox-hJp3qdg+Y7KChx0ZgkYwo6R7EX1RgzjIZ-x5BNwQx0R4x9BCjGJjzCjdTD5cp0aZJVJbYfAVZtp+KOIF+S6BoRA70QwSoKkDXKp9tVROdYgeR8JmIcCbaBW92AAHRlKTFV01HXEwZsx+dRn+bpq5WyEHtxo0CiAAHJwBIj6AlxChAWiBgWEXagST-mV5wWCXdB-moxRgYH4haFJEkh1AwXCX3BIXbbvhBbqXaXdp6WQ8JTwkWWYE2XK63ie5aZmWuW3AeX2WfAhW-mcYohSWLAYhMq3j54Zx1BWyCW8XxWQb-n1HSAPmChtHJS1XapiXjwPmJA5pEp6xTWmBnMURGIWWeXDAgXDAlAuV18lAtXqGQ1lWVXRQHX1xnWq8kZpXZXaY3WHnZGFXmwLWrWTCXC6X+zjZoiARI3wJg3GH3XZGcWFaeWQ3zwdWxZLVs2Q0M2uW7XdJLFaZI2kQ4MFssQjhI3PXk1VX9XuL-n+UDB9hewtHdFLEEXItsgEWkgEXoimB+3QAEWsiR3R2+wR2EXLxp25paE5AEX4NDXHpjXe2m5BC45sg5BhgaGbW-qS3Hwswe3DBsgb5t3d2DAJ3i3ONjXI2ii22N3GmaVm3b33X0ssQyQd3vJ1N63vrG2m3cXZ1vSerN9PVu3QOSBp2UQiA79dRp2qE4ytrEpp2fNUOH9I4l2M2W2517naku3fQEW8PoPjBYkotp27BKARj6Bp2HBdVoO7A22aPl3lam2cPvShhqAuwotwPCPOPvM7Bp3xZp37AsOgOoxjXew-g7AP3SAv3L3dmUH1Xczj2pOJEb5IPz3v3zxr3lPgN3373+PuPPJwWRXRo72zXVSsRJ9CWAPAPK0V2hF33IP5Of393bX9HjwOgFAZWEdpIrO5OL3vJ3O8KzO2S1gb6XOgvzwX3aWwvdpvPfPfK1sIOsQtPL3dOIXWP3AovtPF8W14u8K13T2n3bDXO93dbhWmT7Ow1D2GREufIsNoTJOwMehcuFOY2WY7OavauAXJP3RASQub26bVOBv1dMvhuyZjX2u3PYu9Opv328Pyv1xOvM3GgeuHO+vFuYgLBlvFPxWeWSWEkkumvGMlvouEwaWgO4ZJwb7zu8u5uvWw0Gu-PoTj28P0vvIJvWXsu3B7vL3HvuXfu9BivH2O29Ct28vf3VvQAeWGg1iNvwg6u1gXvkuqGHmTXLO8ObPQv1vEfeuJP32tmHGLslOPO3AC3c2GGmGi2aueXX9FNXEMfzxyqKS-35vOcfXMr-XmxKeYfbPcyWeKBaf8fuv8fUZytjNw4FrDSs6d6X85038H5EzRwf9ac43sI1rtDM7Vf4w664DRTpzLdZy+ibrVkeosDSzfrdpVznrCCKKwBZleBZkHdv5bASjWxPUPsVMvsvpY4qCHdM6yDvt-f3IbAA-3ZaCPzJHwXdn7e3B8BZk5QXeWWg-feE5-fge8L3f3cvrxf3BrZaXvQyjfGs-rm-H3ARnLojzcA5STQ6-pRkzjRG+G-WRW+Td5H6nCHji3mt33X3Fzpvn8+svjXifj3hOB2YO4OKA52F2hPaxUPpFvvY2EX6BGPsgaOB2p2B2J-R3P9MP+eFaEmauAAGFGmBNPZWy-i-0NDkWoIAA')">function analyze_assignment(component) {
    const symbol = assignment_symbol(component);
    const vfun = analyze(assignment_value_expression(component));
    return (env, succeed, fail) =>
        vfun(env,
             (val, fail2) => {              // *1*
                 const old_value = lookup_symbol_value(symbol, env);
                 assign_symbol_value(symbol, val, env);
                 return succeed(val,
                                () => {     // *2*
                                    assign_symbol_value(symbol,
                                                        old_value, 
                                                        env);
                                    return fail2();
                                });
             },
             fail);
}
</pre></div></div>
  </p></div>

  
    
    
      
      <div class='permalink'>
        <a name='h6' class='permalink'></a><h2>
    
	Return statements and blocks
      </h2></div>

      <div class='permalink'>
<a name='p24' class='permalink'></a><p>
	Analyzing return statements is straightforward. The execution
	function applies the execution function that results from
	analyzing the return expression to a success continuation that
	calls the original success continuation with the return value
	wrapped in a return value object.
	<div class='snippet' id='javascript_90_12_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmZi3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLE0wltEi0pJaakTmXimM5NF4soq4QSu7YS8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaZStrUyuItrT3c0RSnSuqOgpjNxOS2EO9VSzSjy5g80Jk5NSowK9wGU4zcOLIPIWQHoLzHzYEKXFy6Ct7e4y7ScShbjUXJwZRVitKwc59S9HKkkW9RaWETyF3OXLi74WLAEMq5RYk0ARvNVQUK1FM3aJC7EFC90TqsmYVcXLHK1UKgjVS0a3kLiXqtuZREfMC6YKUQqGwDzSk+3d2IXJQP3ZMcgwURaqCC7JylqpA+0VsMsN0NuXanLfa1slmKIBg+bQ68KjgmqmqcaY+cq5IUgToEgGgOabiY8ACXIW+e+M6WI5IWKsgeK0pdaUUvEFcm-RKxs7cs878AgfY6HWRK0TQqLZHeA6s7YgC42XiufA1E3RY-yyqls64y3W4ugjKuCgask7SsNcq8K9ysNBy1S8izfQooK98CasmXyrCPnNyhmvmtwCGqGxGyDIvQ6lmVKvCkWiKga1PZW-C2oUILsloxY0pdCWcHINHOY2fMyefcm7KKrMgGrOrakCLAs+i4WWmhk-ChI0GAGpgQCYNLDF0K20oUcquVhMub22rX2m6kPZg9TTjbi7dS24O5c-ijyu4uW8IeIzFaQD2qSHdGcGO6261G00AbPdwb0NO9LDO+Ys-LPA7bWg45G+26EdbEbS4+mLwG-euzo1HC6KIULf7duhmVc6HP7XUxrGs2qTu8soMysvGvU2WJuvu1nBMiApGnu1674QIoQ-G0O5unW1evqpeq4Ues6lYsY0bdeme1o5Y0Yo7Ruke74B-dCOHbGuAq+3qTetc2+iwe+7LHG7Qqe4e5erUjYnUp+2qF+-u9MlCABs0rMyRHMlsju74A8mgTcoBmqEBuehBpB3e1mLancc0iMnek+3um-f0KBten+j0OB0zPWzBuKBGqhghv+yQaW7+oe8hwhremGpKqssh1st6yac7M+Egb636+UhQXUewCZe+BfQsLWx6MzXkzoiLSiwq4wmi8ICbWe5Q228k9K9Woi8OJvaiWwWQYEPsbIWQDDa-dCeR5sG4c8bYOws6MQEgMx42KqbaBoGoAW6TWTTbBTXUAWqwz20i5amIc40RQ5JOXAw5e6goeG6CQxp0e80x8xouSTVaIx7RcCMuWoMUy4KMPsM4zbPPTa5x2Qbmd20pWEacOREssQTdEplxnuZIYuuEapvzIgq4Fpqpvsao5eIs-WKuORwMbyqkdcZIBxjqZJ1x8qDxzS7xjVXx0TXDDzQU82iwaxtKyOVEpOCCKSUpEJ0wX4yoQ5Dp1GegDJ+VcCByHZ85xJ+Veo1GeGN0Q5uOYp5pip1pvsEMIJ-Zwp-hB52qdg1ZoZx0Zgtk1E6J7EX1RgzjAFgugugp0Jop9BCjKZpklO2w4PZJVJbYfARFl5+KOIF+S6Oo6mhkQwSoUZlCC59tVROdYgeJ2xmIcCbacW1GAAHTlKTFV01HXGyEYjZcuk5ftq5WyCOrM3iKiAAHJwBfj6AlxChuWiBeWpWNaW1OWV5BW+bOWoxRgrH4haFJEkh1AbMtW3BhW7MyzGKkYTWzXeoLWw6y47X3YHW48xBLSe5aZbXnXdBXWw6fAfWyY-W3W9X1mDXLT54Zx1ACLxaNXA3ijOW0nSAmWCgsmOz42rgdXjwmWJA5pEp6w82mBnMUQBXBXXXDAeXDAlAuV18lBk2hhzxYmY3Y3RRK31wa2q8kZQ2YglBaZ63RnYnI3mxC3i3tirj3BXWZ8sQjgR3wI+3nGG2Q01WdLXX+3G3wJOY12l3nXy3dJLFaYR2kQ4MFtp3c383m3k042M20jOX+UDB9hexMndFLEpXItsgpWkgpX-imAP3QApW4Tf2-2+xf2pXLwQO5paE5ApX4Ms3Hoc232m5jiyQ5Bhg7HS2E31GsxX3DBsgb5sgUPvJAOzXg3eoc2R20T73EP7maUiiSPaoc2frSBkPUP1xx2gqr3r3K1b251GOGBPUX3eOQOUQiA79dQQOqFeycbEoQOfMZOH9I5oO1XuPzzKXaln3fQpXVOhPjBYkosQO7BKA2T6AQOHBdUhO7B73jOYOk743lPvwhhqAuwot+ONOHPvM7AQPxYQP7BFOb2uWc3ew-g7B0ssRmPvJ4jaKyjd3HwsPAuJEb5eO8OCPzwiOV3OMyP825LHO7BPJtX0vF2z2i2hysRJ82WOPOPL3-OCveOwu0PTWy28njwOgFB1mEdpJiumP8OWP0Pci6PvQJWauuvvIaOGuw1mvWvuq1sBOsQkuWPUuOWbP3BBvkvF91XFu3B4OcOqOj7avWPc7zXCyKuXX1HxufIsMfSAuwMehluWP1ML3dpyujvjuowAv3RAGeviPMOX3zxzrSh5vPvgNqvQuhu0ORu0vAfRmAwYgLBdu7vl20vNWnuYFYOhECvVPYePuW23BdWEkJvzvGN0eQeEx6u-PyjWs9bCeVuweseYFTu2ufSsPVPZvCPqeHv1u9BKeWPWfjvxbNvKPH3Vi44ie7u2PfW-YJSkeDv7a6fJuRmNJyPVPSvevGhJfkeqvIepmGmUnIvRu9At3U2zIpn4fr3J250fvjYzJXvfvWPjePLd223NrO3mx9fRfdfSz5T3RbejvHvVfdpytorusdbiGLToG25hCUbjYmB0bQD-RP7H6Zj1HtG0D+cxbi4ma6TtnKDVrMUNqRd-d1xAx90nrOMorsAPyTRy-pRfzjQq-K-WQ6+Td4nbnjG1SGWhfF33FzpWXfehXsAc3NesOvPP3hPROKBwPIPPPawZPpF-vwhOWpX6ALPshjPP3gPP2h+-3P8FPXegrPH2fUYAAGNWlmNPJO0-mBc-mqDkWoIAA')">function analyze_return_statement(component) {
    const rfun = analyze(return_expression(component));
    return (env, succeed, fail) =>
           rfun(env,
                (val, fail2) => succeed(make_return_value(val), fail2),
                fail);
}
</pre></div></div>
	The execution function for blocks calls the body's execution
	function on an extended environment, without changing success or
	failure continuations.
	<div class='snippet' id='javascript_90_13_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChsDMBXAOwGMAXASwHsjQAbCgZzIH0q8XiBDRxigcyIBTACYAKIlwC2QxgEpQAb2yhVoAE5CyBdbSlcADmJagAvAD5QAIgBU3XgOEibVgDShJM+QG5sAX1wQUEJSShpGYPUqKQgYeCRUNABGHHxicmpaJhYydQIyAAsATzEADwVlNQ0tHSzGFgAjKio6IS4iMoUVKp7QAH5QUrNTU1BcgiFQbt61AC5QIXUo9TL3KyaWttohUoMhclF3TRIhCgA3UVmrOV8AtNDM0H0AayEWEIyaMQMudWktRaMdxNERFdxCIhnCrTaraXT0JhkMRWEjRAxUYgid7pMJENwwmY9H5-GRkQHAqig8GQm7+e6fOosVFSdGY7EPL54aFVTRwxlkLj8fiiFgMZhiPBrZmsohYj64663em44I4zIsYn-MnqRgS7lqXm1BHMFiaPAS9xJWkBeWPW00RqUkpcpQww3wsWsM0W0AAJmtyrtaodELOFCiRBkRCRLsqBpqHsRpqE5sloAwAcDNCeXFeyb5LDOXDoEzEqOjELI+tU7tonuRtcLxYmblA5bJ0YD9sZjaLJaEYj7E2rsKN2QFQpF9aHQjWvebQkVdO7o90Tf7TJoHaRM5HtdABTa4gFFDog4XckzK4hJDoVD4RH4LFD4ZoUaRob3CdoJ7Pn6VK54OGJp4CSA6fq6PLfgeR5iP+y7BtspB3owbwNM6YHUlCShVG60E-OGEqYQsNJKuWzBjIez4smQRTPpCr6RpWZgeAQdB0L4WZ6Lmbygf8YiMEUUhNHQQKgDO8iQfGfKgARKyCcJLRiRJXaIZE-wsApIm6nxMgVLhUEyYeXDiLpQiqRytBmeuEw6WB+lqHhMm-kR-xXmpOwdliL4Ru+AlCdp7h9mJDQ8G8EFxjW0GtI+hT+YpokKCMowxfwcXBXIBK9AMcliC8vFgfFgXicW8jAmF9FQllPTzKlcVaUpCgADz0BCaUFOeiXVdlCxLFQKxWAAKs0OZEEUoC-PwBDvhEjAEAYBgMJc1igAA1FMhKbVUzDqBQj4UHgJQNYla3WGsp3dVtag7Xt-AHSUGWZVdqjzIsyzIsNVDBEIADuE3qFNM2gHNC1LSI8xWBdz2bTd+2HUVjWna2kPrZdz2w3d8OPUqXH0M0zzzZpAUtDZA7HVhI7XpCorNEYEXdSujAkO0COiUFpUjoS+7ZEQbFnsd8ho5tAyhjTVBGELz03iht2VYxfmfk90M1cDxN0MMozGeIAtK8rPQDFrnWC3rvTzEzLMuTr7gudj3UBISB2gHBkIa5R4U0XRPlvpWnMzG9-Ws2sACqRBNJiHj-EuhJ+AsomTJFm3kWQ6kyCxQE6qwZnO1CvjPfu5sdNZAuuXpriS891kSSX5m0tHML29JRqi3e4vZ+5lkTQ4ghEwlpOByVdAU1JqhU2cYt0zSw89IzzMdAL7MnQnXPQTzfOs8besi9TLcSybVTS-este0x0Zt7r0Nm2rruGzr5f68DWgsIbwUL+fytm7PYiW2rZVjFwp5G0vLnGYMduqO2zq7Qo7sDC0Tlr5H2U9CT+3kmrYOocMSygjqnAAtNgzufBBDvijiA2OqFEEzCTinSYox04gUKvBPO0EC7Vx7tpaucgy57xmJXBcdk3K1xAfXJyTdt60zbjjII3YIigWiLEOAiBkDoBSCgXAK5sgGF2lICglALjsgZBKYg1Zub1AnMKLE9YQhrA0RQLROjFwWQZLJTR2jzhvBsYtIQ74uC4gMUQIx0FDYuRCEAuk2BKHWNsa4vRuIIgpURGIaq9YrBa1bGoLW0MOGJPiVYX8qTVC-gyZw3oSS5J5Nkv-dQhSsniisJ6MpnoqkzCSavdirYWnq02pkpp2SRBMEWlwIorZemMH6eNTpRSehJOQXk5Bz0unFOyfoQoLAuANEYG4JZBQVlrPGdUpEVhVplLUKsUARQkqWCGOtMZ8zJnZOwUc1QJyzlmAuaAPB1yJlVCSS4dwvQnnnMGKAGwpzVA3K+dk4ADynalHcM8iwgKwAfL2ciAApFC-5LzAUopBaAMFagknJSORi+FQxkqnLxaoJJABCEYRKYXksxUMGlowzmfPxdkpq6L6VwteS1VQrLkVWCaqYB5xLeWjHJWyyl2TzBcthQCoYlh+UUuNPs8wIrflVDFYC9VyqpWquRFSqFgKqjwtUFStQ5Rqq0nCc4ux0T1QCzMN1fQRgtbuAiS43RUibXhGTp6+13Y2ANAAFb7DILEl1hhfGYpKXa1xrZAn-zPMEy8+qiTxu9YhHwuBbU2K9W8JO7QI0sXrEkzEKY9qiFbBWoCTgVVcMJEkyARA63aMGb8ltbbaINsbQsmpmyWCwEgHkwdw7e19vBQO7xWyACiZTB2zonZO6VNSAByXA11Qo3Wut+K6ei+qIBRANUSi3RlYUpZ1hJXUSkxYbLkHrM2Fr9cWnNebIm6LPawCSV6Zg3rwHe2CQS01OPzfar9ObcaGEWnRE9WbLK+PcJNT0X4ZLQboHRPanBZSLAw7LENXAixM12jAhJJs4NuJZK0LxPjgnpsJMhxENweihMZjUAwcDvan1Q03UoXlOMnyRHfCaC0ITiAow6h088NqTok1+i9iV6O9Gg2J74T7JNEGDWG8gYlhMzDky+89KklM9CgdRGBnsGLwM7DjVoyczP8DvKFOgAn3wsVQtoDjx8-K0mwJI7NkRZFQHkQkdAWAMCqLUtkaQDQyxohoAgxQvRhHwnHIKMxop4nSgS9GNY6GKDMwVAoAAZMVmTm0eb8SDTsDRsg+BfGy8ITsJWytC2OmwDgngBzVd2JoBwDX4tNarElEY1gYtWAAmpGLTIChUAK7IOLLIctVinvuSaupGs+xxiudoxYigAC83gMG1MWRb6Ihs8fhNndwc0SAnEOMEZNALbv3fEMdxYxY+6bc7O4PAT3ttTckBhw7LAutneW5d2g13gYEDu0IB7f3TznLa7D17YgW4Ew4+1mcrMOug-4t9qsFMTOEkR3QdujjdvA6OzFkQXBny9bq5kcHF2p7hN+FqQEpbaf081KSQELOtswkoSCcaKUeeOlBILmzwu-WgAaCEFiVODsDlFwIqKMlocvfhyIX7T2Xko7h6IPKPENPfA5-znUwJLEkShCT7h-3WOA72yD1CABHCYpAyZkCkBGymal3ee8oMWDDYguDAl9hro0WvUc6710jzFem1BcGh0nrV9OZzx7oP6A3+7QDZHnP2MPpM91cIGNr43GeFxZ-9Gn028uY9G914908-p7ek8d1UBuI81I7wlMBTOxAjiyEH0eyPq5GS83YmIPro+N7QwGLQ0fwnapiMD5WCgIfnQD-ZO356htZ-snkMuq6LlD8hGP8A1Q3e2xy4vyxG9yvDs3Z937q-E-8-1Cnym4gkkhZbzOExVrSrRECFlX1bnvV-w4T-gAQvxCTuB2yBxVxYBEH2DoA5x8UJxHEoWOhYlQNvAwMdTVmlyrHf0oTOEV1GCfwHHwPQL+FxFJgZ1q36w6CwPVw-0b1eyzwBTvgoOIGuzr06hrwBSXi4R4AIU02xwXH7j7Apnf0bXzlj2N2AKcGEPkOVj8D3yqDJwpxVGoJWS7kExIOwLl1wKoMMPfAU2MLILlz4NoCoKQMOzDwsMrEYJqz63q1YMGx9nYP3E4Ljxb3J1zxmDsIEOhiEMCJz3hSS2hiCBsCSBsCT0oRaCxBnFLXxkJikKL3Jlt3YOhnEMcAUz7hyNkNyPUKukUKbyELr3CJEJ6DiN9ESLz2egKO7iyNLHJhqOaKuhSNJncC6O6M2gYUGOXhkjJ19DEDyMGL8CmJAXtx0IBw7n0PLF6VxFOywJwhYyqHCUoImkcIHBWJcRoE+1q16UKwOO8OaxsKPWThIF2OoLi1lCOKB03CPSEA90rGMPYMoS4HuP2MeNWMyE+2LG1EkDsS+Pfz8NDBuyUObx0OCM2gMBCDCL1iCG114Fv2jD2gIG8TtH6gWCHFxMfHK1iLACgScVEAK28UmDIC+ioAaBPFoFONJj0zUxFEz0iORz7XHDyEKBKGZN3BJJNgGDuP4OhJhyb2EJqPmF+LFMhBhMlM5K0MkWTR0EmHbGxNxOzDwHxKEEJMoGJL0yCHJNOKpLJAAEhzSDI9YFincO4C42B8gUC0DCDwhjCp5wFsh18vcvjyFVAcDX9YkH4PivdNIBQyQZprDupjFzNYFvSTgBJAzS9CQBhv8V8RM9hZQBJZ5HTWBaDXSj1+8M4wzqS-JmBfdj8tDCQHSMQ8yXT6DMhdQBjeh8pNJ3jPcEzD9mBSzKxdRyy-dLx2CY4hA44-SP9sh8yGyBslsLtJYBh6xJytTJDiC2DJZ5hv938AgEDndqd8xagSyIzPiNiE5KF1A-iXcBxGx3CmdpzzsfDIToJ-CEd9cLAhYzy5SzgtCIjxjntYSTc8xC9Sw+xoCfytDbTtyO5hRWB1sw8L8sIFSuDAiHJrSo9Usv815ZSx9upy8-zv9uDup5hDZML5AUS+00TY8MSNTeYlzgh8TCgmAJoQgBiw8AZhCET90oKVkAZdQXJiKT991oTmznpyK4dKKtxNSVQdT1AhKroghjgdA+ALg2wQ8xgvpOL1sZKtoWL+AxIycMx2KRiZgK9xMKltKkNuL+LDLp5k0MwqyuFQKBjwLIsO4dh9h8g3h8tCtmcbd1sEKAj4SE4YyJNuxfFkycKqj0NYN1MQqfKLK7KdCCLP9Nwls2QYrDEhS1BF9EJJdnRDEyNoZPIxNXNPi08g0+cAQdRQq7LfLSrsrvNPjU128xBRdkw5o6AyA2L4Uk9jKxAC9vw+4Wq+s2IVsZKBhALn0KxT5BrZBhrky955gVDDgZKHLlYErCRXo+oVgbcrBiBngiAqAforI1JaI9g3k8EUYuirBXKSB3KVlQYzTMglwILKd9i7rFoHrbyIc2c79zzqdfEGQmCPDmc2DriKJiKH9o1qDzKdKISUsodxTjLuCDKto8BkTBK+1ENOTkauF1LuLYLf9+irK1B0aianZfLAj9LXzSaehrrbrPKlzENNK9ZybEaKbLLG0VqOb-sphnq9DXqYs4JdgTCbi2x79RhH99ikNhIZs5sThdQasQlDJo8EbYSkboiGZjr1A6JhA+MyxZt5tJJRDegYzv89bZbZA5qZhF9k1Ji9NCLYISB9a5a5BSLDLEamaehJjMVchtbPIv4bbHbzbj9ZjQAb8lb4QfbQc-bRSx9NzFiXqLz3TAqV56h3s-gzwsD-89iLzMsTsM7LiqxLp5hKsZBjCs79CwdM7Npi76hFzMCC7Lb+hs7dy67gaG6i6krWijCq6toBh9Cu6-Ie6Zga7XjATjj86ZyfZy7XrDi1iJ67zOwO7sh0DhI6dAabyvDJ7F6ro+7XqV6Gg17ryWCy7q6kr4yLit7C6d7m7kDz6BJ2ybw3huzDzowNsG65qR6Gg7wSBngT7e6b6Qcv6qAf6-7h6krGxn7PEjz27r79CIHwyoHT4h769othJQGUyAGPK0HkGVZot7qvLPrZzYH+b8GGacGqgNr3pCc0E9qDraBBJowuAhhcFMGnrnLKdhI9TTsat4KJTEKArktw7aAHiFany4THdea7Qd9GAWh8hmc9oDB8hIcJpOG+xzcdQBwrAksUZ88iBFHk51pIY-Brg7K3YWBHN6TPt6rctBDSidboL2rFgwTXEAVZDBCAVFqRBdDHgQ9NJZGYleq9GlGp47NgZ-HGyWINzzSYQ1EKxdBPs+8FH8hrYtaVl+B-4-ExzPSgnk4yUclUnBQMnrgxyqhI7Cm9pJjyjQ7SF45JYYsuGzxiRUJkRtHTokmDGVpjH2azGLHnNiqbGTYgh6m+w+G6tWS7HPIVlHH4m7ERCaiZGSwYkWJcpSiFm5HwgQ7GEZI9pQSEmxF8m6Jym8R3B7GpndnZmqno5lSwBhnixAi1TWSPGcM61RA9MQ6b8b8dmnG9nW5hN2m98vb1bG1hlRlkQggvn4n1ZplNnegZiHyZJNALgNGBJwmNmcZKFCB2INRfhUJKlRhIZqblYAAdXGTQD3cMAcAwZCwlq6EloR0AC1AwJugWhQeYAAcnAFxMYCAlEGqHJc0DZe8DzxJZjhpdJpJZXBkE4ZWG0U8XcHKE2LFZ6DpcbjQtBzXgVaVa2hVZ6m-y1b3h1dwYjOvlgk1f1dUENZ6iGHNb1ktZVilYaEWF6ojOthtvKGY0JZFZtcGJJdCeICad5dGA3O9ZmAlbUgDZYB+n6nECjfUHMSY0Vc9bwn5YHAtXaTEH9ZxdECATFcNbJYIApbEDTfQunwdadcNkzY0a8ddYAVjfjeYEHI9bUENYxYwSxDrZYgrb0aza8aFassNcrdQhEBYhckHezb7aVbzeiniUNjrcywbd+zbcjejabcnS9ZDeFbCTl1q3RD4CWbiXFDZZ3bZfcDZakpPdADZdpIvcvb2gvbZfQnvZ+m0QKDZeYzDY7gjZ3cPjno1AKD+Gaepe6KnZknrCPc0AMGwQMH-bChvcnb0wjbrbZN3eeN-h9YQ6zdBwwT-YA4HBzaJvXY3ZXRJcoX2t-1LXiTZbI6IHveYAIFQOjHvY0XYDq36nvcK3Y-QN4Dfb7ZI9sMWB2QPaRDZaRYaFo+0F6VkHvdaHIDVMYHvbaAjVo9aCEAMHk-fY9ptb45Ft+EoFvFkAo8Pd04K1aHvagXva4B483ZXAjb4CozeGo5w7Ci9piP7bhoNTZbs48WwWo6g5g9Qjg8Mrta2kQ+jZYr09aDQ7c-I0w6Q+o8vyTdFaI7Xdxgjcc+g9w5c-1cNclYGUdYZy8gkGw4y7CiA83dGKNAFvS-89nC1eC+en0CKHy8KqzLA985K4C81Vtc06qGq9w6677Xq+aK-Yg5-aBJcw67w8HIndAENaS+S+6-pca+a741U1s-cVaCw+ICc8A9XehkI4W64Q-ccVs8rEfqy60-c7A9QkmpOEC7q4w40a2800m8mIG5GKG-00w9E526m5m4+-8EO8G9S++4E9+4u-g+0LUmW-ClW6zJ+8m7K-3Xq7WzQYR5q-e-Fbrxh4K9UzA9E789w-u-2567UHR-6-K9JpG9U7G-HvB8bZm7m8tKB6qBA6NBx5a5Mqe6Q9E4S+aIO5Z+JZB6e-acCf0aR+poHe7arZYnaf+5DZbdMOYlGFO9u7w-l6C+TYLc0F6pLbPDHa8b28l-c5u7IA1+S4F8F+egm3Yb5pzqAZAePNlxFtFxYgd+eByqjO2Ll2-tKncxzNrOdIIKnMLLV1BuTnsAkNECDM9Dx0j8cGN198SnD-l1+pV2aqdF8MfJVsVPhKpq2gVzFLh+8isy4yRCT7Enj8EGj+Jz01ZoWOhlCVj+9Gb5THRyTBb477b9b-NF8bWYCcxYm6zcqVRgJat5J4jdF7A-M9Pbo4Y7ICfZfbM8PHY+8WJ96BJc85U7U-vbvdPZn8vYIO4-w+ppMdJ+VgAAZum+028mbb+uF7-CQrRvAgA')">function analyze_block(component) {
    const body = block_body(component);
    const locals = scan_out_declarations(body);
    const unassigneds = list_of_unassigned(locals);
    const bfun = analyze(body);
    return (env, succeed, fail) =>
           bfun(extend_environment(locals, unassigneds, env),
                succeed, fail);             
}
</pre></div></div>
      </p></div>
    
  
  
  
      <div class='permalink'>
        <a name='h7' class='permalink'></a><h2>
    
    
      
	
	Function
      
      applications
    
  </h2></div>

  <div class='permalink'>
<a name='p25' class='permalink'></a><p>
    The execution function 
    
      
      function
    
    for applications contains no new ideas except for the technical complexity
    of managing the continuations.  This complexity arises in
    
      
      
      <kbd>analyze_application</kbd>,
      
    due to the need to keep track of the success and failure continuations as
    we evaluate the operands.  We use a
    
      
      function <kbd>get_args</kbd>
      
      
    to evaluate the list of operands, rather than a simple
    <kbd>map</kbd> as in the ordinary evaluator.
    <div class='snippet' id='javascript_90_14_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChsDMBXAOwGMAXASwHsjQBzAUzIH0BDAJzoGcAKVwolwA0oBkQBuIrgRIkGDACYi8rCgBsAlKADeoPfuz7Q7JgXa0KXZkQJq1fAVw2Gj+gPyhps+Qp427yqqaLq6gAFygABYMrL78xE48YpIhoWmhIJ4yclxcoCQ0lDaslDSgeFTsoGSRlqDxRKnpzaB8nIHqAExaALwAfE0tQ4wsHNw8ZEEOCRpCg0MLoclzi6vpmV45eQVERQQl1LQV7PNri5kmJGZcFOIM+ax21VT0TGycXKdnQ23cHWoYXoDb4goybHw8AAOqnYvxEYycK1ByLSKnUgKRKIWaLU3UxoJxGgA3NgAL64ATkQ6iAAeDCuZAYbEhkLUFBIBxoPAE8I+UmyPn+Wm0qRMZDMFiskPYFAAthRKHdmJTSkRucRnOkPODFHwWWoAJ7MaVyhW3Jkqw7qoi87izL7NQmnCKWZgFWWQqjEBTK4hUrkCLSnDyWmjMABGVAUButGh4DqMDBpjKIPuSFHYNFlYjI8ZBoaIxo4rGzjPYvED+NWCKriwLzHTmaI2d2sftqx4kejzBM0jUZH+3VA-VACdCOt8rrFEuY4keBAYnajRt7tjIQax7mMpnMs-nTJ2KdzXZXDD767Hiwi3oYeAoREUtYJQTxl-KQU1aQiDHYmdhPNAAAiYgAGsiCoAB3I4-VVaoDUhe4AFpEKA0AAGo3zSQCk3pAhGWZVl2U5IhAOJMlcEyAs8jwTNZQgGB4CQVA0AARhwfAYOpV0yHYPDIhjGlhVFHdJQjKgqDUGI1UE0chg8Glhx6Hpql4+4E2-X9Kh4GkREAyMJKk2kEPIR9tzkc0FDCUiSXJDjSFg2VWBAi1OK5aF2BLJgf2EUATxEZIhKMadzFANkuFzQD3U9b1fXsw5AKfZp3M8ssfL80QJDI8kC1AV0oq9VNYv9NU8EC-RgtEyY6EYH0wtzPBdPymKC2s8icvrZLS287kyr0CrQssFgTDwbkRBYrK7OK8pXMLE8ep0YTxRCuqe1vUbQG6GzJtg+tGyzHN5pFIKRIG8LVpGhrQEBLbtupRznNWpbCznNQFx4Q8c167cntOiKKr3V6GAS-JCk+racqnESAbel6Fy+-ruNYarFGYOqeFhhhdP+jHWuymbvpnDG3VB1sMfhk7oliCYpjJibbrKMQSDUKgbiIOgGwkDN9tbAKFuOn7JnUJJMvB-G73LFgaM84XxHJn7Kd8ALRbihnSGZrgmXDGMpezfzMp0IxFolUBoQzbkPN1jLZa2nZwuqaIGw9MgjT25sc2HUB-DUEl6doe6LQtxcuANWVIzUHyMacPnypO03YWD0OJIj-cnGVqadaZBOw4rQPhUN-njYV83PIm9rA+hs9i+zPODALkLBfsDO6ZypMUzTTmmxbXMs6TkQXrS1gNY52Xo76k7JLZmoeB78PeiU0KxDoKf+8-ZoPDjnh-eVQPp5D7O+8eRFfMHpkAvUhfJ8iXfE9n0AAB4L6Xq+V8vDwfz-HhAIAFXE0BHKIA09ROAEC7nkaQ+oKCKAiIBdCslkThRlGzCgeAYwzyjmhICulYGYXHDxe8dBkExhXqvFoGkP7f1-ngBgEEgF0BATmMBBAIFQNQhgnBrgEH4MIdfbOWgMHAxgWwlEnCkEoPRofDQzd8bMyoCBJhzAZ4Vx4RJPWI8jr6BbhIVG4lIQyy+kYHKXAORqjQQfW+6iWgIysF7ZRs92F6DflomRuj7GuEZurfBw8uZux5plEhawIgz0UspIuaD-FnA8EXF+KJAnGOpkLMJIgG7iNnmRdI5J0jINaMkYJ9tT5Oxdh3bm65R7NHflpGeukACqRBIzek9p5Vq6TRDh3uBY5otsyDlEDh7cWZ0M56JJAsfqRjWAlXLmgquDB2ybgzhXHOJc0lpAyfoFZY8frJG0VQXRStyK+3qLkCgdBCyKIxrYsxqivqaPEFsnZ+t2kGPxqMkxe9e6gBXqU9IVjrC2HsGEnBjibnOLzKCdxLNPGuy7no8JpDPCvLULk0J8KnD2O1G8KJh8zEwqGLEsZ8S-nItmNUGmEilmhFJHA0IWSZa5JqPkyEzsvGd0+p8tI5T47wuqbUgqCgGnZlAMhA5NxjldyacslpGtWWhE6d0zyvSMz9J3rs4ZJ1nlTIUciqZMysRzMjlqslrg1mgCNf1TZwLdm2UojNaitF6JwEQMgdAbEUAUnxq6E08pFQuRViVDUo9vlVRqqjQa1pdIerNHcXG+zw1euYHKVkDAu7EVjP6imMRfDJMDHTGVMbzRFVVHkZSaN5ho0AgrYG+gFaLG1UYUtDcK16AbtWp8pa44NpNjCZtJaQ2ATqu2uqXa0iltdF7YGI7fktBrfoUtChLCslYAaYGs6uDzsAc0KdehS3sobeyhYG7fqf0cjUNg4YuAJSPZEE9eR0j7tLWhdt+htIiANECUACkMFrtvT2xCD69BPtAC+4cfQ30CoA3oL94VP4ACpf2tB0gB19CkoNgdABBiKwBYP-sAyOBSYBP0tp7QAUkw-B7DwGFKEZQ2hz+SkegPqw4h3JL6COQcAgAQiUvR0jjGOPKWY921jd8SPPsYw-PQ-Gh09rvnRkQrgGNAZA9J8T1HAJ9GEwhhTClgPKZYxFPoMnQjyZw6AfTOmBMRTY7BkDRgRx6DY-oQS8wyI5plJ6vN9Y0HDlOI5XRCsRC5qVFRZzNA7YBe9cVZgVBwwACt6RkELd51guiBAKdba5iNQMRBF0zRqSRiUjBhfzYcVOuAXOmljZ0sZ8WPZo1LTeO8D4FDA3q-eRQ+7NzTp7ZAIgDWFSLtk913rzt2sdYPYBC9zBYCQAbRNqbI2OulomwAUXbct+bm5S0ADlWCbdg9tzb2KOvBcEF0wrlXdgapvgl9IPnuQKaLqVfz6WKshcmLsErZW3NKnOywSOXmbtJbuyObLUxSpErO69qrJX9lJdZEaQrBZQ20LqnLY2sPDRxsLDedghpPHRdYHOIxMoGUgtWIV+Nkkk2qljPltIYwUdElcHswxphIRMuKTwVHIVW5iHbuIbxULMKw951CZ77mZqXf3pS0EEOTtVcl0ndbRhheplF+V8XPrIsxbiz5Vx+hZfhXl5HJX+g6WOwZYU-nzLdh00kl0s3dBmbhkeOznxXTlIa3FGzyFB0yLYCtT6m1VA6JQHtUxdAWAMCup9blKwJZwzvWD56B8NuDZM7rpVJGQa0b5RTwOIC6OiKqlIqAAAZKX6XaQR3S12jSaUZ4bhclz59LQ5fK-jnhZFvA1ga8S6TPXw5Tek80Bb7kwC8fAJp1gvHt0kQqDskrs31P7T+oIkTx6EfNubo5TGY8A0AAvJkbIyyPHX8nllK+Toy35N4UyhIFMTh4Mfn8LuzlL-XEKbf+Nd+GkPz37MZ+m+JSl+P01+WQt+Sg746gQICYj+MicibOpy+4tiXe-+i47+RKAUtOjoH4X+MeP+B+R+8eCgrADYdevYjeaoGBpSOaxYXU5YNWxBpBnUXk5YgBeeBqMqJ4jBocJBYk0Y7BYMqQXBKWykBBh+S40YBq-UYBE4QoQGsBAouoW8iOLBqUIg4YAEWBrihIeBU04hmcDAAAjguKQEHGQLKPFlck8sYaYZQI8IaHwBofojHKAcsOAXIHfh+Apq4qwGAXrq0KQRjIODAR1pDE9EokEfuIdmsNqEoXEBXCEQEfoBEAnu4XIVAbiCbukLoakEajlMCn0pLMQCIL2MUYIC4essbOOnYDwGUbFCirEeUAquUZhBEMChrCYTmBQA4drC0bFNgWsEXPUY4HlskckiMTMAakajKo4B7LdgYVIBYVYUMq4dUdYr8taFHAmICgpi1o1ufMCg9jMEkqDlMXodPkQHvn-goPSGoMWNTtQe0jKkEspLcUzA8YcArvYBgasXoDKuIKIfUFcb-ouO8fcR5KqBXGQQPpQYITbtIVfukfEfISOG+ICcQNfq4ikiEQpg8iCIPMKicp3mcpUu8o8Jcn8ciCMvETwPsV4V0AamsKSIMaiLgczt-iCYQWwIciKgdE8cIa9nCjfB7ISUcm7t8fCeuFSQCUCQYXwLyRKUTP3hQVaBgYiW4RIDfp4ZAffv0KcBiWqMsJeDiZkUOCOLoOcGAFBixFBuwjKhJD6BjDVuJAgd8UomScqmcGKccu6aSZyuSWoJSewjSRATickS0Jznia4JkFBp0HaaNkMD6cSTfB6ZyhGYmWkI6Yke3pmZuF6XmaEP1DiJ0JzlSXmaSEyekqybkbZDvlyX-jsLOqqKfk8aEIKSdibHKQ2egTQM2YcC7vXrOhyIyFKZIjKUKSQN2dcb2amGaDQC7rbLYfycPhwZwUKQ0KKT2YnnOS2WoGwP2D+FcV6mORqcbLISiZkaES0JCAIFiWcBsAKLkCDLsPePsDtJUKILDAcGzLmc0JkHSibCYMOSUPcGQC8FFoLLQEORXDgqLijMEWadeSCNxLxDUDGDBWTH+QsB4FOZiciRAUkciBEA0BeYRUhayfoJREEGYPcIeG+cROUJ+QwN+UUHQNhWkABdEEBYoEXgwAAJD8X5xrC1nR5TTPKRZ4TMDgmfEhZjmlLUquidGmFyCnlSovl2zhSWGFqeDLlmEKKTCMigJjnllrEhSuiJoW4KJ6WqVaVWGYQeBextH1Asgi4SVegsAyWQnFbcj9GG5GUHR2VODZEtDuVSVeXES8AZlGBbzKWMyLj1H+WJoMLTzLHBXjl5ESptKnDfIRWPGrmfRjgeBox5VfEzynljgRBexUnkh1nSKDSoHEDJm6hXHZhRwgHGy3bMAKaARQZNWKmKAwYiCtVnhSL4E9kRjMwkAgTyXPFCncHKThhTUgT8Exi-Edl2xTWHwexhWeV3GyWCCSEvoTmdn9VEmKA6UrRUDd5nXim6hbWzwnV2yaHEBbkzlHVnkhRkU6monAgtAvVGnJi86u5QoPU+S3XHIXWXKUV6AZG6GLAcnjUzmPQzhJVQoClGAyrsDTmgl1FQwqkN5qkFUIlUkyEEU-VXkKFDDY34ValwUvS4kjiP5bzYzIEvREolkhVXkXHUgGFsChxJB15fQyp4WCDzGA6LH1Chyz7z45CC2QgZUZ7ZJakeGCiU0WmnA5Q8RGgPjJjvRz4L7tVjjfI2IkAG05AxGhAhhTCW2uARBFxm2y2jX3mFmw0onRVpBRkjja3WCtz4r61O3pWmV6BGpK0+2625ii0lZGCkg81lDykY1mWiTP4eQ-HE0XhyTAnI0p2tnp2HYujWLSwYE7FZ2gloFjlfAF3SX7XeVD4b4cEl182lV13n426V2x48lEno152N0TXJnd312FXNBV1NnzkgkV2Z182j17kT3pBV33G8GkEE2D5UE92T0TUL3hh8HL1wnF3D0d1xVmGz1ryl3cmH22U2WZyGXJXvYVX72uhLVUDTXH1ain1-6P3P171z0d3-Ro0rmD1t3r3I2-3X0D2t0Z3f2ujx4v1pAeB83QNf1fgd2F4jlE0AMQMn3wMQKoMt1AH52iCaSwjv5cpgSQS0DBy7CsAKSCoGFRow6hwsWn796qLalq336WnCVVEhTyn95xjk1sPsl1Ux5FEKISR4RWj3iQh4Rc60Dx6MP2DuQayfy6CCK5REBSNdL8LGqkQw1GAO5O4u4+67C6OPoM2eytwHlljHnmivoM3Ymvr0kKBjX6F2CiOvQFo8CSPSOlJ26eBiMFoezVX8WpAQy7BHku7ApeP54+1IyqBECVG5R4CtBRNj4xN0BxMl74mhBpNxNlmnAUoMCtLqXK4MMvRQgcBKOAQqOwIpNaOkg6M4L6NRaGNFJu66OZByMvSq25D00UnmPJiWPhNeqvpZOLBcD+PFYewbxmPjPuPFZVmrAIxhPmARM6Kfw5P3jAwR2DMrPDPB3NAsk4IdOlOPCZG0VwUOOpi3itYKA4ILPGp5GpD3hWOrPbKk4LBRMw1e3AajNDDLqrqfyZDPPhMIrbr3PLKfW0AmB3DlhBwTMhbZpCmECuOKM-gewwKu3fAAA6+yJgJhGYi4CtaemLawOLSt9mkIoAcDAtWgEQAA5OAAcFwHeIoNuPiyYHS4zpuDixSiS3y3oDizlNmAw7CAqImiIDJBw-y6EGS0nR3TYjJNKwsLK1bZ7BOkqyCCq3bblEZYiumtpFoBq64Fq6qwpEa9iw6BEMK+GD+J40ZacULIJMSNKzy+a4WTi748QKi7yspNVW680IK-jKi8wBBJUL4KG+wLVINDXC68JOy4uPZjUfYF6xU21s67G8dPGzwImxsbUda7a0XCm7C04w6-YBG1G+FJIuOcaxtV0hUDFOWx7IW+o6m041y+66kEWxrD68SkLF221u20q1q-1GjEXOW8GpW8oDyiG2G+m1iK6-64mTiy5gwJ6DcAE0WiGnS-XpCHSyIHS8cHu6AHS+BUe8e-eEe3S1rJexBAqJEHS864GzHsGzu+CnucaJEB5EozG5mcO+PFuzu4hJCJ+yfGexqya0MMG+W-BWu2PUfL+zgsG+BMQB+1+4uNW5iwu4ux1su0Kch2LZu5BnS-h5e+FAQLcbsJe9KNdQ3pUJeyOfR-cbkA+1y7h52TC6ejVluxx6R+KLOmeJe5JOQLRVwJezEPFqR5JKu6J4+x7dh2x3bBwJQEzGeFx0R0p+yJJJe3Spe6wCxzh9GqmwohTkyPh6hyfFGVK3mX+z9GjHSzcB6JJIhPh0ByBxrGBx22cFB2G20Mp5JPB67RBzeUZ9B-h8FYO4F2SNh6Nk+1NEhwVOZ9+8S0OyE-jI5AaDa2QW3H4Al8B2hz+zFzlSdNA2Z3lyfLJil6COl5lzzqrnZy52V+5xV6S3J6EKV255jAZ3yy+yYLB++41+h1W4O1q7y9F5q0bCFNV6fEDarsGw5wmtYLlx15znO6sFh2N8iLF7BHNzmPFZZ4uzZ8bHZxrGE2YR50a0F0lEZ+12h5zs1552sMGxx4l4NxFwh6Nxt6CFt9SE9z+OGC9-txd6lzHlN1lyLs9wNwV112kKvgLRDx1-d3y5d0MKD7V74HZxx652h+d4sMjx1vD2h4j+N910Z6++uwOfuQNytxhwK3kYJZ9zKxN37AujVzN74N55G+jH9+F0u1Fwz194Z7C5jho54+o941Zxm-oP2z21E29wd7W7pbsFM0ZydymKpat5h3GwQAS547m8my28WzT5L1w+QzmHLxt+t-z2sJPmJZccjSg8monf8UizjYQdaBFjvWg+A4rfoDKg0DpQsT2baLwOqaTUiSrXDd4fqSJXecaciEjpzVTZuCMO8OMP7yIK124nTXy78D5DiICEn9KzhAyEyA79TjyJnwsDWKrQyQCFzd8JzSYxorgaOLZCtMNE-g1R3+32tD3yNH33wK47M+I3Jci5T6m1UGwhi1by18G1E530Rzp-u2RxR2QDe3e9p9EPRyUDj4z-Z1J5CKJ-uxe-u0v8ex8cx0b5iw02NwAAz1+giviZlP-fAv9pDjREhAA')">function analyze_application(component) {
    const ffun = analyze(function_expression(component));
    const afuns = map(analyze, args(component));
    return (env, succeed, fail) =>
               ffun(env,
                    (fun, fail2) =>
                        get_args(afuns, 
                                 env,
                                 (args, fail3) =>
                                     execute_application(fun,
                                         args, succeed, fail3),
                                 fail2),
                    fail); 
}
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p26' class='permalink'></a><p>
    
      
      
	In <kbd>get_args</kbd>,
	notice how recursing down the list of
	<kbd>afun</kbd>
	execution functions using
	<kbd>tail</kbd>
	and constructing the resulting list of
	<kbd>args</kbd> using
	<kbd>pair</kbd>
	is accomplished by calling each
	<kbd>afun</kbd>
	in the list with a success continuation that recursively calls
	<kbd>get_args</kbd>.
      
    
    Each of these recursive calls to
    
      
      <kbd>get_args</kbd>
      
    has a success continuation whose value is the
    
      
      
	result of 
	<kbd>pair</kbd>ing
	the newly obtained argument with the list of accumulated arguments:
      
    
    <div class='snippet' id='javascript_90_15_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7SSFQPIWQHoLzHzYEKXNrekmCp7McycShbjUXJwZRHqUPaI59S9AykkW9RaWETyF3OXHqKIaEWLAEKy5RYk0ARvNVQUK1FM3aJC7EFCii+ytVcXLHK1WSgjJaCYEKriIKtuZREfMC6YKUQqGwDzSk+3d2IXJQP3Bi77QUVKqCC7HIzwJA+0VsMsN0NuQqnLYq1slmKIBg+bUqnPVPEfBymqcaY+ay5IUgToEgGgOabiY8ACXIW+e+M6WI5ILIJS+4UpdaUUvEFcm-VSxsyitwGfWi0A8LRHJi7QvU3Qqi42GkhgOfA1E3RYu9aKls9ihkckt7biuCsmAgPiuk2PayoSni5NBESUNrE3CfQosotwfi4GlpTS5g80b6sG3QWasgZShakqJavLLhVq92CGvCvnc0SKlmGS2PTPUILsloxY0pdCWcHINHOY2fMyefK67KKrMgGrOrakCLAs1fSbTihk-ChI0GUapgQCYNLDF0Jm0oUcquVhMuYW2rUWhqkPZg9TTjKIWmRm6W5ciwmGu4tGq4eIzFaQAWqSHdGcFW5m61G00AbPdwb0PW9LA2+Ys-LPeS4i0C4Qibb4dbEbS4+mLwG-d2zo1HC6Jy0uM7Vi2W72kmpcz22qQOhMiA9a-2hmVc6HGO4MyOrq74QIoQkOr2xO1nUpOczOw6msqO74No0Yo7VO2qMOtc0u44iu1maEB-dCOHRiuAuuuKH2ynbLfaqswuj0AO74dMtuuWm-Qe9M80iMnMls-u6EA8mgTcoe6uG-We+e+OtOvKiSsiguxrIu3qKupO0ii08ituVeq4aOszBetwPe3O8+k++uyQNap-LOhO1axatSnu7evu4u7JLYs+EgAaoa+UhQXUewCZe+BfQsIm4i9CXkzoiLG8LSx67mnooSdmnO5Q1mh6tAieR28OJvaiWwWQYEPsbIWQDDa-aBwMJjIYc8bYOws6MQEgEh42KqbaBoGoHGreCQGTDVTbBTXUDhqwwWv69KmIc40RQ5JOXAw5ZqgoFa6CfBp0e84h0houSTVaAh7RcCMuWoMUy4KMPsM4zbPPXKxh2Qbmfm0pWEacOREssQTdExphnuZIa2uEaxvzIgq4Fxqxvsao5eIs-WKuMzGB5sG4Gh5IOhjqZR5h8qNhmMzh7huTeKjzQU+miwYJ6Cpi1EpOCCKSUpER0wX4yoQ5Dx1GegDR+VcCBybJspxR+Veo1GeGN0ApuOYx5xix1xvsEMIRvJwx-hep2qdglJoJwMZgtk1E6R7EX1Rgzjfpi2i2gx0Rox9BCjKJpknW2w4PZJVJbYfABZ5p+KOIF+S6Oou6tYQwSoKkDXcp9tVROdYgeR0JmIcCbaGGlmAAHTlKTFV01HXGyEYlebJg+dQa5WyE8tSfiKiAAHJwBfj6AlxCgvmiAfnIXag0iPmV4AXMWPmoxRhoH4haFJEkh1AbNMXwggW7Myz0tq9iXSXdpyW5ay5aWw16W48xBLSe5aYaWmW3AWW5afBuX3ZeXWXcW0n8XLT54Zx1ACKAX0WBXgaPm1HSBHmCgtGOy5XapsXjxHmJA5pEp6xdWmBnMUR-nSWWXDBvnDAlAuV18lAlXqGQ1pWZXRQLX1xrWq8kYRWYglBaY7XLnZGJXmwDWjXtirj3AWWZ8sQjgg3wIfXGH7XZHUWwaWXfXzwVWxZLUU2Q1E2mWzXdJLFaYg2kQ4MFtI2dW9XHXk1ZX1WiiPn+UDB9hexNHdFLFIXItshIWkhIX-imAO3QBIW4Te2+2+xe3IXLwR25paE5BIX4NNXHptW22m5jiyQ5BhgaGTXijc3HwsxW3DBsgb5sgV3vJB2c3ONtWg20T63F26maUa3T37X0ssRl3V31xQ2Yaq3q20XZ1zzBrN9PUW2f2SAR2UQiA79dQR2qFeymLEoR2fMYOH9I5p3E3a25CYhalm3fRIWLmLAgPjBYkosR27BKA2T6AR2HBdUgO7B62SOZ2taP3kPzyhhqAuwos-2MPGPvM7AR3xYR37BEPP2oxtXew-g7AH3SAn3vJ4jkGyjN2GRt2hOJEb4AP93D3zxj35W73Lmy3DWTcmAmO7BPJXmhXeoz29WhysRJ8sXGgP3cjZ2hF72APxO12SXTW9HjwOgFA0mEdpIzOxOD3n312bOepvRz6HO-PvIb2XOw13PPOAq1t-2sRlPn21PUYjOijQuVPF8W1Uvcj53d2r2xi44wu13TaeXCzrPmXXboufIsMfTBOwMeh0vn31MK26WrPyvK1bOvhBP3QdTJPq2ZOjQMPzxqrShkuT3gN7PH2iuX2Iv1OJvNOsPHOX2Wvb2MX2vK3PntXFvpu+vuWWWcWEkYuavGNtuMuAvP3yjWsybTvn3ZunWovDvqvvPt2sPEuj27vWuAWbvwuLvXncvL3G3VjCuMvmvX3dAWWGgJT1uyXKvHuvPav73z2sOLPAu1vofBXNv72omHGVGpPIu9BM202GGmHs3yvw251hvjYzJuuRuX3Se33nWkXLWbXCewf8fSz5T3R6fof330eWZytjNw5frSkbrTqsJObtK7c8fXabWxeqTTLVshzgl7jHLe5t05f1bk03iw8PiOTIJGzCAAT5BxBsohAcidPYQsToafqjARfbLDbmw5eOGWZQaAXte7tdfyxOTFxEpaOap8ASgTBexKhQwjdAgZphe2s-ftaIasbsTuWcqHIcprrbK4mYa4-neXr2rM+5LEMPyTR8-pRfzjQi-C-WQy+Td5GanCG1T7nCv7X3FzoXm+fAXsBtXsft3uPO3gPQOKBx3J2uPawYPpExuYfIX6BKPsgSPO3h3O2u++3P8EO2eYb2Ho+WYAAGNPsNNPWjnfmBPfmqDkWoIAA')">function get_args(afuns, env, succeed, fail) {      
    return is_null(afuns)
        ? succeed(null, fail)
        : head(afuns)(env,
                      // success continuation for this afun
                      (arg, fail2) =>
                          get_args(tail(afuns),
                                   env,
                                   // success continuation for
                                   // recursive call to get_args
                                   (args, fail3) =>
                                       succeed(pair(arg, args),
                                               fail3),
                                   fail2),
                      fail);
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p27' class='permalink'></a><p>
    The actual
    
      
      function
    
    application, which is performed by
    
      
      <kbd>execute_application</kbd>,
      
      
    is accomplished in the same way as for the ordinary evaluator, except for
    the need to manage the continuations.
      
    <div class='snippet' id='javascript_90_16_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7Y8BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmAy3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLEniytRS0pJaakTmKymM5Nfiso8IOyu7By8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaAKtrJKuItrT3c0PyyKvqEShyHKO9IKsK0q5g80WSsNGSnImU4zcOG-LzHzbQvU8bNwGfWi0A8LRHJirqxrIrAC42KyufA1E3RYqq2EdrVigsnS4WTihk-Ckq0HPiuk2PW9Skja92XKoKlSzfQo2q98BqgSwquq7Es6twLIPIWQHoDqxs29fK92K6vCvneqt6j2VPGq1OfbUILsloxY0pdCWcHINHOY2fMyefWa7KKrMgGrOrakCLJauzZA1ajS9A2w0GY8aQQCYNLDF0ZG0oUcquVhMuEm2rMm1suKPndTTjCy7dJGmm5cmy0qu4n68IeIzFAm9LKSHdGcVmlG61G00AbPdwb0fmomrYeYs-LPeS4i0C4Qibb4dbEbS4+mLwG-DWzo1HC6KIULf7A2hmVc6HP7XU0aj0Q274O8kawHOm0AHW0G+2qs7qms2qI2yQQIoQxa7W821nUpOcv2j2m2r274No0Yo7LWs21o5Y6O-W-2iO6EB-dCOHRiuA2O3qF2tctOiwDO7LYa92621s726iDYnU7O2qXOi29MlCSus0siq0hA226EA8mgTc6umqWuoOjuru02mqcu0ii08ituQemuwOk7EeiMiiie1mUzcG+euKdqpe5Ooe74Z6p-deye9q9aUUh2zrW27JLYs+EgToEgGgOaeUhQXUewCZe+BfQsYG4i9CXkzoiLNS6Ct7birS3QNWoYtG8kn+uSoi8OJvaiWwWQYEPsbIWQDDa-N+wMJjIYc8bYOws6MQEgOB42KqbaBoGoC6reCQGTDVTbBTXUIhqw2W0pGwM434yoQ5JOXAw5BgkNJWtq6CSBp0e82B+BouSTVaKB7RcCMuWoMUy4KMPsehuOPPJQPhjzQIJgQCOEacOREssQTdeR7B2QHuZIfm1RvsPzIgq4Ax2ENR6o5eIs-WKuMzd+5sG4NB5IDBjqBRk6CWwhzjaTWTch0TXDDzQUhGiwex7+yOVEpOCCKSWh+h-hQ5Ex1GegYR+VcCByCJxJnh+Veo1GeGN0UwTbOR-R5R0pcxoxxcqJ04mIc40RLJ2qdgwJuxwMZgtk1E1h7EX1RgzjGpyWyW6Ryp-J9BCjBRpk3m3GsNZJVJbYfAXpvJqmbJF+S6Oo9ihkQwSoKkDXJJ9tVROdYgLhxxmIcCbaW61GAAHTlKTFV01HXGyEYiOculOeWq5WyGdqCfiKiAAHJwBfj6AlxChzmiBLm3nag0jTmV5bmzrTmoxRg374haFJEkh1AbMwW3B7mMbdKqaEWkXeoUWQ92zwlMWWZsW48xBLSe5aYMX8XdBCWcWfAKWyYqWiWoXgmYXLT54Zx1ACLbqQXaXijTnBHSA9mChRGOzuWrgIXjw9mJA5pEp6wpWmBnMUQbnbnCXDALnDAlAuV18lB+XUGQ0OXOXRRVX1wNWq8kZGWYglBaZtW1mChz9LVZX5Xtirj3BCWZ8sQjh7XwJLXsGdWbWgXSrCWrXzxBWxZLVA32H8XlXdJLFaZ7WkQ4MFs3XJXpW9Xk0uWRXgXZ1zzIt9hewRHdFLE3ns23mkg3n-imBi3QA3m4SK3K2+wK23nLx625paE5A3n4MxXHoJXs2m5jiyQ5Bhg0HFWeW1asxC3DBsgb5sh+3vIa2kX6XeoJX7W0SDAc3o7PIyj53aoJXL7SA+2B31wnXaq0303K1Tnv4d2GBPUC2L362UQiA79dR62qFeymLEp62fN32H9I422-Wz25CYhal83fQ3nVmLBb3jBYkot627BKA2T6B62HBdVb27AV34P23ubuW-3zyhhqAuwosr3gOcPvM7B63xZ637Af2M2owJXew-g7B0ssQ93vJ4i-7h3lrR3aOJEb4L3J3p3zxZ3IrN3KMdWk25XvLcO7B12j3ONF3pWhysRJ8jnj2T3U2znt3GOp392WOI3JHjwOgFBgmEdpJ5Pd3NPvIh3cjN3vQzMTPSQzPzwaUwWhPep9PDOkLGNR2eP7ODABOTmMP3AL2mOHOM3bqu3x2e3Vi45vP1MxbkXCyVP3ZI3HxXOfIsMfSaOwMehAvovD26XGgEu80O2hERPzw3R1dtPaWkuGQOP3QdTfO52ZORPsu+OD3HP-XGu1mAwAOguD2U3h3QWCuYEiuvgJXQOeuKuGu3BIWEk3O0vGMxvvOLOQurhrPwaFuWu2ulPg8UujOfTR3QPeP936vdpnOW11v93Nuw1TvK0wuV2IuxiouWuYvcvQBCWGgJTBu4vlqdv3PiMROl3QPFPLP8vPvEu1OROFHtGcGlutu3Aw3g2sGcG-WVOXW51SvjYzIaPavyu+vBODX-m1XNX4eXvYfUXVp3RkfPvlPQfLpytWqvh7qyBHrSl97Oq8spcPquL1qxzJxKFuNRcnBlEjLv7Bzn1L1+eSRdq2t-q5dzLI7MQARJflFiTnnhVBQrUUzdpfuUKKKXdhVxcscrULrCq9ess-G1NlER8wLpgpRCo6HfKMD3Yhd5HJB-c2dqdbeoILs3qvA3eywyuthBRPe6GnbUYog2Gig3qmrUZZeN6T6pdkhSAL6r7uJ8aFBchb574zpYjkhGfmet68QLQPyTRi-pRfzjQy-S-WQq+TcuH0noG1SdmoudX3FzpDmae7nsAJXIfR2yOS272H2KAm2W3SPax33pFjvnXsA3n6AUPsh4OS262S2+-K3P9v2SfSrPGT2AAGf6mBNPbmg--f0NDkWoIAA')">function execute_application(fun, args, succeed, fail) {
    return is_primitive_function(fun)
        ? succeed(apply_primitive_function(fun, args),
                  fail)
        : is_compound_function(fun) 
        ? function_body(fun)(
              extend_environment(
                  function_parameters(fun),
                  args,
                  function_environment(fun)),
              (body_result, fail2) => 
                 succeed(is_return_value(body_result) 
                         ? return_value_content(body_result)
                         : undefined,
                         fail2),
              fail)
        : error(fun, "unknown function type -- " +
                     "execute_application");
}
</pre></div></div>
  </p></div>

  
      <div class='permalink'>
        <a name='h8' class='permalink'></a><h2>
    
    Evaluating amb expressions
  </h2></div>

  <div class='permalink'>
<a name='p28' class='permalink'></a><p>
    
    The <kbd>amb</kbd>
    
      
      syntactic
    
    form is the key element in the nondeterministic language.  Here we see the
    essence of the interpretation process and the reason for keeping track of
    the continuations.  The execution
    
      
      function
    
    for <kbd>amb</kbd> defines a loop
    
      
      <kbd>try_next</kbd>
    
    that cycles through the execution
    
      
      functions
    
    for all the possible values of the <kbd>amb</kbd>
    expression.  Each execution
    
      
      function
    
    is called with a failure continuation that will try the next one.  When
    there are no more alternatives to try, the entire
    <kbd>amb</kbd> expression fails.
      
    <div class='snippet' id='javascript_90_17_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7Y8BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmAy3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLEniytRS0pJaakTmKymM5Nfiso8IOyu7By8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaAKtrJKuItrT3c0PyyKvqEShyHKO9IKsK0q5g80WSsNGSnImU4zcOLIPIWQHoLzHzYEKXQq6Ct7biscycShbjUXJwZRIygawc59S9MakkW9RaWETyF3OXcy74WLAEBa5RYk0ARvNVQUK1FM3aJC7EFCii1atVcXLHK1BqpaiYS6ric6tuZREfMC6YKUQqGwDzSk+3d2IXJQP3Bi77QUT6qCC7fKvapA+0VsMsN0NuUGnLcG1slmKIBg+bSGpq1GNamqcaY+Ra5IUgToEgGgOabiY8ACXIW+e+M6WI5IdqsgTq0pdaUUvEFcm-bqxsyitwGfWi0A8LRHJi7QvU3Qqi42KyufA1E3RYqq5als9ihkckwa-Ckq0HPiuk2PRaoS1W92XKoKlSzfQo2q98O6smby5aoq7E42twBmpmzmyDIvSGlmfqvCvneqp22XVPGq1OfbUILslo0C4Qibb4dbEbS4+mLwG-UOzo1HC6KIULf7WOhmVc6HP7XUxrGs2qeO8soMyslikWzO3qSOxYhMiArmpO3G74QIoQ1ilGqGjmucmuguj0OOja5Y0Yo7cO5O1o9u44ruyu6EB-dCOHRiuA-u2qYutcoeiwEe7LIWqs5u1s7O6iDYnU8emqSe1O9MlCVes0siq0hA1u6EA8mgTc9euKG-E+s+iuq4Ze0ii08ituG+jelO1ncSyEc0iMii5+uPKu9Cc+kPV+vg-+n+ts0zFmnqhejOlu7uku+24W6Bpe+KSac7M+EgYm0m+UhQXUewCZe+BfQsf24i9CXkzoiLNS6a4wzS8IYOoYiLNQJWtAieeSx6JvaiWwWQYEPsbIWQDDa-EhwMJjIYc8bYOws6MQEgHh42KqbaBoGoU26TWTTbBTXUU2qw4NLDUpb6mIc40RQ5JOXAw5dGgodm6Cdhp0e87h3houSTVaDh7RcCMuWoMUy4KMPsM4zbPPQGyR2QbmJgQCOEacOREssQTdbxqRnuZIaQAJ2EIJvzIgq4aJ0pWJvsao5eIs-WKuMzUh5sG4ER5IMRjqKx6R8qORsKxRjVZR0TXDDzQU7KARx0AayOVEpOCCKSLRjx-hQ5BJ1Gegex+VcCByVpvpix+Veo1GeGN0UwTx9BKJ-x5JuJxc9p04nR34yocZ2qdgup7JwMZgtk1Eox7EX1RgzjDZ7PUAc59x1ZuOLxijYppk+Iwg4PZJVJbYfAK56ZqmbJF+S6OohWtYQwSoKkDXfp9tVROdYgMxvJmIcCbaa21GAAHTlKTFV01HXGyEYnhcuiRZ0tAC5WyHrv-o0CiAAHJwBfj6AlxCgUWiA0WSXag0ikWV4sXjakWoxRgSH4haFJEkh1AbMWW3AcW7Myy9KkY+WBXeohXAGy4JX3YpXf7uX2BN5aZxXZXdB5XAGfA1WyYNXf6OWLAYhAbLT54Zx1ACLramXtXiikXbHSBoWChHGOyrWrg2XjxoWJA5pEp6xPWmBnMURMWsX5XDBUXDAlAuV18lA7XhGQ1zWLXRQQ31xw2q8kZ9XDXaYo3gWTGTXmwfW-Xtirj3B5WZ8sQjhc3wJ03JHo2TGGXSr5WM3zwHWxZLV62Q0a2BWg3dJLFaZc2kQ4MFsS2PWvXY3k1LXnXGXZ1zzIt9hewHHdFLESWp2SWkgSX-imAl3QASW4T12N2+x12SXLw925paE5ASX4NXXHp3Wp2m5jiyQ5BhgRGA3rXg6swF3DBsgb5sg73vJt323ON3Xc20SDBp2O7PIyjdXep3WSbSBb3731wC3arR2x3K0kXv4oOGBPV520O92UQiA79dQ92qFeymLEo92fNSOH9I5T2a2UO5CYhak53fQSWgWLBsPjBYkos927BKA2T6A92HBdVsO7AgPeOz2ParWaPzyhhqAuwosMPGOpPvM7A93xY937AqPx2ox3Xew-g7B0ssQYPvJ4itKwPn353tOJEb40OP2v3zwf3IrwPap-2vXvLpO7BQOEO-3o3B3fWhysRJ94XEOkOR3kXIP9PP3YOjPZX5X2WEkDWEdpJfPoPwvvJH3ciHPvQzNEvSRkvzwaUWWHPRoOgFA4vTq1tMOsRrPYO7PEWxP3A0ODPcvx3rbL233r3Vi44cu4PrU23QB5XmWguWYO3HwiuSusMfStOwMeh6vOv1Nh3dpAuBu5WQuvPzx4anTUvf3cWX3VvwxShqvNuyZQukubO4O8va3PPgWAw6OGuuueuTP+vFulvNOvPmObvIuJXovjwRufIxvGNXvOuNuW10vJxMv-uTuzuAvg9vv4ufSX3mPKvv2IfsXau3AwfYOkeYECu0iWugO2uxiOuTvZv4P1W-YJTHvBXg7ofSuhHLuAPmP-O0vGhyfMflvLvinwnrHjPA3LgW3G2JGpG7vnWi250dvBmVv3Q165v7P43aXQ2I3efifufcWdvBeBuFvmfdpytWrus4H-76GX85jZ8zJ58Zb6mLBqtatShqR6GIKbioLXansnmPYKb5mNGtgyAas6tRyq5WEy4XRPere67q4+d1NOMLLt0PfLflybLSq7iUfhlDkkm3ed0ZxI+vfuvl4epvQk+pIXQJ9ECGgJNjRpRfzi-WQPyTQK+S+q-WQjdzHOG1TIWOvo33Fzo4WNfkf3X2eX2VPl2cO8OKBD3j3lPaxSPpF9vwgkWSX6AhPshePl3d3l3e+N3P9KPFfar5H4-UYAAGb2mBNPD2g--f0NDkWoIAA')">function analyze_amb(exp) {
    const cfuns = map(analyze, amb_choices(exp));
    return (env, succeed, fail) => {
        function try_next(choices) {
            return is_null(choices)
                ? fail()
                : head(choices)(env,
                                succeed,
                                () => try_next(tail(choices)));
        }
        return try_next(cfuns);
    };
}
</pre></div></div>
  </p></div>

  
      <div class='permalink'>
        <a name='h9' class='permalink'></a><h2>
    
    Driver loop
  </h2></div>

  
  <div class='permalink'>
<a name='p29' class='permalink'></a><p>
    
    The driver loop for the <kbd>amb</kbd> evaluator is
    complex, due to the mechanism that permits the user to try again in
    evaluating an expression.  The driver uses a
    
      
      function
    
    called
    
      
      <kbd>internal_loop</kbd>,
      
    
    which takes as argument a
    
      
      function
    
    
      
      
	<kbd>try_again</kbd>.
      
    
    The intent is that calling
    
    
      <kbd>try_again</kbd>
    
    should go on to the next untried alternative in the nondeterministic
    evaluation.
    
    The function
    <kbd>internal_loop</kbd>
    
    either calls
    
      
      <kbd>try_again</kbd>
    
    in response to the user typing
    
      
      
	<kbd>try_again</kbd>
      
    
    at the driver loop, or else starts a new evaluation by calling
    <kbd>ambeval</kbd>.  
  </p></div>

  <div class='permalink'>
<a name='p30' class='permalink'></a><p>
    The failure continuation for this call to
    <kbd>ambeval</kbd>
    
    informs the user that there are no more values and re-invokes the driver
    loop.
  </p></div>

  <div class='permalink'>
<a name='p31' class='permalink'></a><p>
    The success continuation for the call to <kbd>ambeval</kbd>
    
    is more subtle.  We print the obtained value and then invoke the internal
    loop again with a
    
      
      
	<kbd>try_again</kbd>
      
    
    
      
      function
    
    that will be able to try the next alternative.  This
    
      
      
	<kbd>next_alternative</kbd>
      
    
    
      
      function
    
    is the second argument that was passed to the success continuation.
    Ordinarily, we think of this second argument as a failure continuation to
    be used if the current evaluation branch later fails.  In this case,
    however, we have completed a successful evaluation, so we can invoke the
    <QUOTE>failure</QUOTE> alternative branch in order to search for additional
    successful evaluations.
    
    
    
    <div class='snippet' id='javascript_90_18_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQGZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKpoCMO2YuWp1QVegH0KTIhQAWATwAUADwCUoAN7ZQu0EwCmFIkxJjJAIxo0ANgYCGJVRp163egPygVoALz-QaSIDUFd3NwAuUAMmFiZVABpQACIrWwczAxUABwNKAwATJMMyAyoAN0KI5LUAbmwAX1whSlozVnsAawMJFpEnbPsme1YjGPokqwKFJIMSco1tN0NjU1AbcQolZLI2bJpSAt7SVrpkhLDwq8Hh0YpxyZpp2fm6xsET-vMJXdZ9w+OwjaSgIi0uKxMZnEUnsAHNYYUJBt6FsCEkdnsDiQjn02jV6k1caIiSQJDcRmMmPQQWDlkZIetNhJDAQQUleG9CZ82oRuXQJFNlKCtOD6WtkRRmQZWWjQAAmTkfIHEvmkublKgsEijEio2l6CHipkstmgDCKpWndpdHqG0nlew2YJKXa6uYUfW6O2MlHbO0SB1OgznUCu+66xUk77+wPO2MGT36MVQyQUOEIo4SpTx9Exx3BfHvKN5oM-OjhrbxxPeuQOApKNNUGzZ-MJi1RuZkGw0ehUEiwiTqzV0HVbdXV5OBexNpTjgmWr4ETUo3q3Ayz14iumrMy1+z1udF1XRcjd+g9CxCtcvBZaNyinegQaakHXk8LeeulGBWuDv4UBRB3mYdtXdPxQBIIgbBseoFx5DpulXCklHoBRWCsGwJlAeN6AnR9n3iVD0NsLCcMjY8CDXCQiIw6lKIpRZ723Bk93rejRnI5UzHYnocNfBi7z0B8GUbZsePbY8snDI4hy1UcULQ2ikkDLCLHsc8gNvJYDUnOx+3kBTiMwjR-F8dY5lhAyVLUS4ri8AilAQnoeMMpTsMdXDJnUnpx1s8Ioj0yy5FckiNAAHnM-Tgusvy7OiWIaHiZIABVrFADoSAUUAhlhIhR0YegiGybINiqFJQAAalCK4avCFEmD7WEqAIZQaNCyqUnRDrYtq9x6sa5rlGsmzer0KIYjibZUpoQgDAAd2yphcvy0BCuK0qCiiZJutG3r+v7QaQuMjqQ22qqet21bpAGlqW2MiSuPWaxOiK6jFNsANWyOm9Ew7eYkWsbINy0nqo3oMhHCO0iPMTGrvWhSDoKhkbLvcLx1QBmggYu1HOzPRrNJA+TxxR1GxtW96bD8AJWORnHRq8WmYrJ-zVohpxRORpJOeG+oaqaGrmtAYHqbM+QfP-QDZJHd1YauCbEu+lIAFUSCsQ4IIpQt+eiTCQm03qvwoZgKXApcqUlFzD1271wchni3qMui1zUC4WZqh2+PEt5+cuAWdMfDHuyx4GHqtbL6F7WFSTamxPqDJXAx+rc9D+8pMaB8cU-CMH2ah5SYez2r4ckRHm1j3D6bR98M6UKuarxnsCel0DdVD0nLqiWPRdAWmK471GvHPSUmY8gubAHzu2chzn++56dm15nqGmqq4hZF0yfwl7IAMJuTZaLhuEsIyn0VV9XsU10ZQAAWhviOo9bihtauFeDD1w+riNk3r7M82Vytq8Pmo1bZ5wdhXfiHE3buxzlRL2Lsfavz9sJNYQdAah3nHgMAJJGCUTYBwOAiBkDoH4CgZox5oTZAaqwKg1BKiAitCCUgnoS4wnhIiLMQh0RUKoDQuhwZOLhx4XwioPReElQMKOew-QmEkBYZOWmnMhBqAtN-YRtDREMP6IwMyWZYpZmSKxEMehWKXVdvozY2xRLGN0KJMx0D3AGIIjYp804mD2Isb6ZIEoXESg8VcAxCMoI2BDEE6CvVzEBMsckAo4gSr2AUCGWJ9B4lZVqpE8IBiFZMBsdk3aGTHHRI6PICQ9gLD0HOMUuQpTynpIcW4AxFUXF6ESKABQJkAB83gOppIKQ06JN9mm6Fae0vwXSfD316fUvQBiABUQzhYqCSKM3w4zQCzLaboPpMzonAAWSMzp3SwBTM8VsZIABSfZSy2mHJ8OczZoBtm6AMaZZpByxndM3u06ZzzokAEJ-BvOuSstZAKzLfNOdsMKVzlm3NABFXQEKoleLCr4IZ7zVndNRYip5PozkdJhTcj5Pguk4p+Xi7YHS0VJHcBitZVKyWQuSH8hZ3S3CYt0H8vQ6hYpvDUdQjR9CSSO1on4HqHQgasSSOo-hWi2i4XqPy3hgrnKqgkDQCwAArPIFAdHivsEDIQHynECv4SGRRC9ZEqNxe4GVmicFvGwEqkR9CjaOF1eBLMBjDjSj7IUEMPqlwkEKDamByKzmQBIEG2hiSaWRujQBUNYbCleKqRIWAkAbFpozUm5NOzU3SOqQAURcWmotua80UuSAAOXsNWhZtbq2T0rW4PldBvx2tde2tMuoRUkTFTVCVIIPm01BNK01mi3W6gVU67tT4J1doYD2yUOEB1XCHQQEddYGyWtBK7edyrZVTt1Y6qMBqSqAU7aqrisikg5QlHhBk56bCAT7BIH1TAX0E01fYB04MGo7zrizK9EhxF2CkTI5R5Lar3s2HUdw7w4KiGHq9Fu8lH2oJUNJPeMs27110OeuY9YQPCorkkfDNUQPHr7cZaDVxCPYiUCRtVGrtWUCwhR64C6ejUbInR8I4s-w7ylsBfeEZMF2GNoJ2E3Y1JxzQ2BMyKHsg4afkoR1+AcHMHwVAQh3B0BYAwOQx60IRgWBdJiYNEZBJMQDgyaEaZ2GZksb8fYVmKDomfVQCG-QaigAAGT+dXrVBGyFhVZCoQYSOwJXN0FlhoQLwWaqx3VQQCQJAwtqoi4YaLdALN-DixGEyARkhmeSPOM96EfhyBoN5qL+W3MHwNkmR8OVqSxfc2HL4jhHQKAAF49A2PcYYzYOtNZQWYYGSRCpkFKIUJIBAF6HJm3N+sQ2YiOnjs6MbEYFtLcwWejLL6BvpeQjtj0RdvRTdWkQWbBh5uECW2M+mK37treeq9FL8YjqpdO6MBrhWPQ-X47VRbTYus8h68dwbZmCj2EHDkHLvY8vncTGooYFJhs6PWLD+H5I7jjAB514Buhv6Ck9bjgUTxlCo5J6GOdFgjVmSh-19cgpEFeknNd17D2wcT2e6NHn9YnJyry-jykqkuHvgrVcPnEPRAs5O+eAAjsEcg64USsBPUXMGBhVfuioI6F9Sh7CTDlpzx83Pburb2+Dj5nG9D2Guw7twJutsGFtzYBUAuW3QhLM6eHVYXfhCHtbt7bucyPabAqYP7gojmfVNNsPvOF4KhB71OXdP-a6CjMHQ1y5LakGKFFwvDBzctfs6XYJSgcul8rmTLw-9S8UYCuglXavqBG6FAXwE6fUa01r4CXCMvaqc0H0IYfWfLjfwn+BIdiuPdXS1zO5iawwliVILhJLcV1QfMDX6go9NW8h1HZv-dSiz-y7MAviQBQ8g2AxzI1HRdv7dzMnfrsj+2g0aJ7LOn39ygmdsojtWclAP8H9hh+h3cEdItcsnBUcOcK81grc7sU87dMV8NADSAptg87pPdvdMVmsw11JH4aN3dE5HQfo6cw1bZk96x99g0igo8vdECyYGg+8c59tENDtesTsSCqBo55Jn9mtX9KZwJ+DBD3Qf9adp850sCzBmcQCBsTdotJDe14wYCkcYtLN4s6crtE8btUCmC5cfdwh5CcDLo8DmCCCulNBUZ8BZleBZkHdv5bAjh4xPUPsVMvsvpY4qCHcJCY5KZyC-D3IbB-D3ZaCjC8DY9dp1MPk7C3AHC5RnCW1LpAiyDvs-DYi0jRo3D3dyNciij3BrZii4ZJw+c5R1NqDiiGhWD+Y+9M9uDjwb9XRYl+hHRf9rNEjbNSc51sggCF8LNsQNE6BNtItYkfN1wED-850yBBilDpi6B2i2hNsvw9cO8uiPREDv57AFjeCliRiOi45HRhsMt+EtiVE9CucDChdPdOl6YBjsDE9ON8BXtI56ddQ+wiBpEeQCBEpohYxfj+xt9Rp8BxZ51ChvNpEQgKAZoNVGwzAJj3dOMmNDB3DWx8CHjk0HMZB5BlBkSqxQTB5QwhAUCbdrDm0p49jnj5gk8jCsSODdBNMF4TAQgwxvjfjiQASDAgTqAQTXiwAISJjoT7gABIMU3oy6JopoJDMwO2UkA4SUcAr-dtS4oudeaEdvTsJYgrTrcvV-CgZfcCbU9XaiNMe4fKS4moi3SvITXeU00oFCI0k9CjLwMuFvbKYqIjFCdmdVWQW-e-VUhgEEHvFEGE+STXE9EfPaP0pUwMz-SA+VIDYokXR09cQfcMy090akKM4fK4v2XWc8T+W0tfSQFUpMlHHQiMKuLwLMCsrkoIoyS4qkyICCYJKfWU3PJkGgNLUgQIwoJQDLUYLfZrb0IdCQD5ZIWZfs1Qxg+ZJIYcqLK-YAg4gUbsMgTodUkQhnancCCwDczoKnaYa02QpdJ6CGTCE0uMgMhs7RJQdnWY882cx+QobHCUX7F8gQxgpQDcmGJ878RnUgcQxYh86nRA-Qukwwikkw1ZemICpwKSIjVTeSP8zCJIL86ON84HTjO45g+DXaZox6G-f0LMyRd0bcs878JgfY6HGvZMTQqLZHeA6s7Y64y3W4ug+40wuGMkl4lmKwyo5bOgxyG0KUHccgwMfdISpk-Cg7Y8BESUNrE3CfG8ekmCp7HooSVfFMdLavGksvHqUPaIsue4nqKIWmAy3CCwvNN4sPD4jkyCRswgAE+QcQbKIQHIk3JaLEniytRS0pJaakTmKymM5Nfiso8IOyu7By8sTkxcRKHIy6fAEoEwXsSoUMI3QIGaAKtrJKuItrT3c0PyyKvqEShyHKO9IKsK0q5g80WSsNGSnImU4zcOLIPIWQHoLzHzYEKXQq6Ct7biscycShbjUXJwZRIygawc59S9MakkW9RaWETyF3OXcy74WLAEBa5RYk0ARvNVQUK1FM3aJC7EFCii1atVcXLHK1BqpaiYS6ric6tuZREfMC6YKUQqGwDzSk+3d2IXJQP3Bi77QUT6qCC7fKvapA+0VsMsN0NuUGnLcG1slmKIBg+bSGpq1GNamqcaY+Ra5IUgToEgGgOabiY8ACXIW+e+M6WI5IdqsgTq0pdaUUvEFcm-bqxsyitwGfWi0A8LRHJi7QvU3Qqi42KyufA1E3RYqq5als9ihkckwa-Ckq0HPiuk2PRaoS1W92XKoKlSzfQo2q98O6smby5aoq7E42twBmpmzmyDIvSGlmfqvCvneqp22XVPGq1OfbUILsloxY0pdCWcHINHOY2fMyefGW7KKrMgGrOrakCLAsnS4WTihklWwg0GCmpgQCYNLDF0eO0oUcquVhMuAu2rIulGkPZg9TTjCy7dOOiu5cmy0qu4j22lQ5aQXOqSHdGcRuhO61G00AbPdwb0Lu9LHu+Ys-LPeS4i0C4Qibb4dbEbS4+mLwG-Zezo1HC6KIULf7behmVc6HP7XUxrGs2qXe8soMyslikW8+3qdewOu84Ws+j0He74QIoQ1iqux+tcz+iig+3Gja5Y0Yo7Vew+1okB448BoB6EB-dCOHRiuAmB2qX+4++BiwRB7LIWqsu+t+i+74dMlBmqNB1naiDYnUlCChs0siq0hA9+6EA8mgTc4huKG-JhlhwBq4S+8SyEc0iMgB7+teo+sh0ii08ituLh1mUzYOqRthwOszVhts0zFmnq3B1+n+kRvg1RrmuRts7JLYs+EgYm0m+UhQXUewCZe+BfQsf24i9CXkzoiLNS6a4wzS8IReoYpOpWtAieWe8OIgc8JgMkBqNuKhPYSUfaWEJIVjHVT0KMOE800J2EJQWJygRYMU2KVhTas6hatJ-By6LwZIMKHJgoG+EkAlfDHh5jG9fJmySU6uYpq9cp1USphp5RyQByOp7AdpzwFIAAbTOmyqScaiUFpjqY0CqlOh6d2iqkSaid7ubAmZOgAF1kgZm48rpknDo6mp83BklUltg75jmTnTmznznBl09wn-wRmQSpmAAdEgIZ+Z66fsVJrVOJk6R52x1qr4QJmIKUfcNEiJ252EDDJElgf8YFm5qJ1ROdPsbIAM65necCUrdCG+Rxp0GEsQEgRFigaoRVOdJUvFkJiJ8CFIMzDFvkkIeMAluU0AAoBqSoYJvPeI5rKMPsM4zbVl8euEacOREsz478BF2QcCf54JwwIFkVyUZFj0IezUqvJGaVlRQVg5h-ZQZIY5wE-MaRVymIGhc4woamy5lIF+cIN+D+TU3F0VzeZIXl2EflvzIgq4NVhJI5i5j1z184WPaV0l-8L5p5jqaVgNs10fHO0pB1vsao5eIs-WKuV1jVrV8Mpgfk2ECCeaedDVcDY171nE61mVyFlFh5wNqqYN4t0NmqMzTFpjIYc8bYOwoZst8qBoGoWS6TWTTbBTXUWS-AKtwMAayOVEpOdNrDUpb6mIc40RQ5Z11GcVkJzl1J2QEl2V8eeo1GeGN0Uwbl9BPOpS8drd-hNd2qdgwUmOiwTF5gtk1E6d2PBN91z1h9053N4o5IEm9KRKGl1sRgXsiIb5oN-NkNo9m2ScRl0RFl9BID1+I9kekejdrluOVlijeIzOsNO9zVu+XQN9xm2IMCcJg8yRXQY506Ct9dkDplgF1lyD9wOozBUD5l2uOoIAA')">const input_prompt = "amb-evaluate input:";
const output_prompt =  "amb-evaluate value:";

function driver_loop() {
    function internal_loop(try_again) {
        const input = user_read(input_prompt);
        if (input === "try_again") {
            try_again();
        } else {
            display("Starting a new problem");
            ambeval(parse(input),
                the_global_environment,
                // ambeval success
                (val, next_alternative) => {
                    user_print(output_prompt, val);
                    return internal_loop(next_alternative);
                },
                // ambeval failure
                () => {
                    display("There are no more values of");
                    display(input);
                    return driver_loop();
                });
        }
    }
    return internal_loop(
               () => {
                   display("There is no current problem");
                   return driver_loop();
               });
}
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p32' class='permalink'></a><p>
    The initial call to
    
      
      <kbd>internal_loop</kbd>
    
    uses a
    
      
      <kbd>try_again</kbd>
    
    
      
      function
    
    that complains that there is no current problem and restarts the driver loop.
    This is the behavior that will happen if the user types
    
      
      
	<kbd>try_again</kbd>
      
    
    when there is no evaluation in progress.
  </p></div>

  
    <div class="permalink">
    <a name="ex_4.50" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.50">Exercise 4.50 </a></b> 
  
    Implement a new
    
      
      syntactic
    
    form <kbd>ramb</kbd> that is like
    <kbd>amb</kbd> except that it searches alternatives in a
    random order, rather than from left to right.  Show how this can help with
    Alyssa's problem in exercise&nbsp;<REF NAME="ex:sentence-generate"><a class="superscript" id="4.3.3-ex-link-4.49" href="./4.3.2.html#ex_4.49">4.49</a></REF>.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_90_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_90_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>



  
    <div class="permalink">
    <a name="ex_4.51" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.51">Exercise 4.51 </a></b> 
  
    
      
      
	Implement assignment such that 
      
    
    is not undone upon failure. For example, we can choose two distinct
    elements from a list and count the number of trials required to make a
    successful choice as follows:
    <div class='snippet' id='javascript_90_19_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
let count = 0;

let x = an_element_of("a", "b", "c");
let y = an_element_of("a", "b", "c");
count = count + 1;
require(! x === y);
list(x, y, count);</pre><pre class='prettyprintoutput'>
Starting a $new$ problem
amb-evaluate value:
["a", ["b", [2, null]]]

amb-evaluate input:</pre></div></div>
    <div class='snippet' id='javascript_90_20_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
try_again</pre><pre class='prettyprintoutput'>
amb-evaluate value:
["a", ["c", [3, null]]]</pre></div></div>
    
      
      
	What values would have been displayed if we had used
	the original meaning of assignment rather than
	permanent assignment?
      
    
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_90_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_90_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    
    
      
    <div class="permalink">
    <a name="ex_4.52" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.52">Exercise 4.52 </a></b> 
  
	
	We shall horribly abuse the syntax for conditional statements, by
	implementing a construct of the following form: 
	<kbd class='snippet'>if (evaluation_succeeds_take) { $statement$ } else { $alternative$ }</kbd>
	The construct permits the user to catch the failure of a
	$\textit{statement}$. It evaluates the
	$\textit{statement}$ as usual and returns
	as usual if the evaluation succeeds. If the evaluation fails,
	however, the $\textit{alternative}$
	is evaluated, as in the following example:
	<div class='snippet' id='javascript_90_21_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
</pre><pre class='prettyprintoutput'>
amb-evaluate input:</pre></div></div>
	<div class='snippet' id='javascript_90_22_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
if (evaluation_succeeds_take) {
    const x = an_element_of(list(1, 3, 5));
    require(is_even(x));
} else {
    "all odd";
}</pre><pre class='prettyprintoutput'>
Starting a $new$ problem
amb-evaluate value:
"all odd"

amb-evaluate input:</pre></div></div>
	<div class='snippet' id='javascript_90_23_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
if (evaluation_succeeds_take) {
    const x = an_element_of(list(1, 3, 5, 8));
    require(is_even(x));
    x;
} else {
    "all odd";
}</pre><pre class='prettyprintoutput'>
Starting a $new$ problem
amb-evaluate value:
8</pre></div></div>
      
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_90_3_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_90_3_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

    
  

  
    <div class="permalink">
    <a name="ex_4.53" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.53">Exercise 4.53 </a></b> 
  
    
    With
    
      
      
	the new kind of assignment
      
    
    as described in exercise&nbsp;<REF NAME="ex:permanent-set"><a class="superscript" id="4.3.3-ex-link-4.51" href="./4.3.3.html#ex_4.51">4.51</a></REF> and
    
      
      
	the construct
	<kbd class='snippet'>if (evaluation_succeeds_take) { $\ldots$ } else { $\ldots$ }</kbd>
      
    
    as in exercise&nbsp;<REF NAME="ex:if-fail"><a class="superscript" id="4.3.3-ex-link-4.52" href="./4.3.3.html#ex_4.52">4.52</a></REF>, what will be the result of
    evaluating
    <div class='snippet' id='javascript_90_24_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
let pairs = null;      
if (evaluation_succeeds_take) {
    const p = prime_sum_pair(list(1, 3, 5, 8), list(20, 35, 110));
    pairs = pair(p, pairs); // using permanent assignment
    amb();
} else {
    pairs;
}</pre></div></div>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_90_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_90_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_4.54" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.54">Exercise 4.54 </a></b> 
  
    
    
    If we had not realized that <kbd>require</kbd> could be
    implemented as an ordinary
    
      
      function
    
    that uses <kbd>amb</kbd>, to be defined by the user as
    part of a nondeterministic program, we would have had to implement it
    as a 
    
      
      syntactic
    
    form. This would require syntax
    
      
      functions
    
    <div class='snippet' id='javascript_90_25_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function is_require(component) {
    return is_tagged_list(component, "require");
}
function require_predicate(component) {
    return head(tail(component));
}</pre></div></div>
    and a new clause in the dispatch in <kbd>analyze</kbd>
    <div class='snippet' id='javascript_90_26_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
: is_require(component)
? analyze_require(component)</pre></div></div>
    as well the
    
      
      function
    
    
      
      
	<kbd>analyze_require</kbd>
      
    
    that handles <kbd>require</kbd>
    expressions.  Complete the following definition of
    
      
      
	<kbd>analyze_require</kbd>.
      
    
    <kbd class='snippet'>function analyze_require(component) {
    const pfun = analyze(require_predicate(component));
    return (env, succeed, fail) =>
        pfun(env,
             (pred_value, fail2) =>
                 $\langle ?? \rangle$
                 ? $\langle ?? \rangle$
                 : succeed("ok", fail2),
             fail);
}</kbd>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_90_5_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_90_5_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

  

  
  
    
    
    
    
    
    
    
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    We chose to
    implement the lazy evaluator in
    section&nbsp;<REF NAME="sec:lazy-evaluation"><a class="superscript" id="4.3.3-sec-link-4.2" href="./4.2.html">4.2</a></REF> as a modification of the
    ordinary metacircular evaluator of
    section&nbsp;<REF NAME="sec:core-of-evaluator"><a class="superscript" id="4.3.3-sec-link-4.1.1" href="./4.1.1.html">4.1.1</a></REF>.  In contrast, we will
    base the <kbd>amb</kbd> evaluator on the analyzing
    evaluator of section&nbsp;<REF NAME="sec:separating-analysis"><a class="superscript" id="4.3.3-sec-link-4.1.7" href="./4.1.7.html">4.1.7</a></REF>, because
    the execution
    
      
      functions
    
    in that evaluator provide a convenient framework for implementing
    backtracking.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    To avoid confusion, we shall
	refrain from declaring <kbd>amb</kbd> as a
	name in our nondeterministic programs.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    We
    didn't worry about undoing
    
      
      declarations,
    
    
      
      
	since we
	
	assume that names are not used prior to the evaluation of their
	declaration, see exercise&nbsp;<REF NAME="ex:internal-defs"><a class="superscript" id="4.3.3-ex-link-4.16" href="./4.1.6.html#ex_4.16">4.16</a></REF>.
	
	  
	  declarations
	
	are scanned out
	(section&nbsp;<REF NAME="sec:internal-definitions"><a class="superscript" id="4.3.3-sec-link-4.1.6" href="./4.1.6.html">4.1.6</a></REF>).
      
    
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./4.3.2.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='92' href='./4.4.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      4.3.3&nbsp;&nbsp;
    Implementing the
    
      
      amb
    
    Evaluator
  
    </div>
    <script> var chapter_id = 91; </script>
    <script> var chapter_path = "chapters/4.3.3.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>